"use strict";(self.webpackChunkInvocationlab_ERD_Online=self.webpackChunkInvocationlab_ERD_Online||[]).push([[8039],{11793:function(h,p,e){e.d(p,{Z:function(){return j}});var m=e(43953),f=e.n(m),_=e(91184),n=e.n(_),u=e(39346),r=e.n(u),T=e(98404),s=e(63356),E=e(4341),A=e(27856),c=e(12125),i=JSON.parse(`{"modules":[],"profile":{"defaultFields":[{"chnname":"\u4E3B\u952EID","name":"id","typeName":"\u65E0\u7B26\u53F7\u5927\u6574\u6570","type":"BigIntUnsigned","dataType":"BIGINT UNSIGNED","remark":"","pk":true,"notNull":true,"autoIncrement":true,"relationNoShow":false,"defaultValue":"","uiHint":""},{"chnname":"\u521B\u5EFA\u4EBA\u7F16\u7801","name":"create_code","typeName":"\u53D8\u957F\u5B57\u7B26\u4E32","type":"String","dataType":"VARCHAR","remark":"(16)","pk":false,"notNull":false,"autoIncrement":false,"relationNoShow":false,"defaultValue":"","uiHint":""},{"chnname":"\u521B\u5EFA\u4EBA\u540D\u79F0","name":"create_name","typeName":"\u53D8\u957F\u5B57\u7B26\u4E32","type":"String","dataType":"VARCHAR","remark":"(32)","pk":false,"notNull":false,"autoIncrement":false,"relationNoShow":false,"defaultValue":"","uiHint":""},{"chnname":"\u521B\u5EFA\u65F6\u95F4","name":"create_time","typeName":"\u65E5\u671F\u65F6\u95F4","type":"DateTime","dataType":"DATETIME","remark":"","pk":false,"notNull":false,"autoIncrement":false,"relationNoShow":false,"defaultValue":"CURRENT_TIMESTAMP","uiHint":""},{"chnname":"\u64CD\u4F5C\u4EBA\u7F16\u7801","name":"op_code","typeName":"\u53D8\u957F\u5B57\u7B26\u4E32","type":"String","dataType":"VARCHAR","remark":"(16)","pk":false,"notNull":false,"autoIncrement":false,"relationNoShow":false,"defaultValue":"","uiHint":""},{"chnname":"\u64CD\u4F5C\u4EBA\u540D\u79F0","name":"op_name","typeName":"\u53D8\u957F\u5B57\u7B26\u4E32","type":"String","dataType":"VARCHAR","remark":"(32)","pk":false,"notNull":false,"autoIncrement":false,"relationNoShow":false,"defaultValue":"","uiHint":""},{"chnname":"\u64CD\u4F5C\u65F6\u95F4","name":"create_time","typeName":"\u65E5\u671F\u65F6\u95F4","type":"DateTime","dataType":"DATETIME","remark":"","pk":false,"notNull":false,"autoIncrement":false,"relationNoShow":false,"defaultValue":"CURRENT_TIMESTAMP","uiHint":""},{"chnname":"\u72B6\u6001\u679A\u4E3E-INVALID:0:\u5931\u6548;VALID:1:\u6709\u6548","name":"state","typeName":"\u5FAE\u5C0F\u6574\u6570","type":"TinyInt","dataType":"TINYINT","remark":"(4)","pk":false,"notNull":true,"autoIncrement":false,"relationNoShow":false,"defaultValue":1,"uiHint":""},{"chnname":"\u5220\u9664\u679A\u4E3E-YES:1:\u662F;NO:0:\u5426","name":"del_flag","typeName":"\u5FAE\u5C0F\u6574\u6570","type":"TinyInt","dataType":"TINYINT","remark":"(4)","pk":false,"notNull":true,"autoIncrement":false,"relationNoShow":false,"defaultValue":0,"uiHint":""}]},"dataTypeDomains":{"datatype":[{"name":"\u53D8\u957F\u5B57\u7B26\u4E32","code":"String","apply":{"java":{"type":"String"},"mysql":{"type":"VARCHAR"},"oracle":{"type":"NVARCHAR2"},"sqlserver":{"type":"NVARCHAR"},"JAVA":{"type":"String"},"MYSQL":{"type":"VARCHAR"},"ORACLE":{"type":"NVARCHAR2"},"SQLServer":{"type":"NVARCHAR"},"PostgreSQL":{"type":"VARCHAR"},"MongoDB":{"type":"String"}}},{"name":"\u5B57\u7B26\u4E32","code":"Char","apply":{"java":{"type":"String"},"mysql":{"type":"CHAR"},"oracle":{"type":"CHAR"},"sqlserver":{"type":"CHAR"},"JAVA":{"type":"String"},"MYSQL":{"type":"CHAR"},"ORACLE":{"type":"CHAR"},"SQLServer":{"type":"CHAR"},"PostgreSQL":{"type":"CHAR"},"MongoDB":{"type":"String"}}},{"name":"\u6587\u672C","code":"Text","apply":{"java":{"type":"String"},"mysql":{"type":"TEXT"},"oracle":{"type":"CLOB"},"sqlserver":{"type":"NTEXT"},"JAVA":{"type":"String"},"MYSQL":{"type":"TEXT"},"ORACLE":{"type":"CLOB"},"SQLServer":{"type":"NTEXT"},"PostgreSQL":{"type":"TEXT"},"MongoDB":{"type":"String"}}},{"name":"\u6D6E\u70B9\u6570","code":"Double","apply":{"java":{"type":"Double"},"mysql":{"type":"DECIMAL"},"oracle":{"type":"NUMBER"},"sqlserver":{"type":"DECIMAL"},"JAVA":{"type":"Double"},"MYSQL":{"type":"DECIMAL"},"ORACLE":{"type":"NUMBER"},"SQLServer":{"type":"DECIMAL"},"PostgreSQL":{"type":"DECIMAL"},"MongoDB":{"type":"Double"}}},{"name":"\u5FAE\u5C0F\u6574\u6570","code":"TinyInt","apply":{"java":{"type":"Integer"},"mysql":{"type":"TINYINT"},"oracle":{"type":"TINYINT"},"sqlserver":{"type":"TINYINT"},"JAVA":{"type":"Integer"},"MYSQL":{"type":"TINYINT"},"ORACLE":{"type":"TINYINT"},"SQLServer":{"type":"TINYINT"},"PostgreSQL":{"type":"TINYINT"},"MongoDB":{"type":"Integer"}}},{"name":"\u65E0\u7B26\u53F7\u5FAE\u5C0F\u6574\u6570","code":"TinyIntUnsigned","apply":{"java":{"type":"Integer"},"mysql":{"type":"TINYINT UNSIGNED"},"oracle":{"type":"TINYINT UNSIGNED"},"sqlserver":{"type":"TINYINT UNSIGNED"},"JAVA":{"type":"Integer"},"MYSQL":{"type":"TINYINT UNSIGNED"},"ORACLE":{"type":"TINYINT UNSIGNED"},"SQLServer":{"type":"TINYINT UNSIGNED"},"PostgreSQL":{"type":"TINYINT UNSIGNED"},"MongoDB":{"type":"Integer"}}},{"name":"\u5C0F\u6574\u6570","code":"SmallInt","apply":{"java":{"type":"Integer"},"mysql":{"type":"SMALLINT"},"oracle":{"type":"SMALLINT"},"sqlserver":{"type":"SMALLINT"},"JAVA":{"type":"Integer"},"MYSQL":{"type":"SMALLINT"},"ORACLE":{"type":"SMALLINT"},"SQLServer":{"type":"SMALLINT"},"PostgreSQL":{"type":"SMALLINT"},"MongoDB":{"type":"Integer"}}},{"name":"\u65E0\u7B26\u53F7\u5C0F\u6574\u6570","code":"SmallIntUnsigned","apply":{"java":{"type":"Integer"},"mysql":{"type":"SMALLINT UNSIGNED"},"oracle":{"type":"NUMBER UNSIGNED"},"sqlserver":{"type":"SMALLINT UNSIGNED"},"JAVA":{"type":"Integer"},"MYSQL":{"type":"SMALLINT UNSIGNED"},"ORACLE":{"type":"NUMBER UNSIGNED"},"SQLServer":{"type":"SMALLINT UNSIGNED"},"PostgreSQL":{"type":"SMALLINT UNSIGNED"},"MongoDB":{"type":"Integer"}}},{"name":"\u6574\u6570","code":"Integer","apply":{"java":{"type":"Integer"},"mysql":{"type":"INT"},"oracle":{"type":"INT"},"sqlserver":{"type":"INT"},"JAVA":{"type":"Integer"},"MYSQL":{"type":"INT"},"ORACLE":{"type":"INT"},"SQLServer":{"type":"INT"},"PostgreSQL":{"type":"INT"},"MongoDB":{"type":"Integer"}}},{"name":"\u65E0\u7B26\u53F7\u6574\u6570","code":"IntegerUnsigned","apply":{"java":{"type":"Long"},"mysql":{"type":"INT UNSIGNED"},"oracle":{"type":"INT UNSIGNED"},"sqlserver":{"type":"INT UNSIGNED"},"JAVA":{"type":"Long"},"MYSQL":{"type":"INT UNSIGNED"},"ORACLE":{"type":"INT UNSIGNED"},"SQLServer":{"type":"INT UNSIGNED"},"PostgreSQL":{"type":"INT UNSIGNED"},"MongoDB":{"type":"Long"}}},{"name":"\u5927\u6574\u6570","code":"BigInt","apply":{"java":{"type":"Long"},"mysql":{"type":"BIGINT"},"oracle":{"type":"NUMBER"},"sqlserver":{"type":"BIGINT"},"JAVA":{"type":"Long"},"MYSQL":{"type":"BIGINT"},"ORACLE":{"type":"NUMBER"},"SQLServer":{"type":"BIGINT"},"PostgreSQL":{"type":"BIGINT"},"MongoDB":{"type":"Long"}}},{"name":"\u65E0\u7B26\u53F7\u5927\u6574\u6570","code":"BigIntUnsigned","apply":{"java":{"type":"Long"},"mysql":{"type":"BIGINT UNSIGNED"},"oracle":{"type":"NUMBER UNSIGNED"},"sqlserver":{"type":"BIGINT UNSIGNED"},"JAVA":{"type":"Long"},"MYSQL":{"type":"BIGINT UNSIGNED"},"ORACLE":{"type":"NUMBER UNSIGNED"},"SQLServer":{"type":"BIGINT UNSIGNED"},"PostgreSQL":{"type":"BIGINT UNSIGNED"},"MongoDB":{"type":"Long"}}},{"name":"\u65E5\u671F","code":"Date","apply":{"java":{"type":"Date"},"mysql":{"type":"DATE"},"oracle":{"type":"DATE"},"sqlserver":{"type":"DATE"},"JAVA":{"type":"Date"},"MYSQL":{"type":"DATE"},"ORACLE":{"type":"DATE"},"SQLServer":{"type":"DATE"},"PostgreSQL":{"type":"DATE"},"MongoDB":{"type":"Date"}}},{"name":"\u65E5\u671F","code":"Timestamp","apply":{"java":{"type":"Date"},"mysql":{"type":"TIMESTAMP"},"oracle":{"type":"TIMESTAMP"},"sqlserver":{"type":"TIMESTAMP"},"JAVA":{"type":"Date"},"MYSQL":{"type":"TIMESTAMP"},"ORACLE":{"type":"TIMESTAMP"},"SQLServer":{"type":"TIMESTAMP"},"PostgreSQL":{"type":"TIMESTAMP"},"MongoDB":{"type":"Date"}}},{"name":"\u5E74\u4EFD","code":"Year","apply":{"java":{"type":"Date"},"mysql":{"type":"YEAR"},"oracle":{"type":"DATE"},"sqlserver":{"type":"DATE"},"JAVA":{"type":"Date"},"MYSQL":{"type":"YEAR"},"ORACLE":{"type":"DATE"},"SQLServer":{"type":"DATE"},"PostgreSQL":{"type":"DATE"},"MongoDB":{"type":"Date"}}},{"name":"\u65E5\u671F\u65F6\u95F4","code":"DateTime","apply":{"java":{"type":"Date"},"mysql":{"type":"DATETIME"},"oracle":{"type":"DATE"},"sqlserver":{"type":"DATE"},"JAVA":{"type":"Date"},"MYSQL":{"type":"DATETIME"},"ORACLE":{"type":"DATE"},"SQLServer":{"type":"DATE"},"PostgreSQL":{"type":"DATE"},"MongoDB":{"type":"Date"}}}],"database":[{"code":"MYSQL","template":"DROP TABLE \`{{=it.entity.title}}\`;\\n$blankline\\nCREATE TABLE \`{{=it.entity.title}}\`(\\n{{ pkList = [] ; }}\\n{{~it.entity.fields:field:index}}\\n    {{? field.pk }}{{ pkList.push(field.name) }}{{?}}\\n    \`{{=field.name}}\` {{=field.type}} {{= field.pk ? 'NOT NULL' : '' }} COMMENT '{{=it.func.join(field.chnname,field.remark,';')}}' {{= index < it.entity.fields.length-1 ? ',' : ( pkList.length>0 ? ',' :'' ) }}\\n{{~}}\\n{{? pkList.length >0 }}\\n    PRIMARY KEY ({{~pkList:pkName:i}}{{= pkName }}{{= i<pkList.length-1 ? ',' : '' }}{{~}})\\n{{?}}\\n) COMMENT = '{{=it.func.join(it.entity.chnname,it.entity.remark,';') }}'","fileShow":true,"defaultDatabase":true,"createTableTemplate":"CREATE TABLE \`{{=it.entity.title}}\`(\\n{{ pkList = [] ; }}\\n{{~it.entity.fields:field:index}}\\n    {{? field.pk }}{{ pkList.push(field.name) }}{{?}}\\n    \`{{=field.name}}\` {{=field.dataType}}{{=field.remark}} {{= field.notNull ? 'NOT NULL' : '' }} {{= field.autoIncrement ? 'AUTO_INCREMENT' : '' }} {{= field.defaultValue ? it.func.join('DEFAULT',field.defaultValue,' ') : '' }} COMMENT '{{=it.func.join(field.chnname,' ')}}' {{= index < it.entity.fields.length-1 ? ',' : ( pkList.length>0 ? ',' :'' ) }}\\n{{~}}\\n{{? pkList.length >0 }}\\n    PRIMARY KEY ({{~pkList:pkName:i}}{{= pkName }}{{= i<pkList.length-1 ? ',' : '' }}{{~}})\\n{{?}}\\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='{{=it.func.join(it.entity.chnname,' ') }}';{{=it.separator}}\\n$blankline\\n","deleteTableTemplate":"DROP TABLE \`{{=it.entity.title}}\`;{{=it.separator}}","rebuildTableTemplate":"create table ERD_UP_{{=it.oldEntity.title}}\\nas select * from {{=it.oldEntity.title}};{{=it.separator}}\\n$blankline\\n\\ndrop table {{=it.oldEntity.title}};{{=it.separator}}\\n$blankline\\n\\nCREATE TABLE {{=it.newEntity.title}}(\\n{{ pkList = [] ; }}\\n{{~it.newEntity.fields:field:index}}\\n    {{? field.pk }}{{ pkList.push(field.name) }}{{?}}\\n    \`{{=field.name}}\` {{=field.type}} {{= field.notNull ? 'NOT NULL' : '' }} COMMENT '{{=it.func.join(field.chnname,field.remark,';')}}' {{= index < it.newEntity.fields.length-1 ? ',' : ( pkList.length>0 ? ',' :'' ) }}\\n{{~}}\\n{{? pkList.length >0 }}\\n    PRIMARY KEY ({{~pkList:pkName:i}}{{= pkName }}{{= i<pkList.length-1 ? ',' : '' }}{{~}})\\n{{?}}\\n) COMMENT = '{{=it.func.join(it.newEntity.chnname,it.newEntity.remark,';') }}';{{=it.separator}}\\n$blankline\\n\\n{{ sameCols = it.func.intersect(it.newEntity.fields,it.oldEntity.fields) ;}}\\ninsert into {{=it.newEntity.title}}(\\n{{~sameCols:field:index}}\\n    \`{{=field.name}}\`{{? index<sameCols.length-1}},{{?}}\\n{{~}}\\n) \\nselect \\n{{~sameCols:field:index}}\\n    \`{{=field.name}}\`{{? index<sameCols.length-1}},{{?}}\\n{{~}}\\nfrom ERD_UP_{{=it.oldEntity.title}};{{=it.separator}}\\n$blankline\\n\\ndrop table ERD_UP_{{=it.oldEntity.title}};{{=it.separator}}\\n$blankline\\n{{~it.newEntity.indexs:index}}\\nALTER TABLE {{=it.newEntity.title}} ADD {{? index.isUnique}}UNIQUE{{??}}INDEX{{?}} {{=index.name}}({{=it.func.join(...index.fields,',')}});{{=it.separator}}\\n{{~}}","createFieldTemplate":"ALTER TABLE \`{{=it.entity.title}}\` ADD COLUMN \`{{=it.field.name}}\` {{=it.field.type}} {{? it.field.notNull}}NOT NULL{{?}} {{? it.field.defaultValue}}DEFAULT {{? null==it.field.defaultValue}}NULL{{??}}{{=it.field.defaultValue}}{{?}}{{?}} {{? it.field.autoIncrement}}AUTO_INCREMENT{{?}} {{? it.field.pk}}PRIMARY KEY{{?}} {{? it.field.chnname}}COMMENT '{{=it.field.chnname}}'{{?}} {{? it.field.addAfter}}AFTER {{=it.field.addAfter}}{{?}};{{=it.separator}}","updateFieldTemplate":"ALTER TABLE \`{{=it.entity.title}}\` MODIFY COLUMN \`{{=it.field.name}}\` {{=it.field.type}} {{? it.field.notNull}}NOT NULL{{?}} {{? it.field.defaultValue}}DEFAULT {{? null==it.field.defaultValue}}NULL{{?? 'CURRENT_TIMESTAMP' == it.field.defaultValue}}CURRENT_TIMESTAMP{{??}}{{=it.field.defaultValue}}{{?}} {{?}} {{? it.field.autoIncrement}}AUTO_INCREMENT{{?}} {{? it.field.chnname}}COMMENT '{{=it.field.chnname}}'{{?}};{{=it.separator}}","deleteFieldTemplate":"ALTER TABLE \`{{=it.entity.title}}\` DROP \`{{=it.field.name}}\`;{{=it.separator}}","deleteIndexTemplate":"ALTER TABLE \`{{=it.entity.title}}\` DROP INDEX \`{{=it.index.name}}\`;{{=it.separator}}","createIndexTemplate":"ALTER TABLE \`{{=it.entity.title}}\` ADD {{? it.index.isUnique}}UNIQUE{{??}}INDEX{{?}} \`{{=it.index.name}}\`({{=it.func.join(...it.index.fields,',')}});{{=it.separator}}","updateTableComment":"ALTER TABLE \`{{=it.entity.title}}\` COMMENT '{{=it.entity.chnname}}';{{=it.separator}}"},{"code":"ORACLE","template":"DROP TABLE \`{{=it.entity.title}}\`;{{=it.separator}}\\n$blankline\\nCREATE TABLE \`{{=it.entity.title}}\`(\\n{{ pkList = [] ; }}\\n{{~it.entity.fields:field:index}}\\n    {{? field.pk }}{{ pkList.push(field.name) }}{{?}}\\n    \`{{=field.name}}\` {{=field.type}}  {{= field.pk ? 'NOT NULL' : '' }} {{= index < it.entity.fields.length-1 ? ',' : ( pkList.length>0 ? ',' :'' ) }}\\n{{~}}\\n{{? pkList.length >0 }}\\n    PRIMARY KEY ({{~pkList:pkName:i}}{{= pkName }}{{= i<pkList.length-1 ? ',' : '' }}{{~}})\\n{{?}}\\n);{{=it.separator}}\\n$blankline\\nCOMMENT ON TABLE \`{{=it.entity.title}}\` IS '{{=it.func.join(it.entity.chnname,it.entity.remark,';') }}';{{=it.separator}}\\n{{~it.entity.fields:field:index}}\\nCOMMENT ON COLUMN \`{{=it.entity.title}}\`.\`{{=field.name}}\` IS '{{=it.func.join(field.chnname,field.remark,';')}}';{{=it.separator}}\\n{{~}}","createTableTemplate":"CREATE TABLE \`{{=it.entity.title}}\`(\\n{{ pkList = [] ; }}\\n{{~it.entity.fields:field:index}}\\n    {{? field.pk }}{{ pkList.push(field.name) }}{{?}}\\n    \`{{=field.name}}\` {{=field.type}}{{? field.defaultValue}} DEFAULT {{=field.defaultValue}}{{?}}{{= field.notNull ? ' NOT NULL' : '' }}{{= index < it.entity.fields.length-1 ? ',' : ( pkList.length>0 ? ',' :'' ) }}\\n{{~}}\\n{{? pkList.length >0 }}\\n    PRIMARY KEY ({{~pkList:pkName:i}}{{= pkName }}{{= i<pkList.length-1 ? ',' : '' }}{{~}})\\n{{?}}\\n);{{=it.separator}}\\n$blankline\\n{{? it.entity.chnname || it.entity.remark}}COMMENT ON TABLE \`{{=it.entity.title}}\` IS {{? it.entity.remark}}'{{=it.entity.remark}}'{{??}}'{{=it.entity.chnname}}'{{?}};{{=it.separator}}{{?}}\\n{{~it.entity.fields:field:index}}\\n{{? field.chnname || field.remark}}COMMENT ON COLUMN \`{{=it.entity.title}}\`.\`{{=field.name}}\` IS {{? field.remark}}'{{=field.remark}}'{{??}}'{{=field.chnname}}'{{?}};{{=it.separator}}{{?}}\\n{{~}}","deleteTableTemplate":"DROP TABLE \`{{=it.entity.title}}\`;{{=it.separator}}\\r\\n$blankline","rebuildTableTemplate":"CREATE TABLE ERD_UP_{{=it.oldEntity.title}}\\nAS SELECT * FROM {{=it.oldEntity.title}};{{=it.separator}}\\n$blankline\\nDROP TABLE {{=it.oldEntity.title}};{{=it.separator}}\\n$blankline\\nCREATE TABLE {{=it.newEntity.title}}(\\n{{ pkList = [] ; }}{{~it.newEntity.fields:field:index}}{{? field.pk }}{{ pkList.push(field.name) }}{{?}}    \`{{=field.name}}\` {{=field.type}}{{? field.defaultValue}} DEFAULT {{=field.defaultValue}}{{?}}{{= field.notNull ? ' NOT NULL' : '' }}{{= index < it.newEntity.fields.length-1 ? ',' : ( pkList.length>0 ? ',' :'' ) }}\\n{{~}}{{? pkList.length >0 }}    PRIMARY KEY ({{~pkList:pkName:i}}{{= pkName }}{{= i<pkList.length-1 ? ',' : '' }}{{~}}){{?}}\\n);{{=it.separator}}\\n$blankline\\n{{? it.newEntity.chnname || it.newEntity.remark}}COMMENT ON TABLE {{=it.newEntity.title}} IS {{? it.newEntity.remark}}'{{=it.entity.remark}}'{{??}}'{{=it.newEntity.chnname}}'{{?}};{{?}}{{=it.separator}}\\n{{~it.newEntity.fields:field:index}}\\n{{? field.chnname || field.remark}}COMMENT ON COLUMN {{=it.newEntity.title}}.\`{{=field.name}}\` IS {{? field.remark}}'{{=field.remark}}'{{??}}'{{=field.chnname}}'{{?}};{{?}}{{=it.separator}}\\n{{~}}\\n{{ sameCols = it.func.intersect(it.newEntity.fields,it.oldEntity.fields) ;}}\\n$blankline\\nINSERT INTO {{=it.newEntity.title}}(\\n{{~sameCols:field:index}}   \`{{=field.name}}\`{{? index<sameCols.length-1}},{{?}}\\n{{~}}) \\nSELECT\\n{{~sameCols:field:index}}   \`{{=field.name}}\`{{? index<sameCols.length-1}},{{?}}\\n{{~}}FROM ERD_UP_{{=it.oldEntity.title}};{{=it.separator}}\\n\\nDROP TABLE ERD_UP_{{=it.oldEntity.title}};{{=it.separator}}\\n{{~it.newEntity.indexs:index}}\\nCREATE{{? index.isUnique}} UNIQUE{{?}} INDEX {{=index.name}} ON {{=it.newEntity.title}}({{=it.func.join(index.fields,',')}});{{=it.separator}}\\n{{~}}","createFieldTemplate":"ALTER TABLE \`{{=it.entity.title}}\` ADD(\`{{=it.field.name}}\` {{=it.field.type}}{{? it.field.defaultValue}} DEFAULT {{=it.field.defaultValue}}{{?}}{{? it.field.notNull}} NOT NULL{{?}});{{=it.separator}}\\r\\n{{? it.field.chnname || it.field.remark}}COMMENT ON COLUMN \`{{=it.entity.title}}\`.\`{{=it.field.name}}\` IS {{? it.field.remark}}'{{=it.field.remark}}'{{??}}'{{=it.field.chnname}}'{{?}};{{=it.separator}}{{?}}\\r\\n$blankline","updateFieldTemplate":"ALTER TABLE \`{{=it.entity.title}}\` MODIFY(\`{{=it.field.name}}\` {{=it.field.type}}{{? it.field.defaultValue}} DEFAULT {{=it.field.defaultValue}}{{?}}{{? it.field.notNull}} NOT NULL{{?}});{{=it.separator}}\\r\\n{{? it.field.chnname || it.field.remark}}COMMENT ON COLUMN \`{{=it.entity.title}}\`.\`{{=it.field.name}}\` IS {{? it.field.remark}}'{{=it.field.remark}}'{{??}}'{{=it.field.chnname}}'{{?}};{{=it.separator}}{{=it.separator}}{{?}}\\r\\n$blankline","deleteFieldTemplate":"ALTER TABLE \`{{=it.entity.title}}\` DROP(\`{{=it.field.name}}\`);{{=it.separator}}\\r\\n$blankline","deleteIndexTemplate":"DROP INDEX \`{{=it.entity.title}}\`.\`{{=it.index.name}}\`;{{=it.separator}}\\r\\n$blankline","createIndexTemplate":"CREATE{{? it.index.isUnique}} UNIQUE{{?}} INDEX \`{{=it.index.name}}\` ON \`{{=it.entity.title}}\`({{=it.func.join(it.index.fields,',')}});{{=it.separator}}\\r\\n$blankline","updateTableComment":"{{? it.entity.chnname || it.entity.remark}}COMMENT ON TABLE \`{{=it.entity.title}}\` IS {{? it.entity.remark}}'{{=it.entity.remark}}'{{??}}'{{=it.entity.chnname}}'{{?}};{{=it.separator}}{{?}}\\r\\n$blankline"},{"code":"SQLServer","createTableTemplate":"CREATE TABLE \`{{=it.entity.title}}\`(\\n{{ pkList = [] ; }}\\n{{~it.entity.fields:field:index}}\\n    {{? field.pk }}{{ pkList.push(field.name) }}{{?}}\\n    \`{{=field.name}}\` {{=field.type}} {{= field.notNull ? 'NOT NULL' : '' }} {{= field.autoIncrement ? 'IDENTITY(1,1)' : '' }} {{= field.defaultValue ? it.func.join('DEFAULT',field.defaultValue,' ') : '' }}  {{= index < it.entity.fields.length-1 ? ',' : ( pkList.length>0 ? ',' :'' ) }}\\n{{~}}\\n{{? pkList.length >0 }}\\n    CONSTRAINT PK_\`{{=it.entity.title}}\` PRIMARY KEY CLUSTERED ({{~pkList:pkName:i}}{{= pkName }} ASC {{= i<pkList.length-1 ? ',' : '' }}{{~}}) ON [PRIMARY] \\n{{?}}\\n) ;{{=it.separator}}\\n\\n$blankline\\nEXECUTE sp_addextendedproperty N'MS_Description', '{{= it.entity.chnname || it.entity.remark}}', N'user', N'dbo', N'table', N'\`{{=it.entity.title}}\`', NULL, NULL;{{=it.separator}}\\n{{~it.entity.fields:field:index}}\\n{{? field.chnname || field.remark}}EXECUTE sp_addextendedproperty N'MS_Description', {{? field.remark}}'{{=field.remark}}'{{??}}'{{=field.chnname}}'{{?}}, N'user', N'dbo', N'table', N'\`{{=it.entity.title}}\`', N'column', N'\`{{=field.name}}\`';{{=it.separator}}{{?}}\\n{{~}}\\n"},{"code":"PostgreSQL","template":"DROP TABLE \`{{=it.entity.title}}\`;\\n$blankline\\nCREATE TABLE \`{{=it.entity.title}}\`(\\n{{ pkList = [] ; }}\\n{{~it.entity.fields:field:index}}\\n    {{? field.pk }}{{ pkList.push(field.name) }}{{?}}\\n    \`{{=field.name}}\` {{=field.type}} {{= field.pk ? 'NOT NULL' : '' }} COMMENT '{{=it.func.join(field.chnname,field.remark,';')}}' {{= index < it.entity.fields.length-1 ? ',' : ( pkList.length>0 ? ',' :'' ) }}\\n{{~}}\\n{{? pkList.length >0 }}\\n    PRIMARY KEY ({{~pkList:pkName:i}}{{= pkName }}{{= i<pkList.length-1 ? ',' : '' }}{{~}})\\n{{?}}\\n) COMMENT = '{{=it.func.join(it.entity.chnname,it.entity.remark,';') }}'","createTableTemplate":"CREATE TABLE \`{{=it.entity.title}}\`(\\n{{ pkList = [] ; }}\\n{{~it.entity.fields:field:index}}\\n    {{? field.pk }}{{ pkList.push(field.name) }}{{?}}\\n    \`{{=field.name}}\` {{=field.type}}{{? field.defaultValue}} DEFAULT {{=field.defaultValue}}{{?}}{{= field.notNull ? ' NOT NULL' : '' }}{{= index < it.entity.fields.length-1 ? ',' : ( pkList.length>0 ? ',' :'' ) }}\\n{{~}}\\n{{? pkList.length >0 }}\\n    PRIMARY KEY ({{~pkList:pkName:i}}{{= pkName }}{{= i<pkList.length-1 ? ',' : '' }}{{~}})\\n{{?}}\\n);{{=it.separator}}\\n$blankline\\n{{? it.entity.chnname || it.entity.remark}}COMMENT ON TABLE \`{{=it.entity.title}}\` IS {{? it.entity.remark}}'{{=it.entity.remark}}'{{??}}'{{=it.entity.chnname}}'{{?}};{{=it.separator}}{{?}}\\n{{~it.entity.fields:field:index}}\\n{{? field.chnname || field.remark}}COMMENT ON COLUMN \`{{=it.entity.title}}\`.\`{{=field.name}}\` IS {{? field.remark}}'{{=field.remark}}'{{??}}'{{=field.chnname}}'{{?}};{{=it.separator}}{{?}}\\n{{~}}","deleteTableTemplate":"DROP TABLE \`{{=it.entity.title}}\`;{{=it.separator}}","rebuildTableTemplate":"create table ERD_UP_{{=it.oldEntity.title}}\\nas select * from {{=it.oldEntity.title}};{{=it.separator}}\\n$blankline\\n\\ndrop table {{=it.oldEntity.title}};{{=it.separator}}\\n$blankline\\n\\nCREATE TABLE {{=it.newEntity.title}}(\\n{{ pkList = [] ; }}\\n{{~it.newEntity.fields:field:index}}\\n    {{? field.pk }}{{ pkList.push(field.name) }}{{?}}\\n    \`{{=field.name}}\` {{=field.type}} {{= field.notNull ? 'NOT NULL' : '' }} COMMENT '{{=it.func.join(field.chnname,field.remark,';')}}' {{= index < it.newEntity.fields.length-1 ? ',' : ( pkList.length>0 ? ',' :'' ) }}\\n{{~}}\\n{{? pkList.length >0 }}\\n    PRIMARY KEY ({{~pkList:pkName:i}}{{= pkName }}{{= i<pkList.length-1 ? ',' : '' }}{{~}})\\n{{?}}\\n) COMMENT = '{{=it.func.join(it.newEntity.chnname,it.newEntity.remark,';') }}';{{=it.separator}}\\n$blankline\\n\\n{{ sameCols = it.func.intersect(it.newEntity.fields,it.oldEntity.fields) ;}}\\ninsert into {{=it.newEntity.title}}(\\n{{~sameCols:field:index}}\\n    \`{{=field.name}}\`{{? index<sameCols.length-1}},{{?}}\\n{{~}}\\n) \\nselect \\n{{~sameCols:field:index}}\\n    \`{{=field.name}}\`{{? index<sameCols.length-1}},{{?}}\\n{{~}}\\nfrom ERD_UP_{{=it.oldEntity.title}};{{=it.separator}}\\n$blankline\\n\\ndrop table ERD_UP_{{=it.oldEntity.title}};{{=it.separator}}","createFieldTemplate":"ALTER TABLE \`{{=it.entity.title}}\` ADD COLUMN \`{{=it.field.name}}\` {{=it.field.type}} {{? it.field.notNull}}NOT NULL{{?}} {{? it.field.defaultValue}}DEFAULT {{? null==it.field.defaultValue}}NULL{{??}}{{=it.field.defaultValue}}{{?}}{{?}} {{? it.field.autoIncrement}}AUTO_INCREMENT{{?}} {{? it.field.pk}}PRIMARY KEY{{?}} {{? it.field.chnname}}COMMENT '{{=it.field.chnname}}'{{?}} {{? it.field.addAfter}}AFTER {{=it.field.addAfter}}{{?}};{{=it.separator}}","updateFieldTemplate":"ALTER TABLE \`{{=it.entity.title}}\` MODIFY COLUMN \`{{=it.field.name}}\` {{=it.field.type}} {{? it.field.notNull}}NOT NULL{{?}} {{? it.field.defaultValue}}DEFAULT {{? null==it.field.defaultValue}}NULL{{??}}{{=it.field.defaultValue}}{{?}}{{?}} {{? it.field.autoIncrement}}AUTO_INCREMENT{{?}} {{? it.field.chnname}}COMMENT '{{=it.field.chnname}}'{{?}};{{=it.separator}}","deleteFieldTemplate":"ALTER TABLE \`{{=it.entity.title}}\` DROP \`{{=it.field.name}}\`;{{=it.separator}}","deleteIndexTemplate":"ALTER TABLE \`{{=it.entity.title}}\` DROP INDEX \`{{=it.index.name}}\`;{{=it.separator}}","createIndexTemplate":"ALTER TABLE \`{{=it.entity.title}}\` ADD {{? it.index.isUnique}}UNIQUE{{??}}INDEX{{?}} \`{{=it.index.name}}\`({{=it.func.join(...it.index.fields,',')}});{{=it.separator}}","updateTableComment":"ALTER TABLE \`{{=it.entity.title}}\` COMMENT '{{=it.entity.chnname}}';{{=it.separator}}"},{"code":"JAVA","template":"package group.rober.erd.{{=it.module.name}}.entity;\\n$blankline\\nimport javax.persistence.*;\\nimport java.io.Serializable;\\nimport java.util.Date;\\n$blankline\\n$blankline\\n\\n/** {{=it.entity.chnname}} */\\n@Table(name=\\"\`{{=it.entity.title}}\`\\")\\npublic class {{=it.func.camel(it.entity.title,true) }} implements Serializable,Cloneable{\\n{{~it.entity.fields:field:index}}\\n    /** {{=it.func.join(field.chnname,field.remark,';')}} */\\n    {{? field.pk }}\\n    @Id\\n    @GeneratedValue\\n    {{?}}\\n    private {{=field.type}} {{=it.func.camel(field.name,false)}} ;\\n{{~}}\\n$blankline\\n{{~it.entity.fields:field:index}}\\n    /** {{=it.func.join(field.chnname,field.remark,';')}} */\\n    public {{=field.type}} get{{=it.func.camel(field.name,true)}}(){\\n        return this.{{=it.func.camel(field.name,false)}};\\n    }\\n    /** {{=it.func.join(field.chnname,field.remark,';')}} */\\n    public void set{{=it.func.camel(field.name,true)}}({{=field.type}} {{= it.func.camel(field.name,false) }}){\\n        this.{{=it.func.camel(field.name,false)}} = {{= it.func.camel(field.name,false) }};\\n    }\\n{{~}}\\n}","createTableTemplate":"package group.rober.erd.{{=it.module.name}}.entity;\\n$blankline\\nimport javax.persistence.*;\\nimport java.io.Serializable;\\nimport java.util.Date;\\n$blankline\\n$blankline\\n@Table(name=\\"\`{{=it.entity.title}}\`\\")\\npublic class {{=it.func.camel(it.entity.title,true) }} implements Serializable,Cloneable{\\n{{~it.entity.fields:field:index}}\\n    /** {{=it.func.join(field.chnname,field.remark,';')}} */\\n    {{? field.pk }}\\n    @Id\\n    @GeneratedValue\\n    {{?}}\\n    private {{=field.type}} {{=it.func.camel(field.name,false)}} ;\\n{{~}}\\n$blankline\\n{{~it.entity.fields:field:index}}\\n    /** {{=it.func.join(field.chnname,field.remark,';')}} */\\n    public {{=field.type}} get{{=it.func.camel(field.name,true)}}(){\\n        return this.{{=it.func.camel(field.name,false)}};\\n    }\\n    /** {{=it.func.join(field.chnname,field.remark,';')}} */\\n    public void set{{=it.func.camel(field.name,true)}}({{=field.type}} {{= it.func.camel(field.name,false) }}){\\n        this.{{=it.func.camel(field.name,false)}} = {{= it.func.camel(field.name,false) }};\\n    }\\n{{~}}\\n}","deleteTableTemplate":"","rebuildTableTemplate":"","createFieldTemplate":"","updateFieldTemplate":"","deleteFieldTemplate":"","deleteIndexTemplate":"","createIndexTemplate":"","updateTableComment":""},{"code":"MongoDB","template":"","createTableTemplate":"","deleteTableTemplate":"","rebuildTableTemplate":"","createFieldTemplate":"","updateFieldTemplate":"","deleteFieldTemplate":"","deleteIndexTemplate":"","createIndexTemplate":"","updateTableComment":""}]}}`),t=e(62656),d=e(44766),D=e.n(d),M=e(51393),I=e(5460),a=e(36422),R=function(g){var S={projectName:"",description:"",tags:"",projectJSON:r()({},i),configJSON:{synchronous:{upgradeType:"increment"}}},O=function(o){};return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(s.Y,{title:"\u65B0\u589E\u9879\u76EE",trigger:(0,a.jsx)(t.ZP,{type:"primary",children:"\u65B0\u5EFA"}),onFinish:function(){var N=n()(f()().mark(function o(l){return f()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return g.type===1?(0,M.B)(r()(r()({},S),{},{projectName:l.projectName,description:l.description,tags:D().join(l.tags,",")})).then(function(){g.fetchProjects()}):(0,I.ox)(r()(r()({},S),{},{projectName:l.projectName,description:l.description,tags:D().join(l.tags,",")})).then(function(){g.fetchProjects()}),y.abrupt("return",!0);case 2:case"end":return y.stop()}},o)}));return function(o){return N.apply(this,arguments)}}(),children:[(0,a.jsx)(E.Z,{width:"md",name:"projectName",label:"\u9879\u76EE\u540D",placeholder:"\u8BF7\u8F93\u5165\u9879\u76EE\u540D",formItemProps:{rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"},{max:100,message:"\u4E0D\u80FD\u5927\u4E8E 100 \u4E2A\u5B57\u7B26"}]}}),(0,a.jsx)(A.Z,{width:"md",name:"tags",label:"\u6807\u7B7E",placeholder:"\u8BF7\u8F93\u5165\u9879\u76EE\u6807\u7B7E,\u6309\u56DE\u8F66\u5206\u5272",formItemProps:{rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"}]},fieldProps:{mode:"tags",onChange:O,tokenSeparators:[","]}}),(0,a.jsx)(c.Z,{width:"md",name:"description",label:"\u9879\u76EE\u63CF\u8FF0",placeholder:"\u8BF7\u8F93\u5165\u9879\u76EE\u63CF\u8FF0",formItemProps:{rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"},{max:100,message:"\u4E0D\u80FD\u5927\u4E8E 100 \u4E2A\u5B57\u7B26"}]}})]})})},j=T.memo(R)},37677:function(h,p,e){var m=e(98404),f=e(62656),_=e(29612),n=e(99418),u=e(36422),r=function(s){return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(f.ZP,{type:"primary",ghost:!0,onClick:function(){_.LS("erd:projectId",s.project.id),n.m.push({pathname:"/design/table/model"})},children:"\u6253\u5F00\u6A21\u578B"})})};p.Z=m.memo(r)},53382:function(h,p,e){e.r(p),e.d(p,{searchProjects:function(){return D}});var m=e(9083),f=e.n(m),_=e(39346),n=e.n(_),u=e(15241),r=e(23759),T=e(64210),s=e(24765),E=e(98404),A=e(72418),c=e(37423),i=e(37677),t=e(51393),d=e(36422);function D(M,I,a){M(n()(n()({},I),{},{projectName:a}))}p.default=function(){var M=(0,E.useState)({page:1,limit:20,total:0,projects:[],order:"updateTime"}),I=f()(M,2),a=I[0],R=I[1],j=(0,E.useState)(!1),C=f()(j,2),g=C[0],S=C[1],O=function(o){S(!0),(0,t.LD)(o||a).then(function(l){if(S(!1),l)if(l.data){var L;R(n()(n()({},a),{},{total:l.data.total,projects:(L=l.data.records)===null||L===void 0?void 0:L.map(function(y){return n()(n()({},y),{},{avatar:"/invocationlab-erd-online-view/logo.svg"})})}))}else r.ZP.error("\u83B7\u53D6\u9879\u76EE\u4FE1\u606F\u5931\u8D25")})};return(0,E.useEffect)(function(){O(a)},[a.page,a.order]),(0,d.jsx)(u.Rs,{size:"large",loading:g,toolbar:{menu:{items:[{key:"tab1",label:(0,d.jsx)("span",{children:"\u6700\u8FD1\u9879\u76EE \u300C\u4E2A\u4EBA + \u56E2\u961F\u300D"})}]},search:{size:"middle",placeholder:"\u9879\u76EE\u540D",onSearch:function(o){D(O,a,o)}}},rowKey:"projectName",dataSource:a.projects,pagination:{pageSize:a.limit,total:a.total,onChange:function(o,l){R(n()(n()({},a),{},{page:o,limit:l}))}},metas:{title:{dataIndex:"projectName",title:"\u9879\u76EE\u540D\u79F0"},avatar:{dataIndex:"avatar",search:!1},description:{dataIndex:"description",search:!1},content:{dataIndex:"updateTime",render:function(o){return(0,d.jsx)("div",{style:{color:"#00000073"},children:o},"updateTime")}},subTitle:{render:function(o,l){var L;return(0,d.jsxs)(T.Z,{size:0,children:[(0,d.jsx)(s.Z,{color:"blue",children:l.type==="1"?(0,d.jsx)(A.Z,{}):(0,d.jsx)(c.Z,{})},l.projectName),(L=l.tags)===null||L===void 0?void 0:L.split(",").map(function(y,P){return(0,d.jsx)(s.Z,{color:P%2==0?"#5BD8A6":"blue",children:y},y+P)})]})},dataIndex:"type",search:!1},actions:{render:function(o,l){return[(0,d.jsx)(i.Z,{project:l},"OpenProject"+l.id)]},search:!1}}})}},5460:function(h,p,e){e.d(p,{ox:function(){return r},pV:function(){return s},rn:function(){return E},wg:function(){return T}});var m=e(39346),f=e.n(m),_=e(29612),n=e(68413),u=e(55074),r=function(i){return n.ZP.post("/ncnb/project/add",{data:i})},T=function(i){return n.ZP.post("/ncnb/project/update",{data:i})},s=function(i){return n.ZP.post("/ncnb/project/delete",{data:i})},E=function(i){return n.ZP.get("/ncnb/project/page",{params:{page:i.page,limit:i.limit,projectName:i.projectName,order:i.order}})},A=function(i){var t=cache.getItem(CONSTANT.PROJECT_ID);return request.post("/ncnb/project/save",{data:_objectSpread(_objectSpread({},i),{},{id:t})})}},51393:function(h,p,e){e.d(p,{B:function(){return r},LD:function(){return A},th:function(){return s},ty:function(){return T}});var m=e(39346),f=e.n(m),_=e(29612),n=e(68413),u=e(55074),r=function(t){return Object.assign(t,{type:1}),n.ZP.post("/ncnb/project/add",{data:t})},T=function(t){return Object.assign(t,{type:1}),n.ZP.post("/ncnb/project/update",{data:t})},s=function(t){return Object.assign(t,{type:1}),n.ZP.post("/ncnb/project/delete",{data:t})},E=function(t){return request.get("/ncnb/project/page",{params:{page:t.page,limit:t.limit,projectName:t.projectName,order:t.order,type:1}})},A=function(t){return n.ZP.get("/ncnb/project/recent",{params:{page:t.page,limit:t.limit,projectName:t.projectName,order:t.order,type:t.type}})},c=function(t){var d=cache.getItem(CONSTANT.PROJECT_ID);return request.post("/ncnb/project/save",{data:_objectSpread(_objectSpread({},t),{},{id:d})})}}}]);
