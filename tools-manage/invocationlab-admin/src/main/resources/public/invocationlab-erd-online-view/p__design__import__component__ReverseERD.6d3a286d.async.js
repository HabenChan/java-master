"use strict";(self.webpackChunkInvocationlab_ERD_Online=self.webpackChunkInvocationlab_ERD_Online||[]).push([[2683],{21844:function(L,y,o){o.d(y,{Z:function(){return _}});var P=o(14399),C=o(98404),B=o(85180),I=o(87530),A=o(44403),p=o(27726),T=o(70877),F=o(45005),Z=o(63228),$=o(37161);function d(l){return(0,$.ZP)("MuiSvgIcon",l)}const m=(0,Z.Z)("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var U=null,O=o(36422);const z=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],n=l=>{const{color:i,fontSize:t,classes:r}=l,s={root:["root",i!=="inherit"&&`color${(0,p.Z)(i)}`,`fontSize${(0,p.Z)(t)}`]};return(0,A.Z)(s,d,r)},e=(0,F.ZP)("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(l,i)=>{const{ownerState:t}=l;return[i.root,t.color!=="inherit"&&i[`color${(0,p.Z)(t.color)}`],i[`fontSize${(0,p.Z)(t.fontSize)}`]]}})(({theme:l,ownerState:i})=>{var t,r,s,a,D,c,h,u,E,v,M,R,g;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:i.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(t=l.transitions)==null||(r=t.create)==null?void 0:r.call(t,"fill",{duration:(s=l.transitions)==null||(s=s.duration)==null?void 0:s.shorter}),fontSize:{inherit:"inherit",small:((a=l.typography)==null||(D=a.pxToRem)==null?void 0:D.call(a,20))||"1.25rem",medium:((c=l.typography)==null||(h=c.pxToRem)==null?void 0:h.call(c,24))||"1.5rem",large:((u=l.typography)==null||(E=u.pxToRem)==null?void 0:E.call(u,35))||"2.1875rem"}[i.fontSize],color:(v=(M=(l.vars||l).palette)==null||(M=M[i.color])==null?void 0:M.main)!=null?v:{action:(R=(l.vars||l).palette)==null||(R=R.action)==null?void 0:R.active,disabled:(g=(l.vars||l).palette)==null||(g=g.action)==null?void 0:g.disabled,inherit:void 0}[i.color]}}),f=C.forwardRef(function(i,t){const r=(0,T.Z)({props:i,name:"MuiSvgIcon"}),{children:s,className:a,color:D="inherit",component:c="svg",fontSize:h="medium",htmlColor:u,inheritViewBox:E=!1,titleAccess:v,viewBox:M="0 0 24 24"}=r,R=(0,B.Z)(r,z),g=C.isValidElement(s)&&s.type==="svg",N=(0,P.Z)({},r,{color:D,component:c,fontSize:h,instanceFontSize:i.fontSize,inheritViewBox:E,viewBox:M,hasSvgAsChild:g}),W={};E||(W.viewBox=M);const K=n(N);return(0,O.jsxs)(e,(0,P.Z)({as:c,className:(0,I.Z)(K.root,a),focusable:"false",color:u,"aria-hidden":v?void 0:!0,role:v?"img":void 0,ref:t},W,R,g&&s.props,{ownerState:N,children:[g?s.props.children:s,v?(0,O.jsx)("title",{children:v}):null]}))});f.muiName="SvgIcon";var j=f;function x(l,i){function t(r,s){return(0,O.jsx)(j,(0,P.Z)({"data-testid":`${i}Icon`,ref:s},r,{children:l}))}return t.muiName=j.muiName,C.memo(C.forwardRef(t))}var _=x((0,O.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 16H5v-3h3.56c.69 1.19 1.97 2 3.45 2s2.75-.81 3.45-2H19zm0-5h-4.99c0 1.1-.9 2-2 2s-2-.9-2-2H5V5h14z"}),"InboxOutlined")},27726:function(L,y,o){var P=o(43702);y.Z=P.Z},31844:function(L,y,o){o.r(y),o.d(y,{importModuleAndProfile:function(){return U}});var P=o(39346),C=o.n(P),B=o(98404),I=o(21844),A=o(86916),p=o(23759),T=o(29167),F=o(1993),Z=o(77662),$=o(44766),d=o.n($),m=o(36422),U=function(n,e,f,j){var x,_,l,i,t,r,s,a,D=d().unionBy(n==null||(x=n.dataTypeDomains)===null||x===void 0?void 0:x.datatype,e==null||(_=e.dataTypeDomains)===null||_===void 0?void 0:_.datatype,"code"),c=d().unionBy(n==null||(l=n.dataTypeDomains)===null||l===void 0?void 0:l.database,e==null||(i=e.dataTypeDomains)===null||i===void 0?void 0:i.database,"code");d().merge(n==null?void 0:n.dataTypeDomains,e==null?void 0:e.dataTypeDomains),d().set(n==null?void 0:n.dataTypeDomains,"datatype",D),d().set(n==null?void 0:n.dataTypeDomains,"database",c);var h=d().unionBy(n==null||(t=n.profile)===null||t===void 0?void 0:t.defaultFields,e==null||(r=e.profile)===null||r===void 0?void 0:r.defaultFields,"name"),u=d().unionBy(n==null||(s=n.profile)===null||s===void 0?void 0:s.dbs,e==null||(a=e.profile)===null||a===void 0?void 0:a.dbs,"name");if(d().merge(n==null?void 0:n.profile,e==null?void 0:e.profile),d().set(n==null?void 0:n.profile,"defaultFields",h),d().set(n==null?void 0:n.profile,"dbs",u),f){var E,v;f=j.fixModules(f,n==null||(E=n.dataTypeDomains)===null||E===void 0?void 0:E.datatype,n==null||(v=n.dataTypeDomains)===null||v===void 0?void 0:v.database)}return j.setProjectJson({modules:(n.modules||[]).concat(f),dataTypeDomains:n==null?void 0:n.dataTypeDomains,profile:n==null?void 0:n.profile}),f},O=function(n){var e=(0,F.ZP)(function(_){return{projectDispatch:_.dispatch,projectJSON:_.project.projectJSON||{}}},Z.Z),f=e.projectDispatch,j=e.projectJSON,x={multiple:!1,maxCount:1,beforeUpload:function(l){var i=l.type==="application/json";if(!i)return p.ZP.error("\u8BF7\u786E\u8BA4\u4E0A\u4F20\u6587\u4EF6\u662FERD\u5BFC\u51FA\u7684\u6807\u51C6json\u6587\u4EF6!"),!1;var t=new FileReader;return t.readAsText(l),t.onload=function(){var r;try{r=f.decrypt("AES",t.result.toString())}catch(u){return p.ZP.error("ERD\u6587\u4EF6\u89E3\u5BC6\u5931\u8D25\uFF01"),!1}var s=JSON.parse(r),a=s.modules;if(!a||!(a instanceof Array))return p.ZP.error("\u60A8\u5BFC\u5165\u7684\u662F\u975E\u6CD5\u7684ERD\u6587\u4EF6!"),!1;if(a.length<=0)return p.ZP.warning("\u60A8\u5C1A\u672A\u5728ERD\u65B0\u5EFA\u6A21\u5757\uFF0C\u65E0\u9700\u5BFC\u5165\uFF0C\u53EF\u76F4\u63A5\u5728\u672C\u7CFB\u7EDF\u65B0\u5EFA\u6A21\u5757!"),!1;var D=j,c=[],h=[];return a.forEach(function(u){var E=(D.modules||[]).some(function(v){return u.name===v.name});E?c.push("["+u.name+"]\u5DF2\u7ECF\u5728\u672C\u7CFB\u7EDF\u4E2D\u5B58\u5728\uFF0C\u5DF2\u8DF3\u8FC7\u5BFC\u5165"):h.push(u)}),h=U(D,s,h,f),c!=""?T.Z.warning({title:"\u91CD\u8981\u63D0\u793A",content:(0,m.jsx)(m.Fragment,{children:c.map(function(u){return(0,m.jsx)("p",{children:u})})}),okText:null,cancelText:null}):p.ZP.success("ERD\u6587\u4EF6\u5BFC\u5165\u6210\u529F\uFF01"),!0},!0}};return(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)(A.Z,C()(C()({},x),{},{children:[(0,m.jsx)("p",{className:"ant-upload-drag-icon",children:(0,m.jsx)(I.Z,{})}),(0,m.jsx)("p",{className:"ant-upload-text",children:"\u70B9\u51FB\u6216\u8005\u62D6\u62FDERD\u5BFC\u51FA\u7684\u52A0\u5BC6txt\u6587\u4EF6\u5230\u6B64\u533A\u57DF\u4EE5\u4E0A\u4F20"}),(0,m.jsx)("p",{className:"ant-upload-hint",children:"\u4E0A\u4F20\u5B8C\u6BD5\u540E\uFF0C\u7CFB\u7EDF\u4F1A\u81EA\u52A8\u5F00\u59CB\u89E3\u6790\uFF1B\u6BCF\u6B21\u4EC5\u652F\u6301\u89E3\u6790\u4E00\u4E2AERD\u6587\u4EF6\u3002"})]}))})};y.default=B.memo(O)}}]);
