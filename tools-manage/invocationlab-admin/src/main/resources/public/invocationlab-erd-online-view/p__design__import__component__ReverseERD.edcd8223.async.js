"use strict";(self.webpackChunkInvocationlab_ERD_Online=self.webpackChunkInvocationlab_ERD_Online||[]).push([[2683],{44474:function(W,y,n){n.d(y,{Z:function(){return D}});var g=n(87006),C=n(98404),T=n(28661),A=n(54640),F=n(70241),m=n(11230),$=n(10673),Z=n(56228),z=n(78933),U=n(369);function d(l){return(0,U.Z)("MuiSvgIcon",l)}const p=(0,z.Z)("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var L=null,M=n(36422);const N=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],o=l=>{const{color:t,fontSize:e,classes:s}=l,a={root:["root",t!=="inherit"&&`color${(0,m.Z)(t)}`,`fontSize${(0,m.Z)(e)}`]};return(0,F.Z)(a,d,s)},i=(0,Z.ZP)("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(l,t)=>{const{ownerState:e}=l;return[t.root,e.color!=="inherit"&&t[`color${(0,m.Z)(e.color)}`],t[`fontSize${(0,m.Z)(e.fontSize)}`]]}})(({theme:l,ownerState:t})=>{var e,s,a,r,h,_,E,v,c,u,O,I,R,x,B,K,b;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:(e=l.transitions)==null||(s=e.create)==null?void 0:s.call(e,"fill",{duration:(a=l.transitions)==null||(r=a.duration)==null?void 0:r.shorter}),fontSize:{inherit:"inherit",small:((h=l.typography)==null||(_=h.pxToRem)==null?void 0:_.call(h,20))||"1.25rem",medium:((E=l.typography)==null||(v=E.pxToRem)==null?void 0:v.call(E,24))||"1.5rem",large:((c=l.typography)==null||(u=c.pxToRem)==null?void 0:u.call(c,35))||"2.1875rem"}[t.fontSize],color:(O=(I=(l.vars||l).palette)==null||(R=I[t.color])==null?void 0:R.main)!=null?O:{action:(x=(l.vars||l).palette)==null||(B=x.action)==null?void 0:B.active,disabled:(K=(l.vars||l).palette)==null||(b=K.action)==null?void 0:b.disabled,inherit:void 0}[t.color]}}),f=C.forwardRef(function(t,e){const s=(0,$.Z)({props:t,name:"MuiSvgIcon"}),{children:a,className:r,color:h="inherit",component:_="svg",fontSize:E="medium",htmlColor:v,inheritViewBox:c=!1,titleAccess:u,viewBox:O="0 0 24 24"}=s,I=(0,T.Z)(s,N),R=(0,g.Z)({},s,{color:h,component:_,fontSize:E,instanceFontSize:t.fontSize,inheritViewBox:c,viewBox:O}),x={};c||(x.viewBox=O);const B=o(R);return(0,M.jsxs)(i,(0,g.Z)({as:_,className:(0,A.Z)(B.root,r),focusable:"false",color:v,"aria-hidden":u?void 0:!0,role:u?"img":void 0,ref:e},x,I,{ownerState:R,children:[a,u?(0,M.jsx)("title",{children:u}):null]}))});f.muiName="SvgIcon";var P=f;function j(l,t){function e(s,a){return(0,M.jsx)(P,(0,g.Z)({"data-testid":`${t}Icon`,ref:a},s,{children:l}))}return e.muiName=P.muiName,C.memo(C.forwardRef(e))}var D=j((0,M.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5v-3h3.56c.69 1.19 1.97 2 3.45 2s2.75-.81 3.45-2H19v3zm0-5h-4.99c0 1.1-.9 2-2 2s-2-.9-2-2H5V5h14v9z"}),"InboxOutlined")},11230:function(W,y,n){var g=n(34676);y.Z=g.Z},87963:function(W,y,n){n.r(y),n.d(y,{importModuleAndProfile:function(){return L}});var g=n(91484),C=n.n(g),T=n(98404),A=n(44474),F=n(35397),m=n(5049),$=n(28307),Z=n(75687),z=n(77662),U=n(44766),d=n.n(U),p=n(36422),L=function(o,i,f,P){var j,D,l,t,e,s,a,r,h=d().unionBy(o==null||(j=o.dataTypeDomains)===null||j===void 0?void 0:j.datatype,i==null||(D=i.dataTypeDomains)===null||D===void 0?void 0:D.datatype,"code"),_=d().unionBy(o==null||(l=o.dataTypeDomains)===null||l===void 0?void 0:l.database,i==null||(t=i.dataTypeDomains)===null||t===void 0?void 0:t.database,"code");d().merge(o==null?void 0:o.dataTypeDomains,i==null?void 0:i.dataTypeDomains),d().set(o==null?void 0:o.dataTypeDomains,"datatype",h),d().set(o==null?void 0:o.dataTypeDomains,"database",_);var E=d().unionBy(o==null||(e=o.profile)===null||e===void 0?void 0:e.defaultFields,i==null||(s=i.profile)===null||s===void 0?void 0:s.defaultFields,"name"),v=d().unionBy(o==null||(a=o.profile)===null||a===void 0?void 0:a.dbs,i==null||(r=i.profile)===null||r===void 0?void 0:r.dbs,"name");if(d().merge(o==null?void 0:o.profile,i==null?void 0:i.profile),d().set(o==null?void 0:o.profile,"defaultFields",E),d().set(o==null?void 0:o.profile,"dbs",v),f){var c,u;f=P.fixModules(f,o==null||(c=o.dataTypeDomains)===null||c===void 0?void 0:c.datatype,o==null||(u=o.dataTypeDomains)===null||u===void 0?void 0:u.database)}return P.setProjectJson({modules:(o.modules||[]).concat(f),dataTypeDomains:o==null?void 0:o.dataTypeDomains,profile:o==null?void 0:o.profile}),f},M=function(o){var i=(0,Z.ZP)(function(D){return{projectDispatch:D.dispatch,projectJSON:D.project.projectJSON||{}}},z.Z),f=i.projectDispatch,P=i.projectJSON,j={multiple:!1,maxCount:1,beforeUpload:function(l){var t=l.type==="application/json";if(!t)return m.ZP.error("\u8BF7\u786E\u8BA4\u4E0A\u4F20\u6587\u4EF6\u662FERD\u5BFC\u51FA\u7684\u6807\u51C6json\u6587\u4EF6!"),!1;var e=new FileReader;return e.readAsText(l),e.onload=function(){var s;try{s=f.decrypt("AES",e.result.toString())}catch(v){return m.ZP.error("ERD\u6587\u4EF6\u89E3\u5BC6\u5931\u8D25\uFF01"),!1}var a=JSON.parse(s),r=a.modules;if(!r||!(r instanceof Array))return m.ZP.error("\u60A8\u5BFC\u5165\u7684\u662F\u975E\u6CD5\u7684ERD\u6587\u4EF6!"),!1;if(r.length<=0)return m.ZP.warning("\u60A8\u5C1A\u672A\u5728ERD\u65B0\u5EFA\u6A21\u5757\uFF0C\u65E0\u9700\u5BFC\u5165\uFF0C\u53EF\u76F4\u63A5\u5728\u672C\u7CFB\u7EDF\u65B0\u5EFA\u6A21\u5757!"),!1;var h=P,_=[],E=[];return r.forEach(function(v){var c=(h.modules||[]).some(function(u){return v.name===u.name});c?_.push("["+v.name+"]\u5DF2\u7ECF\u5728\u672C\u7CFB\u7EDF\u4E2D\u5B58\u5728\uFF0C\u5DF2\u8DF3\u8FC7\u5BFC\u5165"):E.push(v)}),E=L(h,a,E,f),_!=""?$.Z.warning({title:"\u91CD\u8981\u63D0\u793A",content:(0,p.jsx)(p.Fragment,{children:_.map(function(v){return(0,p.jsx)("p",{children:v})})}),okText:null,cancelText:null}):m.ZP.success("ERD\u6587\u4EF6\u5BFC\u5165\u6210\u529F\uFF01"),!0},!0}};return(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)(F.Z,C()(C()({},j),{},{children:[(0,p.jsx)("p",{className:"ant-upload-drag-icon",children:(0,p.jsx)(A.Z,{})}),(0,p.jsx)("p",{className:"ant-upload-text",children:"\u70B9\u51FB\u6216\u8005\u62D6\u62FDERD\u5BFC\u51FA\u7684json\u6587\u4EF6\u5230\u6B64\u533A\u57DF\u4EE5\u4E0A\u4F20"}),(0,p.jsx)("p",{className:"ant-upload-hint",children:"\u4E0A\u4F20\u5B8C\u6BD5\u540E\uFF0C\u7CFB\u7EDF\u4F1A\u81EA\u52A8\u5F00\u59CB\u89E3\u6790\uFF1B\u6BCF\u6B21\u4EC5\u652F\u6301\u89E3\u6790\u4E00\u4E2AERD\u6587\u4EF6\u3002"})]}))})};y.default=T.memo(M)}}]);
