"use strict";(self.webpackChunkInvocationlab_ERD_Online=self.webpackChunkInvocationlab_ERD_Online||[]).push([[8588],{22685:function(ge,ne,t){t.d(ne,{I:function(){return ae}});var le=t(98404),p=t(36422),ae=function(i){var C=i.prefixCount,J=C===void 0?10:C,V=i.suffixCount,X=V===void 0?4:V,Y=i.children,f=i.title,F=i.style,R=Y.length;if(R<=J)return(0,p.jsx)("span",{title:f,style:F,children:Y});var E=R-J;if(E<=3)return(0,p.jsx)("span",{title:f,style:F,children:Y});E<X&&(X=E);var T=Y.slice(0,J).trim(),Z=Y.slice(-X).trim();return(0,p.jsxs)("span",{title:f,style:F,children:[T,"...",Z]})}},47604:function(ge,ne,t){var le=t(98404),p=t(27085),ae=t(19688),x=t(36422),i=function(J){return(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(p.ZP,{theme:{token:{colorPrimary:"#DE2910"}},children:(0,x.jsx)(ae.Outlet,{})})})};ne.Z=le.memo(i)},58588:function(ge,ne,t){t.r(ne),t.d(ne,{default:function(){return On},fixRouteAccess:function(){return Xe},getNowTimeParse:function(){return Mn},headRightContent:function(){return Bn},siderWidth:function(){return We}});var le=t(9116),p=t.n(le),ae=t(91484),x=t.n(ae),i=t(98404),C=t(75687),J=t(54936),V=t(84791),X=t(63499),Y=t(87236),f=t(36564),F=t(29683),R=t(15726),E=t(13020),T=t(55694),Z=t(63103),G=t(7270),ye=t(34042),Ee=t(39650),e=t(36422),se={route:{routes:[{path:"/design/table/model",name:"\u6A21\u578B",icon:(0,e.jsx)(J.Z,{theme:"filled",size:"18",fill:"#DE2910",strokeWidth:2}),routes:[{path:"https://www.zerocode.net.cn/",name:"ERD Online \u8BBA\u575B",icon:(0,e.jsx)(V.Z,{theme:"filled",size:"18",fill:"#DE2910",strokeWidth:2})}]},{name:"\u5BFC\u5165",icon:(0,e.jsx)(X.Z,{theme:"filled",size:"18",fill:"#DE2910",strokeWidth:2}),path:"/design/table/import",access:"canErdTableImport",routes:[{path:"/design/table/import/pdman",name:"\u89E3\u6790PdMan\u6587\u4EF6",icon:(0,e.jsx)(Y.Z,{theme:"filled",size:"18",fill:"#DE2910",strokeWidth:2}),access:"canErdTableImportPdman"},{path:"/design/table/import/erd",name:"\u89E3\u6790ERD\u6587\u4EF6",icon:(0,e.jsx)(f.Z,{theme:"filled",size:"18",fill:"#DE2910",strokeWidth:2}),access:"canErdTableImportErd"}]},{name:"\u5BFC\u51FA",icon:(0,e.jsx)(F.Z,{theme:"filled",size:"18",fill:"#DE2910",strokeWidth:2}),path:"/design/table/export",access:"canErdTableExport",routes:[{path:"/design/table/export/common",name:"\u666E\u901A\u5BFC\u51FA",icon:(0,e.jsx)(R.Z,{theme:"filled",size:"18",fill:"#DE2910",strokeWidth:2}),access:"canErdTableExportCommon"},{path:"/design/table/export/more",name:"\u9AD8\u7EA7\u5BFC\u51FA",icon:(0,e.jsx)(E.Z,{theme:"filled",size:"18",fill:"#DE2910",strokeWidth:2}),access:"canErdTableExportMore"}]},{name:"\u8BBE\u7F6E",icon:(0,e.jsx)(T.Z,{theme:"filled",size:"15",fill:"#DE2910",strokeWidth:2}),path:"/design/table/setting",access:"canErdTableSetting",routes:[{path:"/design/table/setting/db",name:"\u6570\u636E\u6E90\u8BBE\u7F6E",icon:(0,e.jsx)(Z.Z,{theme:"filled",size:"18",fill:"#DE2910",strokeWidth:2}),access:"canErdTableSettingDb"},{path:"/design/table/setting/defaultField",name:"\u9ED8\u8BA4\u5B57\u6BB5\u8BBE\u7F6E",icon:(0,e.jsx)(G.Z,{theme:"filled",size:"18",fill:"#DE2910",strokeWidth:2}),access:"canErdTableSettingDefaultfield"},{path:"/design/table/setting/default",name:"\u7CFB\u7EDF\u9ED8\u8BA4\u9879\u8BBE\u7F6E",icon:(0,e.jsx)(ye.Z,{theme:"filled",size:"18",fill:"#DE2910",strokeWidth:2}),access:"canErdTableSettingDefault"}]},{path:"/design/table/query",name:"\u67E5\u8BE2",icon:(0,e.jsx)(Ee.Z,{theme:"filled",size:"18",fill:"#DE2910",strokeWidth:2}),routes:[{path:"https://www.zerocode.net.cn/",name:"ERD Online \u8BBA\u575B",icon:(0,e.jsx)(V.Z,{theme:"filled",size:"18",fill:"#DE2910",strokeWidth:2})}]}]},location:{pathname:"/"},appList:[{icon:"/invocationlab-erd-online-view/logo.svg",title:"ERD Online",desc:"\u56FD\u5185\u7B2C\u4E00\u4E2A\u5F00\u6E90\u514D\u8D39\u5728\u7EBF\u5EFA\u6A21\u8F6F\u4EF6",url:"https://portal.zerocode.net.cn/",target:"_blank"},{icon:"/zerocode.svg",title:"\u96F6\u4EE3",desc:"\u56FD\u5185\u7B2C\u4E00\u4E2A\u96F6\u4EE3\u7801\u793E\u533A",url:"https://www.zerocode.net.cn/",target:"_blank"},{icon:"/invocationlab-erd-online-view/loco.svg",title:"LOCO",desc:"\u7C7B\u9489\u9489\u5B9C\u642D\u7684\u4F4E\u4EE3\u7801\u642D\u5EFA\u5E73\u53F0",url:"https://loco.zerocode.net.cn/",target:"_blank"},{icon:"/zerocode.svg",title:"Fast Test",desc:"\u63A5\u53E3\u5FEB\u901F\u6D4B\u8BD5\u5E73\u53F0",url:"https://www.zerocode.net.cn/",target:"_blank"},{icon:"/zerocode.svg",title:"Super BI",desc:"\u8D85\u7EA7\u62A5\u8868\u3001BI\u5F15\u64CE",url:"https://www.zerocode.net.cn/",target:"_blank"}]},K=t(66656),v=t(77662),k=t(14515),re=t(97833),o=t.n(re),he=t(42196),te=t.n(he),q=t(34137),_=t(67026),U=t(47174),O=t(26774),pe=t(51270),_e=function(n){var r=(0,C.ZP)(function(m){return{projectDispatch:m.dispatch,currentModuleIndex:m.currentModuleIndex||-1}},v.Z),u=r.projectDispatch,a=r.currentModuleIndex,c={title:"",fields:u.getDefaultFields()||[],indexs:[],headers:[],chnname:""};return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(q.Y,{title:"\u65B0\u5EFA\u8868",trigger:(0,e.jsx)(O.ZP,{icon:(0,e.jsx)(pe.Z,{}),type:"text",size:"small",disabled:n.moduleDisable,children:"\u65B0\u5EFA\u8868"}),onFinish:function(){var m=te()(o()().mark(function g(h){return o()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,u.addEntity(x()(x()({},c),{},{title:h.title,chnname:h.chnname}));case 2:return B.abrupt("return",!0);case 3:case"end":return B.stop()}},g)}));return function(g){return m.apply(this,arguments)}}(),children:(0,e.jsxs)(_.A.Group,{children:[(0,e.jsx)(U.Z,{width:"md",name:"title",label:"\u8868\u540D\u300C\u82F1\u6587\u540D\u300D",placeholder:"\u8BF7\u8F93\u5165\u8868\u540D",formItemProps:{rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"},{max:100,message:"\u4E0D\u80FD\u5927\u4E8E 100 \u4E2A\u5B57\u7B26"}]}}),(0,e.jsx)(U.Z,{width:"md",name:"chnname",label:"\u4E2D\u6587\u540D\u79F0",placeholder:"\u8BF7\u8F93\u5165\u4E2D\u6587\u540D\u79F0",formItemProps:{rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"},{max:100,message:"\u4E0D\u80FD\u5927\u4E8E 100 \u4E2A\u5B57\u7B26"}]}})]})})})},we=i.memo(_e),Pe=t(52753),qe=function(n){var r=(0,C.ZP)(function(a){return{projectDispatch:a.dispatch}},v.Z),u=r.projectDispatch;return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(q.Y,{title:"\u91CD\u547D\u540D\u8868",trigger:(0,e.jsx)(O.ZP,{icon:(0,e.jsx)(Pe.Z,{}),type:"text",size:"small",disabled:n.moduleDisable,children:"\u91CD\u547D\u540D\u8868"}),onFinish:function(){var a=te()(o()().mark(function c(m){return o()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,u.renameEntity({title:m.title,chnname:m.chnname});case 2:return h.abrupt("return",!0);case 3:case"end":return h.stop()}},c)}));return function(c){return a.apply(this,arguments)}}(),initialValues:n.renameInfo,children:(0,e.jsxs)(_.A.Group,{children:[(0,e.jsx)(U.Z,{width:"md",name:"title",label:"\u8868\u540D\u300C\u82F1\u6587\u540D\u300D",placeholder:"\u8BF7\u8F93\u5165\u8868\u540D",formItemProps:{rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"},{max:100,message:"\u4E0D\u80FD\u5927\u4E8E 100 \u4E2A\u5B57\u7B26"}]}}),(0,e.jsx)(U.Z,{width:"md",name:"chnname",label:"\u4E2D\u6587\u540D\u79F0",placeholder:"\u8BF7\u8F93\u5165\u4E2D\u6587\u540D\u79F0",formItemProps:{rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"},{max:100,message:"\u4E0D\u80FD\u5927\u4E8E 100 \u4E2A\u5B57\u7B26"}]}})]})})})},et=i.memo(qe),fe=t(23749),be=t(18421),tt=function(n){var r=(0,C.ZP)(function(a){return{projectDispatch:a.dispatch}},v.Z),u=r.projectDispatch;return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(fe.Z,{placement:"right",title:"\u5220\u9664\u8868",onConfirm:function(){return u.removeEntity()},okText:"\u662F",cancelText:"\u5426",children:(0,e.jsx)(O.ZP,{icon:(0,e.jsx)(be.Z,{}),type:"text",size:"small",disabled:n.disable,children:"\u5220\u9664\u8868"})})})},nt=i.memo(tt),at=function(n){var r=(0,C.ZP)(function(a){return a.dispatch}),u={name:"",chnname:"",entities:[],graphCanvas:{nodes:[],edges:[]},associations:[]};return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(q.Y,{title:"\u65B0\u589E\u6A21\u5757",trigger:n.trigger==="bp"?(0,e.jsx)(O.ZP,{icon:(0,e.jsx)(pe.Z,{}),type:"text",size:"small",disabled:n.moduleDisable,children:"\u65B0\u589E\u6A21\u5757"}):(0,e.jsx)(O.ZP,{type:"primary",children:"\u65B0\u589E\u6A21\u5757"}),onFinish:function(){var a=te()(o()().mark(function c(m){return o()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,r.addModule(x()(x()({},u),{},{name:m.name,chnname:m.chnname}));case 2:return h.abrupt("return",!0);case 3:case"end":return h.stop()}},c)}));return function(c){return a.apply(this,arguments)}}(),children:(0,e.jsxs)(_.A.Group,{children:[(0,e.jsx)(U.Z,{width:"md",name:"name",label:"\u6A21\u5757\u540D\u300C\u82F1\u6587\u540D\u300D",placeholder:"\u8BF7\u8F93\u5165\u6A21\u5757\u540D",formItemProps:{rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"},{max:100,message:"\u4E0D\u80FD\u5927\u4E8E 100 \u4E2A\u5B57\u7B26"}]}}),(0,e.jsx)(U.Z,{width:"md",name:"chnname",label:"\u4E2D\u6587\u540D\u79F0",placeholder:"\u8BF7\u8F93\u5165\u4E2D\u6587\u540D\u79F0",formItemProps:{rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"},{max:100,message:"\u4E0D\u80FD\u5927\u4E8E 100 \u4E2A\u5B57\u7B26"}]}})]})})})},Qe=i.memo(at),rt=function(n){var r=(0,C.ZP)(function(u){return u.dispatch});return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(q.Y,{title:"\u91CD\u547D\u540D\u6A21\u5757",trigger:(0,e.jsx)(O.ZP,{icon:(0,e.jsx)(Pe.Z,{}),type:"text",size:"small",disabled:n.moduleDisable,children:"\u91CD\u547D\u540D\u6A21\u5757"}),onFinish:function(){var u=te()(o()().mark(function a(c){return o()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,r.renameModule({name:c.name,chnname:c.chnname});case 2:return g.abrupt("return",!0);case 3:case"end":return g.stop()}},a)}));return function(a){return u.apply(this,arguments)}}(),initialValues:n.renameInfo,children:(0,e.jsxs)(_.A.Group,{children:[(0,e.jsx)(U.Z,{width:"md",name:"name",label:"\u6A21\u5757\u540D\u300C\u82F1\u6587\u540D\u300D",placeholder:"\u8BF7\u8F93\u5165\u8868\u540D",formItemProps:{rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"},{max:100,message:"\u4E0D\u80FD\u5927\u4E8E 100 \u4E2A\u5B57\u7B26"}]}}),(0,e.jsx)(U.Z,{width:"md",name:"chnname",label:"\u4E2D\u6587\u540D\u79F0",placeholder:"\u8BF7\u8F93\u5165\u4E2D\u6587\u540D\u79F0",formItemProps:{rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"},{max:100,message:"\u4E0D\u80FD\u5927\u4E8E 100 \u4E2A\u5B57\u7B26"}]}})]})})})},ut=i.memo(rt),it=function(n){var r=(0,C.ZP)(function(a){return{projectDispatch:a.dispatch}},v.Z),u=r.projectDispatch;return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(fe.Z,{placement:"right",title:"\u5220\u9664\u6A21\u5757",onConfirm:function(){return u.removeModule()},okText:"\u662F",cancelText:"\u5426",children:(0,e.jsx)(O.ZP,{icon:(0,e.jsx)(be.Z,{}),type:"text",size:"small",disabled:n.disable,children:"\u5220\u9664\u6A21\u5757"})})})},lt=i.memo(it),st=function(n){var r=(0,C.ZP)(function(a){return{projectDispatch:a.dispatch}},v.Z),u=r.projectDispatch;return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(fe.Z,{placement:"right",title:"\u6B64\u64CD\u4F5C\u5C06\u4F1A\u91CD\u65B0\u4ECEdb\u8BFB\u53D6\u8868\u5143\u6570\u636E\u6784\u5EFA\u5F53\u524D\u6A21\u5757\u6A21\u578B",onConfirm:function(){return u.refreshModule(n.moduleInfo).then(function(c){u.updateModule(c.data)})},okText:"\u6211\u5DF2\u77E5\u6089,\u786E\u5B9A",cancelText:"\u53D6\u6D88",children:(0,e.jsx)(O.ZP,{icon:(0,e.jsx)(Pe.Z,{}),type:"text",size:"small",disabled:n.disable,children:"\u5237\u65B0\u6A21\u5757\u6A21\u578B"})})})},ot=i.memo(st),Ke=t(40004),ct=t(88836),L=t(3534),Ie=t(40905),Ce=t(61339),Ue=t(6176),dt=t(35476),Ve=t(42805),mt=t(46332),ht=t(86842),pt=t(14085),Re=t(33100),ft=function(n){var r=(0,C.ZP)(function(a){return{projectDispatch:a.dispatch}},v.Z),u=r.projectDispatch;return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(O.ZP,{icon:(0,e.jsx)(Re.Z,{}),type:"text",size:"small",onClick:function(){return u.copyModule(n.moduleInfo)},disabled:n.disable,children:"\u590D\u5236\u6A21\u5757"})})},vt=i.memo(ft),Be=t(73534),xt=function(n){var r=(0,C.ZP)(function(a){return{projectDispatch:a.dispatch}},v.Z),u=r.projectDispatch;return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(O.ZP,{icon:(0,e.jsx)(Be.Z,{}),type:"text",size:"small",onClick:function(){return u.cutModule(n.moduleInfo)},disabled:n.disable,children:"\u526A\u5207\u6A21\u5757"})})},jt=i.memo(xt),Me=t(27016),Dt=function(n){var r=(0,C.ZP)(function(a){return{projectDispatch:a.dispatch}},v.Z),u=r.projectDispatch;return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(O.ZP,{icon:(0,e.jsx)(Me.Z,{}),type:"text",size:"small",onClick:function(){return u.pastModule()},disabled:n.disable,children:"\u7C98\u8D34\u6A21\u5757"})})},gt=i.memo(Dt),yt=function(n){var r=(0,C.ZP)(function(a){return{projectDispatch:a.dispatch}},v.Z),u=r.projectDispatch;return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(O.ZP,{icon:(0,e.jsx)(Re.Z,{}),type:"text",size:"small",onClick:function(){return u.copyEntity(n.entityInfo)},disabled:n.disable,children:"\u590D\u5236\u8868"})})},Et=i.memo(yt),bt=function(n){var r=(0,C.ZP)(function(a){return{projectDispatch:a.dispatch}},v.Z),u=r.projectDispatch;return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(O.ZP,{icon:(0,e.jsx)(Be.Z,{}),type:"text",size:"small",onClick:function(){return u.cutEntity(n.entityInfo)},disabled:n.disable,children:"\u526A\u5207\u8868"})})},Tt=i.memo(bt),Zt=function(n){var r=(0,C.ZP)(function(a){return{projectDispatch:a.dispatch}},v.Z),u=r.projectDispatch;return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(O.ZP,{icon:(0,e.jsx)(Me.Z,{}),type:"text",size:"small",onClick:function(){return u.pastEntity()},disabled:n.disable,children:"\u7C98\u8D34\u8868"})})},Pt=i.memo(Zt),Ct=(0,ct.Z)(function(d){var n,r;return{root:{"&:hover > $content":{backgroundColor:(n=d.palette)===null||n===void 0||(r=n.action)===null||r===void 0?void 0:r.hover},"&:focus > $content, &$selected > $content":{color:"var(--tree-view-color)"},"&:focus > $content $label, &:hover > $content $label, &$selected > $content $label":{backgroundColor:"transparent"}},content:{"$expanded > &":{}},group:{marginLeft:"5px","& $content":{paddingLeft:"10px"}},expanded:{},selected:{},label:{fontWeight:"inherit",color:"inherit"},labelRoot:{display:"flex",flex:"auto",width:"100%",alignItems:"center",padding:"2px"},labelIcon:{marginRight:"5px",marginLeft:"5px"},labelText:{width:"180px",fontWeight:"inherit",flexGrow:1,display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",textAlign:"left"}}}),Ft=function(n){return(0,e.jsxs)(L.Z,{mode:"inline",children:[(0,e.jsx)(L.Z.Item,{children:(0,e.jsx)(we,{moduleDisable:!1})}),(0,e.jsx)(L.Z.Item,{children:(0,e.jsx)(et,{moduleDisable:!1,renameInfo:n})}),(0,e.jsx)(L.Z.Item,{children:(0,e.jsx)(nt,{disable:!1})}),(0,e.jsx)(L.Z.Item,{children:(0,e.jsx)(Et,{disable:!1,entityInfo:n})}),(0,e.jsx)(L.Z.Item,{children:(0,e.jsx)(Tt,{disable:!1,entityInfo:n})}),(0,e.jsx)(L.Z.Item,{children:(0,e.jsx)(Pt,{disable:!1})})]})},St=function(n){return(0,e.jsxs)(L.Z,{mode:"inline",children:[(0,e.jsx)(L.Z.Item,{children:(0,e.jsx)(Qe,{moduleDisable:!1,trigger:"bp"})}),(0,e.jsx)(L.Z.Item,{children:(0,e.jsx)(ut,{moduleDisable:!1,renameInfo:n})}),(0,e.jsx)(L.Z.Item,{children:(0,e.jsx)(lt,{disable:!1})}),(0,e.jsx)(L.Z.Item,{children:(0,e.jsx)(vt,{disable:!1,moduleInfo:n})}),(0,e.jsx)(L.Z.Item,{children:(0,e.jsx)(jt,{disable:!1,moduleInfo:n})}),(0,e.jsx)(L.Z.Item,{children:(0,e.jsx)(gt,{disable:!1})}),(0,e.jsx)(L.Z.Item,{children:(0,e.jsx)(ot,{disable:!1,moduleInfo:n})}),(0,e.jsx)(L.Z.Item,{children:(0,e.jsx)(we,{moduleDisable:!1})})]})},It=function(n){var r=(0,C.ZP)(function(Q){var s,D;return{modules:(s=Q.project)===null||s===void 0||(D=s.projectJSON)===null||D===void 0?void 0:D.modules,projectDispatch:Q.dispatch}},v.Z),u=r.modules,a=r.projectDispatch,c=(0,k.ZP)(function(Q){return{tableTabs:Q.tableTabs,tabDispatch:Q.dispatch}}),m=c.tabDispatch,g=(0,Ve.Z)(function(Q){return{searchKey:Q.searchKey,globalDispatch:Q.dispatch}},v.Z),h=g.searchKey,M=(0,dt.Z)(function(Q){return{shortcutDispatch:Q.dispatch}}),B=M.shortcutDispatch,$=(0,i.useState)(!0),l=p()($,2),z=l[0],A=l[1],j=(0,i.useState)([]),b=p()(j,2),W=b[0],S=b[1],I=(0,C.ZP)(),y=I.loadingProjectDetail;(0,i.useEffect)(function(){S(a.getExpandedKeys(h||""))},[h]);var P=function(s){S(s),A(!1)},w=Ct(),ee=function(s,D){a.setCurrentModule(s),a.setCurrentEntity(D)},ue=function(){var s=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,D=200;return s-D};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(K.Z,{tip:"\u62FC\u547D\u52A0\u8F7D\u4E2D",size:"large",style:{top:"18%",position:"fixed",transform:"scale(1.6)"},spinning:y,children:(0,e.jsx)("div",{})}),u&&u.length>0?(0,e.jsx)(Ie.Z,{showIcon:!1,height:ue(),onExpand:function(s){return P(s)},expandedKeys:W,autoExpandParent:z,treeData:a.getModuleEntityTree(h||""),blockNode:!0,className:w.label,rootStyle:{textAlign:"left"},onClick:function(s,D){D.type==="module"?a.setCurrentModule(D.module):D.type==="entity"?(m.addTab({group:k.v0.MODEL,module:D.module,entity:D.title}),ee(D.module,D.title)):D.type==="relation"&&(B.setShow(!1),m.addTab({group:k.v0.MODEL,module:D.module,entity:"\u5173\u7CFB\u56FE-".concat(D.module)}),ee(D.module,D.title))},titleRender:function(s){var D=s.type,H=s.module,de=s.title;return(0,e.jsx)(Ce.Z,{trigger:["contextMenu"],overlay:s.type==="module"?St({name:s.name,chnname:s.chnname}):s.type==="entity"?Ft({title:s.title,chnname:s.chnname}):(0,e.jsx)(e.Fragment,{}),onOpenChange:function(me){s.type==="module"?a.setCurrentModule(s.module):(s.type==="entity"||s.type==="relation")&&(a.setCurrentModule(s.module),ee(s.module,s.title))},children:(0,e.jsxs)("div",{className:w.labelRoot,onDragStart:function(me){me.stopPropagation();var Se="";D==="module"?Se="module&".concat(H):D==="entity"?Se="entity&".concat(H,"&").concat(de):D==="relation"&&(Se="map&".concat(H,"/\u5173\u7CFB\u56FE")),me.dataTransfer.setData("Text",Se)},draggable:"true",children:[(0,e.jsx)("div",{style:{marginRight:"6px"},title:s.formatName,children:s.type==="module"?(0,e.jsx)(mt.Z,{theme:"filled",size:"12",fill:"#DE2910",strokeWidth:2}):s.type==="relation"?(0,e.jsx)(ht.Z,{theme:"filled",size:"12",fill:"#DE2910",strokeWidth:2,strokeLinejoin:"miter"}):(0,e.jsx)(pt.Z,{theme:"filled",size:"12",fill:"#DE2910",strokeWidth:2})}),(0,e.jsx)(Ke.Z,{variant:"body2",className:w.labelText,title:s.formatName,children:s.formatName}),(0,e.jsx)(Ke.Z,{variant:"caption",color:"inherit",children:s.type!=="relation"?s.length:null})]})})}}):(0,e.jsx)(Ue.Z,{image:"/invocationlab-erd-online-view/empty.svg",imageStyle:{height:60},description:(0,e.jsx)("span",{children:"\u6682\u65E0\u6570\u636E"}),children:(0,e.jsx)(Qe,{moduleDisable:!1,trigger:"ant"})})]})},Rt=i.memo(It),Bt=t(99439),ve=t.n(Bt),xe=t(29898),Mt=t(44766),ie=t.n(Mt),At=function(n){var r=(0,C.ZP)(function(l){var z;return{projectDispatch:l.dispatch,database:((z=l.project.projectJSON.dataTypeDomains)===null||z===void 0?void 0:z.database)||[]}},v.Z),u=r.projectDispatch,a=r.database,c={};a.forEach(function(l){ie().assign(c,ve()({},l.code,{type:""}))});var m={name:"",code:"",apply:c||{}},g=(0,i.useState)(c),h=p()(g,2),M=h[0],B=h[1],$=function(z,A,j){B(x()(x()({},M),{},ve()({},j,{type:z.target.value})))};return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(q.Y,{title:"\u65B0\u589E\u5B57\u6BB5\u7C7B\u578B",trigger:(0,e.jsx)(O.ZP,{icon:(0,e.jsx)(pe.Z,{}),type:"text",size:"small",disabled:n.moduleDisable,children:"\u65B0\u589E\u5B57\u6BB5\u7C7B\u578B"}),onFinish:function(){var l=te()(o()().mark(function z(A){return o()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,u.addDatatype(x()(x()({},m),{},{name:A.name,code:A.code,apply:M}));case 2:return b.abrupt("return",!0);case 3:case"end":return b.stop()}},z)}));return function(z){return l.apply(this,arguments)}}(),children:[(0,e.jsxs)(_.A.Group,{children:[(0,e.jsx)(U.Z,{width:"md",name:"name",label:"\u540D\u79F0",placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0",formItemProps:{rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"},{max:100,message:"\u4E0D\u80FD\u5927\u4E8E 100 \u4E2A\u5B57\u7B26"}]}}),(0,e.jsx)(U.Z,{width:"md",name:"code",label:"\u4EE3\u7801",placeholder:"\u8BF7\u8F93\u5165\u4EE3\u7801",formItemProps:{rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"},{max:100,message:"\u4E0D\u80FD\u5927\u4E8E 100 \u4E2A\u5B57\u7B26"}]}})]}),(0,e.jsx)(xe.Z,{children:"\u6570\u636E\u6E90\u7C7B\u578B"}),(0,e.jsx)(_.A.Group,{children:a.map(function(l){return(0,e.jsx)(U.Z,{fieldProps:{onChange:function(A){$(A,null,l.code)}},width:"md",name:"apply.".concat(l.code,".type"),label:l.code,placeholder:"\u8BF7\u8F93\u5165\u7C7B\u578B",formItemProps:{rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"},{max:100,message:"\u4E0D\u80FD\u5927\u4E8E 100 \u4E2A\u5B57\u7B26"}]}},l.code)})})]})})},Ne=i.memo(At),Ot=function(n){var r=(0,C.ZP)(function(a){return{projectDispatch:a.dispatch}},v.Z),u=r.projectDispatch;return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(fe.Z,{placement:"right",title:"\u5220\u9664\u5B57\u6BB5\u7C7B\u578B",onConfirm:function(){return u.removeDatatype()},okText:"\u662F",cancelText:"\u5426",children:(0,e.jsx)(O.ZP,{icon:(0,e.jsx)(be.Z,{}),type:"text",size:"small",disabled:n.disable,children:"\u5220\u9664\u5B57\u6BB5\u7C7B\u578B"})})})},Lt=i.memo(Ot),Fe=t(84845),Ae=t(75513),Te=t(4966),zt=function(n){var r=(0,C.ZP)(function(j){var b;return{projectDispatch:j.dispatch,database:((b=j.project.projectJSON.dataTypeDomains)===null||b===void 0?void 0:b.database)||[],currentDatabaseIndex:j.currentDatabaseIndex}},v.Z),u=r.projectDispatch,a=r.database,c=r.currentDatabaseIndex,m=(0,i.useState)("createTableTemplate"),g=p()(m,2),h=g[0],M=g[1],B=(0,i.useState)({}),$=p()(B,2),l=$[0],z=$[1];(0,i.useEffect)(function(){z(a[c])});var A=function(b,W,S){z(x()(x()({},l),{},ve()({},S,W)))};return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(q.Y,{title:"\u65B0\u589E\u6570\u636E\u6E90",layout:"horizontal",trigger:(0,e.jsx)(O.ZP,{icon:(0,e.jsx)(pe.Z,{}),type:"text",size:"small",disabled:n.moduleDisable,children:"\u65B0\u589E\u6570\u636E\u6E90"}),onFinish:function(){var j=te()(o()().mark(function b(W){return o()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,u.addDatabase(x()(x()({},l),{},{code:W.code,defaultDatabase:W.defaultDatabase,fileShow:W.fileShow}));case 2:return I.abrupt("return",!0);case 3:case"end":return I.stop()}},b)}));return function(b){return j.apply(this,arguments)}}(),children:[(0,e.jsx)(U.Z,{width:"md",name:"code",label:"\u6570\u636E\u6E90\u540D\u79F0",placeholder:"\u8BF7\u8F93\u5165\u6570\u636E\u6E90\u540D\u79F0",formItemProps:{rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"},{max:100,message:"\u4E0D\u80FD\u5927\u4E8E 100 \u4E2A\u5B57\u7B26"}]}}),(0,e.jsx)(xe.Z,{children:"\u914D\u7F6E\u9009\u9879"}),(0,e.jsxs)(_.A.Group,{children:[(0,e.jsx)(Fe.Z,{name:"defaultDatabase",label:"\u8BBE\u4E3A\u9ED8\u8BA4\u6570\u636E\u6E90",tooltip:"\u52FE\u9009\u6B64\u9879\uFF0C\u5C06\u4F1A\u5728\u6570\u636E\u8868\u548C\u5173\u7CFB\u56FE\u4E2D\u663E\u793A\u9ED8\u8BA4\u6570\u636E\u6E90\u7684\u6570\u636E\u7C7B\u578B"}),(0,e.jsx)(Fe.Z,{name:"fileShow",label:"\u751F\u6210\u81F3\u6587\u6863",tooltip:"\u52FE\u9009\u6B64\u9879\uFF0C\u5C06\u4F1A\u5728\u751F\u6210\u7684\u6587\u6863\u4E2D\u663E\u793A\u8BE5\u6570\u636E\u6E90\u6240\u5BF9\u5E94\u7684\u5B57\u6BB5\u7C7B\u578B"})]}),(0,e.jsx)(xe.Z,{children:"\u6A21\u677F\u914D\u7F6E"}),(0,e.jsx)(_.A.Group,{children:(0,e.jsx)(Ae.Z.Group,{name:"radio",radioType:"button",initialValue:h,fieldProps:{onChange:function(b){return M(b.target.value)}},options:[{label:"\u521B\u5EFA\u8868",value:"createTableTemplate"},{label:"\u5220\u9664\u8868",value:"deleteTableTemplate"},{label:"\u91CD\u5EFA\u8868",value:"rebuildTableTemplate"},{label:"\u6DFB\u52A0\u5B57\u6BB5",value:"createFieldTemplate"},{label:"\u4FEE\u6539\u5B57\u6BB5",value:"updateFieldTemplate"},{label:"\u5220\u9664\u5B57\u6BB5",value:"deleteFieldTemplate"},{label:"\u521B\u5EFA\u7D22\u5F15",value:"createIndexTemplate"},{label:"\u5220\u9664\u7D22\u5F15",value:"deleteIndexTemplate"},{label:"\u521B\u5EFA\u4E3B\u952E",value:"createPkTemplate"},{label:"\u5220\u9664\u4E3B\u952E",value:"deletePkTemplate"},{label:"\u8868\u6CE8\u91CA",value:"updateTableComment"}]})}),(0,e.jsx)(U.Z,{label:"\u6A21\u677F\u914D\u7F6E",children:(0,e.jsx)(Te.Z,{mode:"mysql",value:ie().get(l,h,""),onChange:function(b,W){return A(W,b,h)}})})]})})},Ge=i.memo(zt),$t=function(n){var r=(0,C.ZP)(function(a){return{projectDispatch:a.dispatch}},v.Z),u=r.projectDispatch;return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(fe.Z,{placement:"right",title:"\u5220\u9664\u6570\u636E\u6E90",onConfirm:function(){return u.removeDatabase()},okText:"\u662F",cancelText:"\u5426",children:(0,e.jsx)(O.ZP,{icon:(0,e.jsx)(be.Z,{}),type:"text",size:"small",disabled:n.disable,children:"\u5220\u9664\u6570\u636E\u6E90"})})})},Wt=i.memo($t),wt=function(n){var r=(0,C.ZP)(function(S){var I,y;return{projectDispatch:S.dispatch,database:((I=S.project.projectJSON.dataTypeDomains)===null||I===void 0?void 0:I.database)||[],datatype:((y=S.project.projectJSON.dataTypeDomains)===null||y===void 0?void 0:y.datatype)||[],currentDataTypeIndex:S.currentDataTypeIndex}},v.Z),u=r.projectDispatch,a=r.database,c=r.datatype,m=r.currentDataTypeIndex,g=(0,i.useState)(0),h=p()(g,2),M=h[0],B=h[1],$=(0,i.useState)(!1),l=p()($,2),z=l[0],A=l[1],j={},b=function(I){var y={};return y=ie().assign(y,c[I.currentDataTypeIndex]),a.forEach(function(P){var w=ie().get(c[I.currentDataTypeIndex],"apply.".concat(P.code,".type"),"");ie().assign(j,ve()({},P.code,{type:w})),y=ie().assign(y,ve()({},"apply.".concat(P.code,".type"),w))}),B(M+1),y};(0,i.useImperativeHandle)(n.onRef,function(){return{setModalVisit:function(I){A(I)}}});var W=(0,i.useRef)();return(0,i.useEffect)(function(){var S,I;W&&((S=W.current)===null||S===void 0||(I=S.resetFields)===null||I===void 0||I.call(S))},[m,M]),(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(q.Y,{formRef:W,title:"\u6570\u636E\u5B57\u5178",visible:z,onFinish:function(){var S=te()(o()().mark(function I(y){var P,w;return o()().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return P=ie().omit(y,["code","code"]),w={name:y.name,code:y.code},ie().forIn(P,function(Q,s){ie().set(w,s,Q)}),ue.next=5,u.updateDatatype(w);case 5:return ue.abrupt("return",!0);case 6:case"end":return ue.stop()}},I)}));return function(I){return S.apply(this,arguments)}}(),params:{currentDataTypeIndex:m},request:function(){var S=te()(o()().mark(function I(y){return o()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.abrupt("return",b(y));case 1:case"end":return w.stop()}},I)}));return function(I){return S.apply(this,arguments)}}(),modalProps:{onCancel:function(){A(!1)}},onVisibleChange:A,children:[(0,e.jsxs)(_.A.Group,{children:[(0,e.jsx)(U.Z,{width:"md",name:"name",label:"\u540D\u79F0",placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0",formItemProps:{rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"},{max:100,message:"\u4E0D\u80FD\u5927\u4E8E 100 \u4E2A\u5B57\u7B26"}]}}),(0,e.jsx)(U.Z,{width:"md",name:"code",label:"\u4EE3\u7801",placeholder:"\u8BF7\u8F93\u5165\u4EE3\u7801",formItemProps:{rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"},{max:100,message:"\u4E0D\u80FD\u5927\u4E8E 100 \u4E2A\u5B57\u7B26"}]}})]}),(0,e.jsx)(xe.Z,{children:"\u6570\u636E\u6E90\u7C7B\u578B"}),(0,e.jsx)(_.A.Group,{children:a.map(function(S){return(0,e.jsx)(U.Z,{fieldProps:{onChange:function(y){}},width:"md",name:"apply.".concat(S.code,".type"),label:S.code,placeholder:"\u8BF7\u8F93\u5165\u7C7B\u578B",formItemProps:{rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"},{max:100,message:"\u4E0D\u80FD\u5927\u4E8E 100 \u4E2A\u5B57\u7B26"}]}},S.code)})})]})})},Qt=wt,Oe=t(80680),oe=t(37417),Le=t(40570),Kt=t(95921),Ut=function(n){var r=n.selectTab,u=n.template,a=n.setSelectTab,c=n.onTemplateEditorChange,m=(0,i.useState)(""),g=p()(m,2),h=g[0],M=g[1],B=ie().get(u,[r],""),$=document.body.clientHeight,l=$-25,z=(0,i.useRef)(),A=(0,Le.Id)(r);(0,i.useEffect)(function(){M((0,Le.ky)(JSON.parse(A),B))},[r]);var j=function(){M((0,Le.ky)(JSON.parse(A),B))};return(0,i.useImperativeHandle)(n.onRef,function(){return{reSetResult:function(){j()}}}),(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(Kt.a,{title:"\u9884\u89C8\u7F16\u8F91",formRef:z,trigger:(0,e.jsx)(Oe.Z,{variant:"outlined",color:"info",children:"\u9884\u89C8\u7F16\u8F91"},"preview"),drawerProps:{destroyOnClose:!0,placement:"top",height:l*.8},submitter:{searchConfig:{resetText:"\u53D6\u6D88",submitText:"\u9884\u89C8"},submitButtonProps:{onClick:function(){j()}}},children:[(0,e.jsx)(_.A.Group,{children:(0,e.jsx)(Ae.Z.Group,{name:"radio",radioType:"button",initialValue:n.selectTab,fieldProps:{onChange:function(W){a(W.target.value),j()}},options:[{label:"\u521B\u5EFA\u8868",value:"createTableTemplate"},{label:"\u5220\u9664\u8868",value:"deleteTableTemplate"},{label:"\u91CD\u5EFA\u8868",value:"rebuildTableTemplate"},{label:"\u6DFB\u52A0\u5B57\u6BB5",value:"createFieldTemplate"},{label:"\u4FEE\u6539\u5B57\u6BB5",value:"updateFieldTemplate"},{label:"\u5220\u9664\u5B57\u6BB5",value:"deleteFieldTemplate"},{label:"\u521B\u5EFA\u7D22\u5F15",value:"createIndexTemplate"},{label:"\u5220\u9664\u7D22\u5F15",value:"deleteIndexTemplate"},{label:"\u521B\u5EFA\u4E3B\u952E",value:"createPkTemplate"},{label:"\u5220\u9664\u4E3B\u952E",value:"deletePkTemplate"},{label:"\u8868\u6CE8\u91CA",value:"updateTableComment"}]})}),(0,e.jsxs)(oe.ZP,{container:!0,spacing:2,children:[(0,e.jsx)(oe.ZP,{item:!0,xs:3,children:"\u53C2\u8003\u6570\u636E"}),(0,e.jsx)(oe.ZP,{item:!0,xs:6,children:"\u6A21\u677F\u4EE3\u7801\u7F16\u8F91"}),(0,e.jsx)(oe.ZP,{item:!0,xs:3,children:"\u9884\u89C8"}),(0,e.jsx)(oe.ZP,{item:!0,xs:3,children:(0,e.jsx)(Te.Z,{mode:"json",height:"".concat(l*.5,"px"),value:A})}),(0,e.jsx)(oe.ZP,{item:!0,xs:6,children:(0,e.jsx)(Te.Z,{mode:"mysql",height:"".concat(l*.5,"px"),value:B,onChange:function(W,S){c(S,W,r)}})}),(0,e.jsx)(oe.ZP,{item:!0,xs:3,children:(0,e.jsx)(Te.Z,{mode:"mysql",height:"".concat(l*.5,"px"),value:h})})]})]})})},Vt=Ut,Nt=function(n){var r=(0,C.ZP)(function(s){var D;return{projectDispatch:s.dispatch,database:((D=s.project.projectJSON.dataTypeDomains)===null||D===void 0?void 0:D.database)||[],currentDatabaseIndex:s.currentDatabaseIndex}},v.Z),u=r.projectDispatch,a=r.database,c=r.currentDatabaseIndex,m=(0,i.useState)("createTableTemplate"),g=p()(m,2),h=g[0],M=g[1],B=(0,i.useState)({}),$=p()(B,2),l=$[0],z=$[1],A=(0,i.useState)(!1),j=p()(A,2),b=j[0],W=j[1],S=(0,i.useState)(!1),I=p()(S,2),y=I[0],P=I[1],w=function(D){var H={};return H=ie().assign(H,a[D.currentDatabaseIndex]),z(H),H};(0,i.useImperativeHandle)(n.onRef,function(){return{setModalVisit:function(D){W(D)}}});var ee=(0,i.useRef)(),ue=function(D,H,de){z(x()(x()({},l),{},ve()({},de,H))),ee.current.reSetResult()},Q=(0,i.useRef)();return(0,i.useEffect)(function(){var s,D;Q&&((s=Q.current)===null||s===void 0||(D=s.resetFields)===null||D===void 0||D.call(s))},[c,l==null?void 0:l.defaultDatabase,l==null?void 0:l.fileShow]),(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(q.Y,{formRef:Q,title:"\u6570\u636E\u6E90",layout:"horizontal",visible:b,onFinish:function(){var s=te()(o()().mark(function D(H){return o()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,u.updateDatabase(x()(x()({},l),{},{code:H.code,defaultDatabase:H.defaultDatabase,fileShow:H.fileShow}));case 2:return P(!y),setTimeout(function(){},1e3),N.abrupt("return",!0);case 5:case"end":return N.stop()}},D)}));return function(D){return s.apply(this,arguments)}}(),params:{currentDatabaseIndex:c,refreshCheckBox:y},request:function(){var s=te()(o()().mark(function D(H){return o()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.abrupt("return",w(H));case 1:case"end":return N.stop()}},D)}));return function(D){return s.apply(this,arguments)}}(),modalProps:{onCancel:function(){W(!1)}},onVisibleChange:W,submitter:{render:function(D,H){return[(0,e.jsx)(Vt,{onRef:ee,selectTab:h,template:l,setSelectTab:M,onTemplateEditorChange:ue}),(0,e.jsx)(Oe.Z,{variant:"outlined",color:"warning",onClick:function(){var N;return(N=D.form)===null||N===void 0?void 0:N.resetFields()},children:"\u91CD\u7F6E"},"rest"),(0,e.jsx)(Oe.Z,{variant:"contained",onClick:function(){var N,me;return(N=D.form)===null||N===void 0||(me=N.submit)===null||me===void 0?void 0:me.call(N)},children:" \u786E\u5B9A "},"submit")]}},children:[(0,e.jsx)(U.Z,{width:"md",name:"code",label:"\u6570\u636E\u6E90\u540D\u79F0",placeholder:"\u8BF7\u8F93\u5165\u6570\u636E\u6E90\u540D\u79F0",formItemProps:{rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"},{max:100,message:"\u4E0D\u80FD\u5927\u4E8E 100 \u4E2A\u5B57\u7B26"}]}}),(0,e.jsx)(xe.Z,{children:"\u914D\u7F6E\u9009\u9879"}),(0,e.jsxs)(_.A.Group,{children:[(0,e.jsx)(Fe.Z,{name:"defaultDatabase",label:"\u8BBE\u4E3A\u9ED8\u8BA4\u6570\u636E\u6E90",tooltip:"\u52FE\u9009\u6B64\u9879\uFF0C\u5C06\u4F1A\u5728\u6570\u636E\u8868\u548C\u5173\u7CFB\u56FE\u4E2D\u663E\u793A\u9ED8\u8BA4\u6570\u636E\u6E90\u7684\u6570\u636E\u7C7B\u578B"}),(0,e.jsx)(Fe.Z,{name:"fileShow",label:"\u751F\u6210\u81F3\u6587\u6863",tooltip:"\u52FE\u9009\u6B64\u9879\uFF0C\u5C06\u4F1A\u5728\u751F\u6210\u7684\u6587\u6863\u4E2D\u663E\u793A\u8BE5\u6570\u636E\u6E90\u6240\u5BF9\u5E94\u7684\u5B57\u6BB5\u7C7B\u578B"})]}),(0,e.jsx)(xe.Z,{children:"\u6A21\u677F\u914D\u7F6E"}),(0,e.jsx)(_.A.Group,{children:(0,e.jsx)(Ae.Z.Group,{name:"radio",radioType:"button",initialValue:h,fieldProps:{onChange:function(D){return M(D.target.value)}},options:[{label:"\u521B\u5EFA\u8868",value:"createTableTemplate"},{label:"\u5220\u9664\u8868",value:"deleteTableTemplate"},{label:"\u91CD\u5EFA\u8868",value:"rebuildTableTemplate"},{label:"\u6DFB\u52A0\u5B57\u6BB5",value:"createFieldTemplate"},{label:"\u4FEE\u6539\u5B57\u6BB5",value:"updateFieldTemplate"},{label:"\u5220\u9664\u5B57\u6BB5",value:"deleteFieldTemplate"},{label:"\u521B\u5EFA\u7D22\u5F15",value:"createIndexTemplate"},{label:"\u5220\u9664\u7D22\u5F15",value:"deleteIndexTemplate"},{label:"\u521B\u5EFA\u4E3B\u952E",value:"createPkTemplate"},{label:"\u5220\u9664\u4E3B\u952E",value:"deletePkTemplate"},{label:"\u8868\u6CE8\u91CA",value:"updateTableComment"}]})}),(0,e.jsx)(U.Z,{label:"\u6A21\u677F\u914D\u7F6E",children:(0,e.jsx)(Te.Z,{mode:"mysql",value:ie().get(l,h,""),onChange:function(D,H){return ue(H,D,h)}})})]})})},Gt=Nt,kt=function(n){var r=(0,C.ZP)(function(a){return{projectDispatch:a.dispatch}},v.Z),u=r.projectDispatch;return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(O.ZP,{icon:(0,e.jsx)(Re.Z,{}),type:"text",size:"small",onClick:function(){return u.copyDatatype()},disabled:n.disable,children:"\u590D\u5236\u5143\u6570\u636E"})})},Ht=i.memo(kt),Yt=function(n){var r=(0,C.ZP)(function(a){return{projectDispatch:a.dispatch}},v.Z),u=r.projectDispatch;return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(O.ZP,{icon:(0,e.jsx)(Be.Z,{}),type:"text",size:"small",onClick:function(){return u.cutDatatype()},disabled:n.disable,children:"\u526A\u5207\u5143\u6570\u636E"})})},Jt=i.memo(Yt),Xt=function(n){var r=(0,C.ZP)(function(a){return{projectDispatch:a.dispatch}},v.Z),u=r.projectDispatch;return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(O.ZP,{icon:(0,e.jsx)(Me.Z,{}),type:"text",size:"small",onClick:function(){return u.pastDatatype()},disabled:n.disable,children:"\u7C98\u8D34\u5143\u6570\u636E"})})},_t=i.memo(Xt),qt=function(n){var r=(0,C.ZP)(function(A){var j,b,W,S,I,y;return{database:(j=A.project)===null||j===void 0||(b=j.projectJSON)===null||b===void 0||(W=b.dataTypeDomains)===null||W===void 0?void 0:W.database,datatype:(S=A.project)===null||S===void 0||(I=S.projectJSON)===null||I===void 0||(y=I.dataTypeDomains)===null||y===void 0?void 0:y.datatype,projectDispatch:A.dispatch}},v.Z),u=r.datatype,a=r.database,c=r.projectDispatch,m=function(j,b){j==="dataType"?c.setCurrentDatatype(b):j==="database"&&c.setCurrentDatabase(b)},g=(0,i.useRef)(),h=function(){g.current.setModalVisit(!0)},M=(0,i.useRef)(),B=function(){M.current.setModalVisit(!0)},$=function(){return(0,e.jsxs)(L.Z,{mode:"inline",children:[(0,e.jsx)(L.Z.Item,{children:(0,e.jsx)(Ne,{moduleDisable:!1})}),(0,e.jsx)(L.Z.Item,{children:(0,e.jsx)(Lt,{disable:!1})}),(0,e.jsx)(L.Z.Item,{children:(0,e.jsx)(Ht,{disable:!1})}),(0,e.jsx)(L.Z.Item,{children:(0,e.jsx)(Jt,{disable:!1})}),(0,e.jsx)(L.Z.Item,{children:(0,e.jsx)(_t,{disable:!1})})]})},l=function(){return(0,e.jsxs)(L.Z,{mode:"inline",children:[(0,e.jsx)(L.Z.Item,{children:(0,e.jsx)(Ge,{moduleDisable:!1})}),(0,e.jsx)(L.Z.Item,{children:(0,e.jsx)(Wt,{disable:!1})})]})},z=function(j,b){return j==="###menu###"?b==="database"?(0,e.jsx)(Ge,{moduleDisable:!1}):(0,e.jsx)(Ne,{moduleDisable:!1}):b==="database"?l():$()};return(0,e.jsxs)("div",{children:[(0,e.jsx)(Ie.Z,{showIcon:!1,height:550,defaultExpandedKeys:["database###database"],rootStyle:{textAlign:"left"},treeData:c.getDataTypeTree(""),titleRender:function(j){return(0,e.jsx)(Ce.Z,{trigger:["contextMenu"],overlay:z(j.code,j.type),onOpenChange:function(W){j.type==="dataType"&&j.code!="###menu###"?m("dataType",j.code):j.type==="database"&&j.code!="###menu###"&&m("database",j.code)},children:(0,e.jsxs)(O.ZP,{type:"text",size:"small",onClick:function(W){j.type==="dataType"&&j.code!="###menu###"?(m("dataType",j.code),h()):j.type==="database"&&j.code!="###menu###"&&(m("database",j.code),B())},children:[(0,e.jsx)("span",{style:{marginRight:"6px"},children:j.icon}),(0,e.jsx)("span",{children:j.title})]})})}}),(0,e.jsx)(Qt,{onRef:g}),(0,e.jsx)(Gt,{onRef:M})]})},en=i.memo(qt),ke=t(24882),He=t(34062),Ye=t(59918),Ln=ke.Z.TabPane,tn=function(n){var r=(0,Ve.Z)(function(a){return{globalDispatch:a.dispatch}},v.Z),u=r.globalDispatch;return n.collapsed?(0,e.jsx)(e.Fragment,{}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(He.Z,{style:{borderRadius:4,marginInlineEnd:12},allowClear:!0,size:"small",prefix:(0,e.jsx)(Ye.Z,{}),placeholder:"\u641C\u7D22\u5143\u6570\u636E",onPressEnter:function(c){var m;u.setSearchKey((m=c.target)===null||m===void 0?void 0:m.value)}}),(0,e.jsx)(ke.Z,{defaultActiveKey:"1",centered:!0,items:[{label:"\u5143\u6570\u636E",key:"1",children:(0,e.jsx)(Rt,{})},{label:"\u6570\u636E\u57DF",key:"2",children:(0,e.jsx)(en,{})}]})]})},nn=i.memo(tn),ce=t(19688),an=t(58999),rn=t(51389),un=t(34103),ln=t(1768),sn=t(94274),on=t(67353),cn=t(89536),dn=t(61351),ze=t(26076),$e=t(60579),mn=t(88263),je=t(71793),hn=t(56713),pn=t(81663),Ze=t(51927),fn=t(77073),vn=t(90837),De=t(57956),xn=t(22685),jn=function(n){var r=(0,De.Z)(function(a){return{queryDispatch:a.dispatch}},v.Z),u=r.queryDispatch;return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(q.Y,{title:n.model.isLeaf?"\u91CD\u547D\u540D\u67E5\u8BE2":"\u91CD\u547D\u540D\u76EE\u5F55",trigger:(0,e.jsx)(O.ZP,{icon:(0,e.jsx)(Pe.Z,{}),type:"text",size:"small",children:n.model.isLeaf?"\u91CD\u547D\u540D\u67E5\u8BE2":"\u91CD\u547D\u540D\u76EE\u5F55"}),onFinish:function(){var a=te()(o()().mark(function c(m){return o()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,u.renameQuery({id:n.model.id,title:m.title,projectId:je.rV(Ze.s.PROJECT_ID)});case 2:return h.abrupt("return",!0);case 3:case"end":return h.stop()}},c)}));return function(c){return a.apply(this,arguments)}}(),initialValues:n.model,children:(0,e.jsx)(U.Z,{width:"md",name:"title",label:"\u67E5\u8BE2\u540D\u79F0",placeholder:"\u8BF7\u8F93\u5165\u67E5\u8BE2\u540D\u79F0",formItemProps:{rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"},{max:100,message:"\u4E0D\u80FD\u5927\u4E8E 100 \u4E2A\u5B57\u7B26"}]}})})})},Dn=i.memo(jn),gn=function(n){var r=(0,De.Z)(function(a){return{queryDispatch:a.dispatch}},v.Z),u=r.queryDispatch;return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(fe.Z,{placement:"right",title:n.model.isLeaf?"\u5220\u9664\u67E5\u8BE2":"\u5220\u9664\u76EE\u5F55",onConfirm:function(){return u.removeQuery(n==null?void 0:n.model)},okText:"\u662F",cancelText:"\u5426",children:(0,e.jsx)(O.ZP,{icon:(0,e.jsx)(be.Z,{}),type:"text",size:"small",children:n.model.isLeaf?"\u5220\u9664\u67E5\u8BE2":"\u5220\u9664\u76EE\u5F55"})})})},yn=i.memo(gn),En=function(n){var r=(0,De.Z)(function(h){return{queryDispatch:h.dispatch}},v.Z),u=r.queryDispatch,a=(0,ce.useSearchParams)(),c=p()(a,1),m=c[0],g=m.get("erd:projectId")||"";return(!g||g==="")&&(g=je.rV(Ze.s.PROJECT_ID)||""),(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(q.Y,{title:"\u65B0\u5EFA\u67E5\u8BE2",trigger:(0,e.jsx)(O.ZP,{icon:(0,e.jsx)(pe.Z,{}),type:"text",size:"small",children:"\u65B0\u5EFA\u67E5\u8BE2"}),onFinish:function(){var h=te()(o()().mark(function M(B){return o()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,u.addQuery({title:B.title,isLeaf:!0,projectId:g,parentId:n.model.isLeaf?n.model.parentId:n.model.id});case 2:return l.abrupt("return",!0);case 3:case"end":return l.stop()}},M)}));return function(M){return h.apply(this,arguments)}}(),children:(0,e.jsx)(U.Z,{width:"md",name:"title",label:"\u67E5\u8BE2\u540D\u79F0",placeholder:"\u8BF7\u8F93\u5165\u67E5\u8BE2\u540D\u79F0",formItemProps:{rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"},{max:100,message:"\u4E0D\u80FD\u5927\u4E8E 100 \u4E2A\u5B57\u7B26"}]}})})})},bn=i.memo(En),Tn=function(n){var r=(0,De.Z)(function(h){return{queryDispatch:h.dispatch}},v.Z),u=r.queryDispatch,a=(0,ce.useSearchParams)(),c=p()(a,1),m=c[0],g=m.get("erd:projectId")||"";return(!g||g==="")&&(g=je.rV(Ze.s.PROJECT_ID)||""),(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(q.Y,{title:"\u65B0\u5EFA\u76EE\u5F55",trigger:(0,e.jsx)(O.ZP,{icon:(0,e.jsx)(pe.Z,{}),type:n.isRightContext?"text":"primary",size:n.isRightContext?"small":"middle",children:"\u65B0\u5EFA\u76EE\u5F55"}),onFinish:function(){var h=te()(o()().mark(function M(B){return o()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,u.addQuery({title:B.title,projectId:g,isLeaf:!1});case 2:return l.abrupt("return",!0);case 3:case"end":return l.stop()}},M)}));return function(M){return h.apply(this,arguments)}}(),children:(0,e.jsx)(U.Z,{width:"md",name:"title",label:"\u76EE\u5F55\u540D\u79F0",placeholder:"\u8BF7\u8F93\u5165\u76EE\u5F55\u540D\u79F0",formItemProps:{rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"},{max:100,message:"\u4E0D\u80FD\u5927\u4E8E 100 \u4E2A\u5B57\u7B26"}]}})})})},Je=i.memo(Tn),Zn=Ie.Z.DirectoryTree,Pn=function(n){var r=(0,De.Z)(function($){return{querySearchKey:$.querySearchKey,treeData:$.treeData,queryDispatch:$.dispatch}},v.Z),u=r.querySearchKey,a=r.treeData,c=r.queryDispatch,m=(0,ce.useSearchParams)(),g=p()(m,1),h=g[0],M=h.get("erd:projectId")||"";(!M||M==="")&&(M=je.rV(Ze.s.PROJECT_ID)||""),(0,i.useEffect)(function(){c.fetchTreeData({projectId:M})},[u]);var B=function(l){return(0,e.jsxs)(L.Z,{mode:"inline",children:[l.isLeaf?(0,e.jsx)(e.Fragment,{}):(0,e.jsx)(L.Z.Item,{children:(0,e.jsx)(Je,{isRightContext:!0})}),(0,e.jsx)(L.Z.Item,{children:(0,e.jsx)(bn,{model:l})}),(0,e.jsx)(L.Z.Item,{children:(0,e.jsx)(Dn,{model:l})}),(0,e.jsx)(L.Z.Item,{children:(0,e.jsx)(yn,{model:l})})]})};return(0,e.jsx)(e.Fragment,{children:a.length>0?(0,e.jsx)("div",{style:{display:"flex",marginRight:"20px",marginTop:"10px"},children:(0,e.jsx)(Zn,{showIcon:!1,blockNode:!0,defaultExpandAll:!0,onSelect:function(l,z){return c.onSelectNode(l,z)},treeData:a,style:{width:"".concat(We-50,"px")},titleRender:function(l){return(0,e.jsx)(Ce.Z,{trigger:["contextMenu"],overlay:B(l),children:(0,e.jsxs)("div",{children:[l.isLeaf?(0,e.jsx)(fn.Z,{theme:"filled",size:"12",fill:"#DE2910",strokeWidth:2,strokeLinejoin:"miter"}):(0,e.jsx)(vn.Z,{theme:"filled",size:"12",fill:"#DE2910",strokeWidth:2,strokeLinejoin:"miter"}),(0,e.jsx)(xn.I,{title:l.title,style:{marginLeft:"5px"},children:l.title})]})})}})}):(0,e.jsx)(Ue.Z,{image:"/invocationlab-erd-online-view/empty.svg",imageStyle:{height:60},description:(0,e.jsx)("span",{children:"\u6682\u65E0\u6570\u636E"}),children:(0,e.jsx)(Je,{isRightContext:!1})})})},Cn=i.memo(Pn),Fn=function(n){var r=(0,De.Z)(function(a){return{queryDispatch:a.dispatch}},v.Z),u=r.queryDispatch;return n.collapsed?(0,e.jsx)(e.Fragment,{}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(He.Z,{style:{borderRadius:4,marginInlineEnd:12},allowClear:!0,size:"small",prefix:(0,e.jsx)(Ye.Z,{}),placeholder:"\u641C\u7D22\u5386\u53F2SQL",onPressEnter:function(c){var m;u.setQuerySearchKey((m=c.target)===null||m===void 0?void 0:m.value)}}),(0,e.jsx)(Cn,{})]})},Sn=i.memo(Fn),In=t(480),Rn=t(47604),We=333,Bn=[(0,e.jsx)(ze.Z,{placement:"bottom",title:"\u516C\u4F17\u53F7",content:(0,e.jsx)($e.Z,{src:"/gongzhonghao.jpg"}),trigger:"hover",children:(0,e.jsx)(sn.Z,{theme:"filled",size:"18",fill:"#DE2910",strokeWidth:2})}),(0,e.jsx)(ze.Z,{placement:"bottom",title:"\u5FAE\u4FE1\u7FA4",content:(0,e.jsx)($e.Z,{src:"/zerocode.png"}),trigger:"hover",children:(0,e.jsx)(on.Z,{theme:"filled",size:"18",fill:"#DE2910",strokeWidth:2})}),(0,e.jsx)(ze.Z,{placement:"bottom",title:"\u5C0F\u7A0B\u5E8F",content:(0,e.jsx)($e.Z,{src:"/xiaochengxu.jpg"}),trigger:"hover",children:(0,e.jsx)(cn.Z,{theme:"filled",size:"18",fill:"#DE2910",strokeWidth:2})}),(0,e.jsx)("a",{style:{marginTop:"-10px"},target:"_blank",href:"https://gitee.com/MARTIN-88/erd-online",children:(0,e.jsx)("img",{src:"https://gitee.com/MARTIN-88/erd-online/badge/star.svg?theme=white",alt:"star"})})];function Xe(d,n){var r=d.route.routes.map(function(u){var a=n[u==null?void 0:u.access];if(a!==!1){var c;return x()(x()({},u),{},{routes:u==null||(c=u.routes)===null||c===void 0?void 0:c.map(function(m){var g=n[m==null?void 0:m.access];if(g!==!1)return m})})}});return r}function Mn(){var d=new Date,n=d.getFullYear(),r=d.getMonth()<9?"0"+(d.getMonth()+1):d.getMonth()+1,u=d.getDate()<10?"0"+d.getDate():d.getDate(),a=d.getHours()<10?"0"+d.getHours():d.getHours(),c=d.getMinutes()<10?"0"+d.getMinutes():d.getMinutes(),m=d.getSeconds()<10?"0"+d.getSeconds():d.getSeconds(),g=d.getMilliseconds();return"".concat(n,"-").concat(r,"-").concat(u,"T").concat(a,":").concat(c,":").concat(m,".").concat(g)}var An=function(n){var r=(0,hn.md)(),u=(0,i.useState)("/design/table/model"),a=p()(u,2),c=a[0],m=a[1],g=(0,ce.useSearchParams)(),h=p()(g,1),M=h[0],B=M.get("erd:projectId")||"";(!B||B==="")&&(B=je.rV(Ze.s.PROJECT_ID)||"");var $=(0,C.ZP)(function(y){return{fetch:y.fetch,project:y.project,initSocket:y.initSocket,closeSocket:y.closeSocket}},v.Z),l=$.fetch,z=$.project,A=$.initSocket,j=$.closeSocket;(0,i.useEffect)(function(){l()},[B]);var b={fixSiderbar:!0,layout:"mix",splitMenus:!0},W=(0,ce.useModel)("@@initialState"),S=W.setInitialState;(0,i.useEffect)(function(){z&&z.type==="2"?(A(B),(0,pn.HT)("/ncnb/project/group/currentRolePermission",{projectId:B}).then(function(y){if((y==null?void 0:y.code)===200){var P,w;y==null||(P=y.data)===null||P===void 0||(w=P.permission)===null||w===void 0||w.push("initialized"),S(function(ee){return x()(x()({},ee),{},{access:x()(x()({},y.data),{},{person:!1})})})}}),r.initialized&&(se.route.routes=Xe(se,r))):S(function(y){return x()(x()({},y),{},{access:{person:!0}})})},[z,r.initialized,se.route.routes]),(0,In.kw)(function(){j(B)});var I=[{key:"1",label:(0,e.jsx)(O.ZP,{onClick:function(){S(function(P){return x()(x()({},P),{},{access:{}})}),(0,mn.kS)()},children:"\u9000\u51FA\u767B\u5F55"})}];return(0,e.jsx)(an.D,{content:["ERD Online","V4.0.7"],children:(0,e.jsx)(rn.f,x()(x()(x()({logo:"/invocationlab-erd-online-view/logo.svg",title:"ERD Online",bgLayoutImgList:[{src:"/invocationlab-erd-online-view/ant-1.png",left:85,bottom:100,height:"303px"},{src:"/invocationlab-erd-online-view/ant-1.png",bottom:-68,right:-45,height:"303px"},{src:"/invocationlab-erd-online-view/ant-3.png",bottom:0,left:0,width:"331px"}]},se),{},{location:{pathname:c,search:"a=1"},menu:{type:"group"},avatarProps:{src:(0,e.jsx)(dn.Z,{theme:"filled",size:"28",fill:"#DE2910",strokeWidth:2}),size:"small",title:(0,e.jsx)(Ce.Z,{menu:{items:I},placement:"bottom",arrow:{pointAtCenter:!0},children:(0,e.jsx)("div",{children:je.rV("username")})})},menuExtraRender:function(P){return c==="/design/table/model"?(0,e.jsx)(nn,{collapsed:P.collapsed}):c==="/design/table/query"?(0,e.jsx)(Sn,{collapsed:P.collapsed}):null},siderWidth:We,actionsRender:function(P){return P.isMobile?[]:[]},menuFooterRender:function(P){if(!(P!=null&&P.collapsed))return(0,e.jsxs)("div",{style:{textAlign:"center",paddingBlockStart:12},children:[(0,e.jsx)("div",{children:z.projectName}),(0,e.jsx)("div",{children:"\xA9 2023 Made with bm"}),(0,e.jsx)("div",{children:"ERD Online"})]})},onMenuHeaderClick:function(P){return location=location.origin+"/invocationlab-erd-online-view/project/recent"},itemRender:function(P,w,ee,ue){var Q=ee.indexOf(P)===0;return Q?(0,e.jsx)(ce.Link,{to:ue.join("/"),children:P.breadcrumbName}):(0,e.jsx)("span",{children:P.breadcrumbName})},menuItemRender:function(P,w){var ee;return(ee=P.path)!==null&&ee!==void 0&&ee.startsWith("http")||P.exact?(0,e.jsx)("a",{href:P.path,target:"_blank",style:{display:"none"},children:w}):(0,e.jsx)("div",{onClick:function(){m((P==null?void 0:P.path)||c)},children:(0,e.jsx)(ce.Link,{to:(P==null?void 0:P.path)||"/project/recent",children:w})})}},b),{},{children:(0,e.jsx)(un._z,{title:!1,fixedHeader:!0,breadcrumbRender:!1,children:(0,e.jsx)(ln.Z,{style:{minHeight:"85vh"},children:(0,e.jsx)(Rn.Z,{})})})}))})},On=i.memo(An)},81663:function(ge,ne,t){t.d(ne,{D7:function(){return Y},HT:function(){return ye},UC:function(){return e},a4:function(){return Z},dm:function(){return E},fU:function(){return F}});var le=t(97833),p=t.n(le),ae=t(91484),x=t.n(ae),i=t(42196),C=t.n(i),J=t(88263);function V(K,v,k){return X.apply(this,arguments)}function X(){return X=_asyncToGenerator(_regeneratorRuntime().mark(function K(v,k,re){var o,he;return _regeneratorRuntime().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return re||(re={}),o=JSON.stringify(re)==="{}",he=[],o||Object.keys(re).map(function(_,U){var O=re[_];O==="ascend"&&he.push({column:_,asc:!0}),O==="descend"&&he.push({column:_,asc:!1})}),q.abrupt("return",request(v,{method:"GET",params:_objectSpread({size:k.pageSize,orders:he},k)}));case 5:case"end":return q.stop()}},K)})),X.apply(this,arguments)}function Y(K,v){return f.apply(this,arguments)}function f(){return f=C()(p()().mark(function K(v,k){return p()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,J.ZP)(v,{method:"POST",data:x()({},k)}));case 1:case"end":return o.stop()}},K)})),f.apply(this,arguments)}function F(K,v){return R.apply(this,arguments)}function R(){return R=C()(p()().mark(function K(v,k){return p()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,J.ZP)(v,{method:"DELETE",data:x()({},k)}));case 1:case"end":return o.stop()}},K)})),R.apply(this,arguments)}function E(K,v){return T.apply(this,arguments)}function T(){return T=C()(p()().mark(function K(v,k){return p()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,J.ZP)(v,{method:"PUT",data:x()({},k)}));case 1:case"end":return o.stop()}},K)})),T.apply(this,arguments)}function Z(K,v){return G.apply(this,arguments)}function G(){return G=C()(p()().mark(function K(v,k){return p()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,J.ZP)(v,{method:"POST",data:x()({},k)}));case 1:case"end":return o.stop()}},K)})),G.apply(this,arguments)}function ye(K,v){return Ee.apply(this,arguments)}function Ee(){return Ee=C()(p()().mark(function K(v,k){return p()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,J.ZP)(v,{method:"GET",params:x()({},k)}));case 1:case"end":return o.stop()}},K)})),Ee.apply(this,arguments)}function e(K,v){return se.apply(this,arguments)}function se(){return se=C()(p()().mark(function K(v,k){return p()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,J.ZP)(v,{method:"GET",params:x()({},k)}));case 1:case"end":return o.stop()}},K)})),se.apply(this,arguments)}},57956:function(ge,ne,t){var le=t(31777),p=t(81663),ae=t(7599),x=t(71793),i=t(51927),C=t(44766),J=t.n(C),V=t(14515),X=t(5049),Y=t(88263),f=(0,le.Z)(function(F,R){return{querySearchKey:"",treeData:[],dispatch:{queryHistory:function(T){return(0,p.HT)("/ncnb/queryHistory",T)},explain:function(T){return(0,p.a4)("/ncnb/queryInfo/explain",T)},exec:function(T){return(0,p.a4)("/ncnb/queryInfo/exec",T)},exportSql:function(T,Z){(0,Y.Ht)(T,Z,"/ncnb/queryInfo/exportSql")},updateSqlInfo:function(T){(0,p.dm)("/ncnb/queryInfo/"+T.id,T).then(function(Z){if((Z==null?void 0:Z.code)===200){X.ZP.success(Z==null?void 0:Z.msg);return}})},renameQuery:function(T){(0,p.dm)("/ncnb/queryInfo/"+T.id,T).then(function(Z){(Z==null?void 0:Z.code)===200&&(X.ZP.success("\u4FEE\u6539\u6210\u529F"),R().dispatch.fetchTreeData({projectId:T.projectId}))})},removeQuery:function(T){var Z=x.rV(i.s.PROJECT_ID)||"";(0,p.fU)("/ncnb/queryInfo/"+Z+"/"+T.id,{}).then(function(G){(G==null?void 0:G.code)===200&&(X.ZP.success("\u5220\u9664\u6210\u529F"),R().dispatch.fetchTreeData({projectId:Z}))})},addQuery:function(T){(0,p.D7)("/ncnb/queryInfo",T).then(function(Z){(Z==null?void 0:Z.code)===200&&(X.ZP.success("\u65B0\u589E\u6210\u529F"),R().dispatch.fetchTreeData({projectId:T.projectId}))})},fetchQueryInfo:function(T){return(0,p.HT)("/ncnb/queryInfo/"+T,{})},fetchTreeData:function(T){var Z=R().querySearchKey;Z&&J().set(T,"title",Z),(0,p.UC)("/ncnb/queryInfo/tree",T).then(function(G){(G==null?void 0:G.code)===200&&F({treeData:(G==null?void 0:G.data)||[]})})},setQuerySearchKey:function(T){return F((0,ae.ZP)(function(Z){Z.querySearchKey=T}))},onSelectNode:function(T,Z){return F((0,ae.ZP)(function(G){var ye=V.ZP.getState().dispatch;Z.node.isLeaf&&ye.addTab({group:V.v0.QUERY,module:Z.node.key+"",entity:Z.node.title+""})}))}}}});ne.Z=f},14515:function(ge,ne,t){t.d(ne,{v0:function(){return x}});var le=t(31777),p=t(7599),ae=t(75687),x;(function(V){V[V.MODEL=0]="MODEL",V[V.QUERY=1]="QUERY"})(x||(x={}));var i="",C="ERD-ONLINE-SQL-QUERY",J=(0,le.Z)(function(V,X){return{selectTabId:i,tableTabs:[],dispatch:{addTab:function(f){return V((0,p.ZP)(function(F){F.tableTabs.find(function(R){return(R==null?void 0:R.entity)===f.entity&&(R==null?void 0:R.module)===f.module})||F.tableTabs.push(f),F.selectTabId="".concat(f.module,"###").concat(f.entity)}))},activeTab:function(f){return V((0,p.ZP)(function(F){if(F.selectTabId="".concat(f.module,"###").concat(f.entity),f.group===x.MODEL){var R=ae.ZP.getState().dispatch;R.setCurrentModule(f.module),R.setCurrentEntity(f.entity)}}))},removeTab:function(f){return V((0,p.ZP)(function(F){var R=F.tableTabs.findIndex(function(Z){return(Z==null?void 0:Z.entity)===f.entity&&(Z==null?void 0:Z.module)===(f==null?void 0:f.module)});if(R>-1&&(F.tableTabs=F.tableTabs.filter(function(Z,G){return G!==R}),X().selectTabId==="".concat(f==null?void 0:f.module,"###").concat(f==null?void 0:f.entity))){if(R===0)F.selectTabId=i;else if(R>0){var E=F.tableTabs[R-1];if(F.selectTabId="".concat(E==null?void 0:E.module,"###").concat(E==null?void 0:E.entity),f.group===x.MODEL){var T=ae.ZP.getState().dispatch;T.setCurrentModule(E.module),T.setCurrentEntity(E.entity)}}}}))},removeLeftTab:function(f){return V((0,p.ZP)(function(F){var R=F.tableTabs.findIndex(function(E){return(E==null?void 0:E.entity)===f.entity&&(E==null?void 0:E.module)===(f==null?void 0:f.module)});R>-1&&(F.tableTabs=F.tableTabs.filter(function(E,T){return T>=R})),F.selectTabId="".concat(f.module,"###").concat(f.entity)}))},removeRightTab:function(f){return V((0,p.ZP)(function(F){var R=F.tableTabs.findIndex(function(E){return(E==null?void 0:E.entity)===f.entity&&(E==null?void 0:E.module)===(f==null?void 0:f.module)});R>-1&&(F.tableTabs=F.tableTabs.filter(function(E,T){return T<=R})),F.selectTabId="".concat(f.module,"###").concat(f.entity)}))},removeAllTab:function(f){return V((0,p.ZP)(function(F){F.tableTabs=[],F.selectTabId=i}))},containTab:function(f){return!!X().tableTabs.find(function(F){return F.entity===f})}}}});ne.ZP=J}}]);
