"use strict";(self.webpackChunkInvocationlab_ERD_Online=self.webpackChunkInvocationlab_ERD_Online||[]).push([[8132],{21242:function(w,P,e){e.r(P),e.d(P,{default:function(){return k}});var R=e(39346),u=e.n(R),T=e(9083),p=e.n(T),I=e(15241),h=e(23759),C=e(64210),E=e(24765),i=e(98404),A=e(49967),B=e(72418),D=e(37423),N=e(11793),O=e(43953),F=e.n(O),z=e(91184),G=e.n(z),K=e(63356),L=e(4341),M=e(27856),U=e(12125),Z=e(62656),y=e(51393),V=e(44766),Y=e.n(V),t=e(36422),H=function(r){return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(K.Y,{title:"\u4FEE\u6539\u9879\u76EE",trigger:(0,t.jsx)(Z.ZP,{type:"link",children:"\u4FEE\u6539"}),onFinish:function(){var a=G()(F()().mark(function d(j){return F()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return(0,y.ty)({id:r.project.id,projectName:j.projectName,description:j.description,tags:Y().join(j.tags,",")}).then(function(m){m.code===200?(r.fetchProjects(),h.ZP.success("\u4FEE\u6539\u6210\u529F")):h.ZP.error(m.message||"\u4FEE\u6539\u5931\u8D25")}),c.abrupt("return",!0);case 2:case"end":return c.stop()}},d)}));return function(d){return a.apply(this,arguments)}}(),initialValues:r.project,children:[(0,t.jsx)(L.Z,{width:"md",name:"projectName",label:"\u9879\u76EE\u540D",placeholder:"\u8BF7\u8F93\u5165\u9879\u76EE\u540D",formItemProps:{rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"},{max:100,message:"\u4E0D\u80FD\u5927\u4E8E 100 \u4E2A\u5B57\u7B26"}]}}),(0,t.jsx)(M.Z,{width:"md",name:"tags",label:"\u6807\u7B7E",placeholder:"\u8BF7\u8F93\u5165\u9879\u76EE\u6807\u7B7E,\u6309\u56DE\u8F66\u5206\u5272",formItemProps:{rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"}]},fieldProps:{mode:"tags",tokenSeparators:[","]}}),(0,t.jsx)(U.Z,{width:"md",name:"description",label:"\u9879\u76EE\u63CF\u8FF0",placeholder:"\u8BF7\u8F93\u5165\u9879\u76EE\u63CF\u8FF0",formItemProps:{rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"},{max:100,message:"\u4E0D\u80FD\u5927\u4E8E 100 \u4E2A\u5B57\u7B26"}]}})]})})},J=i.memo(H),Q=e(31117),W=function(r){return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(Q.Z,{placement:"right",title:"\u5220\u9664\u9879\u76EE",onConfirm:function(){return(0,y.th)({id:r.project.id}).then(function(){r.fetchProjects()})},okText:"\u662F",cancelText:"\u5426",children:(0,t.jsx)(Z.ZP,{type:"link",danger:!0,children:"\u5220\u9664"})})})},X=i.memo(W),$=e(37677),b=e(53382),k=function(){var g=(0,i.useState)({page:1,limit:20,total:0,type:1,projects:[],order:"createTime"}),r=p()(g,2),a=r[0],d=r[1],j=(0,i.useState)(!1),x=p()(j,2),c=x[0],m=x[1],f=function(o){m(!0),(0,A.pageProject)(o||a).then(function(n){if(m(!1),n)if(n.data){var s;d(u()(u()({},a),{},{total:n.data.total,projects:(s=n.data.records)===null||s===void 0?void 0:s.map(function(v){return u()(u()({},v),{},{avatar:"/invocationlab-erd-online-view/logo.svg"})})}))}else h.ZP.error("\u83B7\u53D6\u9879\u76EE\u4FE1\u606F\u5931\u8D25")})};return(0,i.useEffect)(function(){f(a)},[a.page,a.order]),(0,t.jsx)(I.Rs,{size:"large",loading:c,toolbar:{menu:{items:[{key:"tab1",label:(0,t.jsx)("span",{children:"\u4E2A\u4EBA\u9879\u76EE"})}]},search:{placeholder:"\u9879\u76EE\u540D",onSearch:function(o){(0,b.searchProjects)(f,a,o)}},actions:[(0,t.jsx)(N.Z,{fetchProjects:function(){return f(null)},trigger:"ant",type:1})]},rowKey:"projectName",dataSource:a.projects,pagination:{pageSize:a.limit,total:a.total,onChange:function(o,n){d(u()(u()({},a),{},{page:o,limit:n}))}},metas:{title:{dataIndex:"projectName",title:"\u9879\u76EE\u540D\u79F0"},avatar:{dataIndex:"avatar",search:!1},description:{dataIndex:"description",search:!1},subTitle:{render:function(o,n){var s;return(0,t.jsxs)(C.Z,{size:0,children:[(0,t.jsx)(E.Z,{color:"blue",children:n.type==="1"?(0,t.jsx)(B.Z,{}):(0,t.jsx)(D.Z,{})},n.projectName),(s=n.tags)===null||s===void 0?void 0:s.split(",").map(function(v,S){return(0,t.jsx)(E.Z,{color:S%2==0?"#5BD8A6":"blue",children:v},v+S)})]})},dataIndex:"type",search:!1},content:{dataIndex:"updateTime",render:function(o){return(0,t.jsx)("div",{style:{color:"#00000073"},children:o},"updateTime")}},actions:{render:function(o,n){return[(0,t.jsx)(J,{fetchProjects:function(){return f(null)},trigger:"ant",project:n},"RenameProject"+n.id),(0,t.jsx)(X,{fetchProjects:function(){return f(null)},project:n},"RemoveProject"+n.id),(0,t.jsx)($.Z,{project:n},"OpenProject"+n.id)]},search:!1}}})}}}]);
