"use strict";(self.webpackChunkInvocationlab_ERD_Online=self.webpackChunkInvocationlab_ERD_Online||[]).push([[8026,786],{80455:function(S,s,e){var r=e(76813),c=e(9009),_=e(47107),n=e(98404),m=e(50322),d=e(85016),y=e(36422),u=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],T=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],A=n.forwardRef(function(i,N){var P=i.fieldProps,l=i.children,v=i.params,O=i.proFieldProps,M=i.mode,f=i.valueEnum,p=i.request,L=i.showSearch,I=i.options,D=(0,c.Z)(i,u),h=(0,n.useContext)(m.Z);return(0,y.jsx)(d.Z,(0,r.Z)((0,r.Z)({valueEnum:(0,_.h)(f),request:p,params:v,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,r.Z)({options:I,mode:M,showSearch:L,getPopupContainer:h.getPopupContainer},P),ref:N,proFieldProps:O},D),{},{children:l}))}),E=n.forwardRef(function(i,N){var P=i.fieldProps,l=i.children,v=i.params,O=i.proFieldProps,M=i.mode,f=i.valueEnum,p=i.request,L=i.options,I=(0,c.Z)(i,T),D=(0,r.Z)({options:L,mode:M||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label"},P),h=(0,n.useContext)(m.Z);return(0,y.jsx)(d.Z,(0,r.Z)((0,r.Z)({valueEnum:(0,_.h)(f),request:p,params:v,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,r.Z)({getPopupContainer:h.getPopupContainer},D),ref:N,proFieldProps:O},I),{},{children:l}))}),a=A,t=E,o=a;o.SearchSelect=t,o.displayName="ProFormComponent",s.Z=o},76436:function(S,s,e){var r=e(76813),c=e(9009),_=e(98404),n=e(85016),m=e(36422),d=["fieldProps","proFieldProps"],y=function(T,A){var E=T.fieldProps,a=T.proFieldProps,t=(0,c.Z)(T,d);return(0,m.jsx)(n.Z,(0,r.Z)({ref:A,valueType:"textarea",fieldProps:E,proFieldProps:a},t))};s.Z=_.forwardRef(y)},47174:function(S,s,e){var r=e(76813),c=e(9009),_=e(98404),n=e(85016),m=e(36422),d=["fieldProps","proFieldProps"],y=["fieldProps","proFieldProps"],u="text",T=function(t){var o=t.fieldProps,i=t.proFieldProps,N=(0,c.Z)(t,d);return(0,m.jsx)(n.Z,(0,r.Z)({valueType:u,fieldProps:o,filedConfig:{valueType:u},proFieldProps:i},N))},A=function(t){var o=t.fieldProps,i=t.proFieldProps,N=(0,c.Z)(t,y);return(0,m.jsx)(n.Z,(0,r.Z)({valueType:"password",fieldProps:o,proFieldProps:i,filedConfig:{valueType:u}},N))},E=T;E.Password=A,E.displayName="ProFormComponent",s.Z=E},79257:function(S,s,e){e.d(s,{Z:function(){return O}});var r=e(97833),c=e.n(r),_=e(42196),n=e.n(_),m=e(91484),d=e.n(m),y=e(98404),u=e(34137),T=e(47174),A=e(80455),E=e(76436),a=JSON.parse(`{"modules":[],"profile":{"defaultFields":[{"chnname":"\u4E3B\u952EID","name":"id","typeName":"\u65E0\u7B26\u53F7\u5927\u6574\u6570","type":"BigIntUnsigned","dataType":"BIGINT UNSIGNED","remark":"","pk":true,"notNull":true,"autoIncrement":true,"relationNoShow":false,"defaultValue":"","uiHint":""},{"chnname":"\u521B\u5EFA\u4EBA\u7F16\u7801","name":"create_code","typeName":"\u53D8\u957F\u5B57\u7B26\u4E32","type":"String","dataType":"VARCHAR","remark":"(16)","pk":false,"notNull":false,"autoIncrement":false,"relationNoShow":false,"defaultValue":"","uiHint":""},{"chnname":"\u521B\u5EFA\u4EBA\u540D\u79F0","name":"create_name","typeName":"\u53D8\u957F\u5B57\u7B26\u4E32","type":"String","dataType":"VARCHAR","remark":"(32)","pk":false,"notNull":false,"autoIncrement":false,"relationNoShow":false,"defaultValue":"","uiHint":""},{"chnname":"\u521B\u5EFA\u65F6\u95F4","name":"create_time","typeName":"\u65E5\u671F\u65F6\u95F4","type":"DateTime","dataType":"DATETIME","remark":"","pk":false,"notNull":false,"autoIncrement":false,"relationNoShow":false,"defaultValue":"CURRENT_TIMESTAMP","uiHint":""},{"chnname":"\u64CD\u4F5C\u4EBA\u7F16\u7801","name":"op_code","typeName":"\u53D8\u957F\u5B57\u7B26\u4E32","type":"String","dataType":"VARCHAR","remark":"(16)","pk":false,"notNull":false,"autoIncrement":false,"relationNoShow":false,"defaultValue":"","uiHint":""},{"chnname":"\u64CD\u4F5C\u4EBA\u540D\u79F0","name":"op_name","typeName":"\u53D8\u957F\u5B57\u7B26\u4E32","type":"String","dataType":"VARCHAR","remark":"(32)","pk":false,"notNull":false,"autoIncrement":false,"relationNoShow":false,"defaultValue":"","uiHint":""},{"chnname":"\u64CD\u4F5C\u65F6\u95F4","name":"create_time","typeName":"\u65E5\u671F\u65F6\u95F4","type":"DateTime","dataType":"DATETIME","remark":"","pk":false,"notNull":false,"autoIncrement":false,"relationNoShow":false,"defaultValue":"CURRENT_TIMESTAMP","uiHint":""},{"chnname":"\u72B6\u6001\u679A\u4E3E-INVALID:0:\u5931\u6548;VALID:1:\u6709\u6548","name":"state","typeName":"\u5FAE\u5C0F\u6574\u6570","type":"TinyInt","dataType":"TINYINT","remark":"(4)","pk":false,"notNull":true,"autoIncrement":false,"relationNoShow":false,"defaultValue":1,"uiHint":""},{"chnname":"\u5220\u9664\u6807\u8BC6\u679A\u4E3E-DEL:0:\u5DF2\u5220\u9664;NORMAL:1:\u6B63\u5E38","name":"state","typeName":"\u5FAE\u5C0F\u6574\u6570","type":"TinyInt","dataType":"TINYINT","remark":"(4)","pk":false,"notNull":true,"autoIncrement":false,"relationNoShow":false,"defaultValue":1,"uiHint":""}]},"dataTypeDomains":{"datatype":[{"name":"\u53D8\u957F\u5B57\u7B26\u4E32","code":"String","apply":{"java":{"type":"String"},"mysql":{"type":"VARCHAR"},"oracle":{"type":"NVARCHAR2"},"sqlserver":{"type":"NVARCHAR"},"JAVA":{"type":"String"},"MYSQL":{"type":"VARCHAR"},"ORACLE":{"type":"NVARCHAR2"},"SQLServer":{"type":"NVARCHAR"},"PostgreSQL":{"type":"VARCHAR"}}},{"name":"\u5B57\u7B26\u4E32","code":"Char","apply":{"java":{"type":"String"},"mysql":{"type":"CHAR"},"oracle":{"type":"CHAR"},"sqlserver":{"type":"CHAR"},"JAVA":{"type":"String"},"MYSQL":{"type":"CHAR"},"ORACLE":{"type":"CHAR"},"SQLServer":{"type":"CHAR"},"PostgreSQL":{"type":"CHAR"}}},{"name":"\u6587\u672C","code":"Text","apply":{"java":{"type":"String"},"mysql":{"type":"TEXT"},"oracle":{"type":"CLOB"},"sqlserver":{"type":"NTEXT"},"JAVA":{"type":"String"},"MYSQL":{"type":"TEXT"},"ORACLE":{"type":"CLOB"},"SQLServer":{"type":"NTEXT"},"PostgreSQL":{"type":"TEXT"}}},{"name":"\u6D6E\u70B9\u6570","code":"Double","apply":{"java":{"type":"Double"},"mysql":{"type":"DECIMAL"},"oracle":{"type":"NUMBER"},"sqlserver":{"type":"DECIMAL"},"JAVA":{"type":"Double"},"MYSQL":{"type":"DECIMAL"},"ORACLE":{"type":"NUMBER"},"SQLServer":{"type":"DECIMAL"},"PostgreSQL":{"type":"DECIMAL"}}},{"name":"\u5FAE\u5C0F\u6574\u6570","code":"TinyInt","apply":{"java":{"type":"Integer"},"mysql":{"type":"TINYINT"},"oracle":{"type":"TINYINT"},"sqlserver":{"type":"TINYINT"},"JAVA":{"type":"Integer"},"MYSQL":{"type":"TINYINT"},"ORACLE":{"type":"TINYINT"},"SQLServer":{"type":"TINYINT"},"PostgreSQL":{"type":"TINYINT"}}},{"name":"\u65E0\u7B26\u53F7\u5FAE\u5C0F\u6574\u6570","code":"TinyIntUnsigned","apply":{"java":{"type":"Integer"},"mysql":{"type":"TINYINT UNSIGNED"},"oracle":{"type":"TINYINT UNSIGNED"},"sqlserver":{"type":"TINYINT UNSIGNED"},"JAVA":{"type":"Integer"},"MYSQL":{"type":"TINYINT UNSIGNED"},"ORACLE":{"type":"TINYINT UNSIGNED"},"SQLServer":{"type":"TINYINT UNSIGNED"},"PostgreSQL":{"type":"TINYINT UNSIGNED"}}},{"name":"\u5C0F\u6574\u6570","code":"SmallInt","apply":{"java":{"type":"Integer"},"mysql":{"type":"SMALLINT"},"oracle":{"type":"SMALLINT"},"sqlserver":{"type":"SMALLINT"},"JAVA":{"type":"Integer"},"MYSQL":{"type":"SMALLINT"},"ORACLE":{"type":"SMALLINT"},"SQLServer":{"type":"SMALLINT"},"PostgreSQL":{"type":"SMALLINT"}}},{"name":"\u65E0\u7B26\u53F7\u5C0F\u6574\u6570","code":"SmallIntUnsigned","apply":{"java":{"type":"Integer"},"mysql":{"type":"SMALLINT UNSIGNED"},"oracle":{"type":"NUMBER UNSIGNED"},"sqlserver":{"type":"SMALLINT UNSIGNED"},"JAVA":{"type":"Integer"},"MYSQL":{"type":"SMALLINT UNSIGNED"},"ORACLE":{"type":"NUMBER UNSIGNED"},"SQLServer":{"type":"SMALLINT UNSIGNED"},"PostgreSQL":{"type":"SMALLINT UNSIGNED"}}},{"name":"\u6574\u6570","code":"Integer","apply":{"java":{"type":"Integer"},"mysql":{"type":"INT"},"oracle":{"type":"INT"},"sqlserver":{"type":"INT"},"JAVA":{"type":"Integer"},"MYSQL":{"type":"INT"},"ORACLE":{"type":"INT"},"SQLServer":{"type":"INT"},"PostgreSQL":{"type":"INT"}}},{"name":"\u65E0\u7B26\u53F7\u6574\u6570","code":"IntegerUnsigned","apply":{"java":{"type":"Long"},"mysql":{"type":"INT UNSIGNED"},"oracle":{"type":"INT UNSIGNED"},"sqlserver":{"type":"INT UNSIGNED"},"JAVA":{"type":"Long"},"MYSQL":{"type":"INT UNSIGNED"},"ORACLE":{"type":"INT UNSIGNED"},"SQLServer":{"type":"INT UNSIGNED"},"PostgreSQL":{"type":"INT UNSIGNED"}}},{"name":"\u5927\u6574\u6570","code":"BigInt","apply":{"java":{"type":"Long"},"mysql":{"type":"BIGINT"},"oracle":{"type":"NUMBER"},"sqlserver":{"type":"BIGINT"},"JAVA":{"type":"Long"},"MYSQL":{"type":"BIGINT"},"ORACLE":{"type":"NUMBER"},"SQLServer":{"type":"BIGINT"},"PostgreSQL":{"type":"BIGINT"}}},{"name":"\u65E0\u7B26\u53F7\u5927\u6574\u6570","code":"BigIntUnsigned","apply":{"java":{"type":"Long"},"mysql":{"type":"BIGINT UNSIGNED"},"oracle":{"type":"NUMBER UNSIGNED"},"sqlserver":{"type":"BIGINT UNSIGNED"},"JAVA":{"type":"Long"},"MYSQL":{"type":"BIGINT UNSIGNED"},"ORACLE":{"type":"NUMBER UNSIGNED"},"SQLServer":{"type":"BIGINT UNSIGNED"},"PostgreSQL":{"type":"BIGINT UNSIGNED"}}},{"name":"\u65E5\u671F","code":"Date","apply":{"java":{"type":"Date"},"mysql":{"type":"DATE"},"oracle":{"type":"DATE"},"sqlserver":{"type":"DATE"},"JAVA":{"type":"Date"},"MYSQL":{"type":"DATE"},"ORACLE":{"type":"DATE"},"SQLServer":{"type":"DATE"},"PostgreSQL":{"type":"DATE"}}},{"name":"\u65E5\u671F","code":"Timestamp","apply":{"java":{"type":"Date"},"mysql":{"type":"TIMESTAMP"},"oracle":{"type":"TIMESTAMP"},"sqlserver":{"type":"TIMESTAMP"},"JAVA":{"type":"Date"},"MYSQL":{"type":"TIMESTAMP"},"ORACLE":{"type":"TIMESTAMP"},"SQLServer":{"type":"TIMESTAMP"},"PostgreSQL":{"type":"TIMESTAMP"}}},{"name":"\u5E74\u4EFD","code":"Year","apply":{"java":{"type":"Date"},"mysql":{"type":"YEAR"},"oracle":{"type":"DATE"},"sqlserver":{"type":"DATE"},"JAVA":{"type":"Date"},"MYSQL":{"type":"YEAR"},"ORACLE":{"type":"DATE"},"SQLServer":{"type":"DATE"},"PostgreSQL":{"type":"DATE"}}},{"name":"\u65E5\u671F\u65F6\u95F4","code":"DateTime","apply":{"java":{"type":"Date"},"mysql":{"type":"DATETIME"},"oracle":{"type":"DATE"},"sqlserver":{"type":"DATE"},"JAVA":{"type":"Date"},"MYSQL":{"type":"DATETIME"},"ORACLE":{"type":"DATE"},"SQLServer":{"type":"DATE"},"PostgreSQL":{"type":"DATE"}}}],"database":[{"code":"MYSQL","template":"DROP TABLE \`{{=it.entity.title}}\`;\\n$blankline\\nCREATE TABLE \`{{=it.entity.title}}\`(\\n{{ pkList = [] ; }}\\n{{~it.entity.fields:field:index}}\\n    {{? field.pk }}{{ pkList.push(field.name) }}{{?}}\\n    \`{{=field.name}}\` {{=field.type}} {{= field.pk ? 'NOT NULL' : '' }} COMMENT '{{=it.func.join(field.chnname,field.remark,';')}}' {{= index < it.entity.fields.length-1 ? ',' : ( pkList.length>0 ? ',' :'' ) }}\\n{{~}}\\n{{? pkList.length >0 }}\\n    PRIMARY KEY ({{~pkList:pkName:i}}{{= pkName }}{{= i<pkList.length-1 ? ',' : '' }}{{~}})\\n{{?}}\\n) COMMENT = '{{=it.func.join(it.entity.chnname,it.entity.remark,';') }}'","fileShow":true,"defaultDatabase":true,"createTableTemplate":"CREATE TABLE \`{{=it.entity.title}}\`(\\n{{ pkList = [] ; }}\\n{{~it.entity.fields:field:index}}\\n    {{? field.pk }}{{ pkList.push(field.name) }}{{?}}\\n    \`{{=field.name}}\` {{=field.dataType}}{{=field.remark}} {{= field.notNull ? 'NOT NULL' : '' }} {{= field.autoIncrement ? 'AUTO_INCREMENT' : '' }} {{= field.defaultValue ? it.func.join('DEFAULT',field.defaultValue,' ') : '' }} COMMENT '{{=it.func.join(field.chnname,' ')}}' {{= index < it.entity.fields.length-1 ? ',' : ( pkList.length>0 ? ',' :'' ) }}\\n{{~}}\\n{{? pkList.length >0 }}\\n    PRIMARY KEY ({{~pkList:pkName:i}}{{= pkName }}{{= i<pkList.length-1 ? ',' : '' }}{{~}})\\n{{?}}\\n) COMMENT = '{{=it.func.join(it.entity.chnname,' ') }}';{{=it.separator}}\\n$blankline\\n","deleteTableTemplate":"DROP TABLE \`{{=it.entity.title}}\`;{{=it.separator}}","rebuildTableTemplate":"create table ERD_UP_{{=it.oldEntity.title}}\\nas select * from {{=it.oldEntity.title}};{{=it.separator}}\\n$blankline\\n\\ndrop table {{=it.oldEntity.title}};{{=it.separator}}\\n$blankline\\n\\nCREATE TABLE {{=it.newEntity.title}}(\\n{{ pkList = [] ; }}\\n{{~it.newEntity.fields:field:index}}\\n    {{? field.pk }}{{ pkList.push(field.name) }}{{?}}\\n    \`{{=field.name}}\` {{=field.type}} {{= field.notNull ? 'NOT NULL' : '' }} COMMENT '{{=it.func.join(field.chnname,field.remark,';')}}' {{= index < it.newEntity.fields.length-1 ? ',' : ( pkList.length>0 ? ',' :'' ) }}\\n{{~}}\\n{{? pkList.length >0 }}\\n    PRIMARY KEY ({{~pkList:pkName:i}}{{= pkName }}{{= i<pkList.length-1 ? ',' : '' }}{{~}})\\n{{?}}\\n) COMMENT = '{{=it.func.join(it.newEntity.chnname,it.newEntity.remark,';') }}';{{=it.separator}}\\n$blankline\\n\\n{{ sameCols = it.func.intersect(it.newEntity.fields,it.oldEntity.fields) ;}}\\ninsert into {{=it.newEntity.title}}(\\n{{~sameCols:field:index}}\\n    \`{{=field.name}}\`{{? index<sameCols.length-1}},{{?}}\\n{{~}}\\n) \\nselect \\n{{~sameCols:field:index}}\\n    \`{{=field.name}}\`{{? index<sameCols.length-1}},{{?}}\\n{{~}}\\nfrom ERD_UP_{{=it.oldEntity.title}};{{=it.separator}}\\n$blankline\\n\\ndrop table ERD_UP_{{=it.oldEntity.title}};{{=it.separator}}\\n$blankline\\n{{~it.newEntity.indexs:index}}\\nALTER TABLE {{=it.newEntity.title}} ADD {{? index.isUnique}}UNIQUE{{??}}INDEX{{?}} {{=index.name}}({{=it.func.join(...index.fields,',')}});{{=it.separator}}\\n{{~}}","createFieldTemplate":"ALTER TABLE \`{{=it.entity.title}}\` ADD COLUMN \`{{=it.field.name}}\` {{=it.field.type}} {{? it.field.notNull}}NOT NULL{{?}} {{? it.field.defaultValue}}DEFAULT {{? null==it.field.defaultValue}}NULL{{??}}{{=it.field.defaultValue}}{{?}}{{?}} {{? it.field.autoIncrement}}AUTO_INCREMENT{{?}} {{? it.field.pk}}PRIMARY KEY{{?}} {{? it.field.chnname}}COMMENT '{{=it.field.chnname}}'{{?}} {{? it.field.addAfter}}AFTER {{=it.field.addAfter}}{{?}};{{=it.separator}}","updateFieldTemplate":"ALTER TABLE \`{{=it.entity.title}}\` MODIFY COLUMN \`{{=it.field.name}}\` {{=it.field.type}} {{? it.field.notNull}}NOT NULL{{?}} {{? it.field.defaultValue}}DEFAULT {{? null==it.field.defaultValue}}NULL{{?? 'CURRENT_TIMESTAMP' == it.field.defaultValue}}CURRENT_TIMESTAMP{{??}}{{=it.field.defaultValue}}{{?}} {{?}} {{? it.field.autoIncrement}}AUTO_INCREMENT{{?}} {{? it.field.chnname}}COMMENT '{{=it.field.chnname}}'{{?}};{{=it.separator}}","deleteFieldTemplate":"ALTER TABLE \`{{=it.entity.title}}\` DROP \`{{=it.field.name}}\`;{{=it.separator}}","deleteIndexTemplate":"ALTER TABLE \`{{=it.entity.title}}\` DROP INDEX \`{{=it.index.name}}\`;{{=it.separator}}","createIndexTemplate":"ALTER TABLE \`{{=it.entity.title}}\` ADD {{? it.index.isUnique}}UNIQUE{{??}}INDEX{{?}} \`{{=it.index.name}}\`({{=it.func.join(...it.index.fields,',')}});{{=it.separator}}","updateTableComment":"ALTER TABLE \`{{=it.entity.title}}\` COMMENT '{{=it.entity.chnname}}';{{=it.separator}}"},{"code":"ORACLE","template":"DROP TABLE \`{{=it.entity.title}}\`;{{=it.separator}}\\n$blankline\\nCREATE TABLE \`{{=it.entity.title}}\`(\\n{{ pkList = [] ; }}\\n{{~it.entity.fields:field:index}}\\n    {{? field.pk }}{{ pkList.push(field.name) }}{{?}}\\n    \`{{=field.name}}\` {{=field.type}}  {{= field.pk ? 'NOT NULL' : '' }} {{= index < it.entity.fields.length-1 ? ',' : ( pkList.length>0 ? ',' :'' ) }}\\n{{~}}\\n{{? pkList.length >0 }}\\n    PRIMARY KEY ({{~pkList:pkName:i}}{{= pkName }}{{= i<pkList.length-1 ? ',' : '' }}{{~}})\\n{{?}}\\n);{{=it.separator}}\\n$blankline\\nCOMMENT ON TABLE \`{{=it.entity.title}}\` IS '{{=it.func.join(it.entity.chnname,it.entity.remark,';') }}';{{=it.separator}}\\n{{~it.entity.fields:field:index}}\\nCOMMENT ON COLUMN \`{{=it.entity.title}}\`.\`{{=field.name}}\` IS '{{=it.func.join(field.chnname,field.remark,';')}}';{{=it.separator}}\\n{{~}}","createTableTemplate":"CREATE TABLE \`{{=it.entity.title}}\`(\\n{{ pkList = [] ; }}\\n{{~it.entity.fields:field:index}}\\n    {{? field.pk }}{{ pkList.push(field.name) }}{{?}}\\n    \`{{=field.name}}\` {{=field.type}}{{? field.defaultValue}} DEFAULT {{=field.defaultValue}}{{?}}{{= field.notNull ? ' NOT NULL' : '' }}{{= index < it.entity.fields.length-1 ? ',' : ( pkList.length>0 ? ',' :'' ) }}\\n{{~}}\\n{{? pkList.length >0 }}\\n    PRIMARY KEY ({{~pkList:pkName:i}}{{= pkName }}{{= i<pkList.length-1 ? ',' : '' }}{{~}})\\n{{?}}\\n);{{=it.separator}}\\n$blankline\\n{{? it.entity.chnname || it.entity.remark}}COMMENT ON TABLE \`{{=it.entity.title}}\` IS {{? it.entity.remark}}'{{=it.entity.remark}}'{{??}}'{{=it.entity.chnname}}'{{?}};{{=it.separator}}{{?}}\\n{{~it.entity.fields:field:index}}\\n{{? field.chnname || field.remark}}COMMENT ON COLUMN \`{{=it.entity.title}}\`.\`{{=field.name}}\` IS {{? field.remark}}'{{=field.remark}}'{{??}}'{{=field.chnname}}'{{?}};{{=it.separator}}{{?}}\\n{{~}}","deleteTableTemplate":"DROP TABLE \`{{=it.entity.title}}\`;{{=it.separator}}\\r\\n$blankline","rebuildTableTemplate":"CREATE TABLE ERD_UP_{{=it.oldEntity.title}}\\nAS SELECT * FROM {{=it.oldEntity.title}};{{=it.separator}}\\n$blankline\\nDROP TABLE {{=it.oldEntity.title}};{{=it.separator}}\\n$blankline\\nCREATE TABLE {{=it.newEntity.title}}(\\n{{ pkList = [] ; }}{{~it.newEntity.fields:field:index}}{{? field.pk }}{{ pkList.push(field.name) }}{{?}}    \`{{=field.name}}\` {{=field.type}}{{? field.defaultValue}} DEFAULT {{=field.defaultValue}}{{?}}{{= field.notNull ? ' NOT NULL' : '' }}{{= index < it.newEntity.fields.length-1 ? ',' : ( pkList.length>0 ? ',' :'' ) }}\\n{{~}}{{? pkList.length >0 }}    PRIMARY KEY ({{~pkList:pkName:i}}{{= pkName }}{{= i<pkList.length-1 ? ',' : '' }}{{~}}){{?}}\\n);{{=it.separator}}\\n$blankline\\n{{? it.newEntity.chnname || it.newEntity.remark}}COMMENT ON TABLE {{=it.newEntity.title}} IS {{? it.newEntity.remark}}'{{=it.entity.remark}}'{{??}}'{{=it.newEntity.chnname}}'{{?}};{{?}}{{=it.separator}}\\n{{~it.newEntity.fields:field:index}}\\n{{? field.chnname || field.remark}}COMMENT ON COLUMN {{=it.newEntity.title}}.\`{{=field.name}}\` IS {{? field.remark}}'{{=field.remark}}'{{??}}'{{=field.chnname}}'{{?}};{{?}}{{=it.separator}}\\n{{~}}\\n{{ sameCols = it.func.intersect(it.newEntity.fields,it.oldEntity.fields) ;}}\\n$blankline\\nINSERT INTO {{=it.newEntity.title}}(\\n{{~sameCols:field:index}}   \`{{=field.name}}\`{{? index<sameCols.length-1}},{{?}}\\n{{~}}) \\nSELECT\\n{{~sameCols:field:index}}   \`{{=field.name}}\`{{? index<sameCols.length-1}},{{?}}\\n{{~}}FROM ERD_UP_{{=it.oldEntity.title}};{{=it.separator}}\\n\\nDROP TABLE ERD_UP_{{=it.oldEntity.title}};{{=it.separator}}\\n{{~it.newEntity.indexs:index}}\\nCREATE{{? index.isUnique}} UNIQUE{{?}} INDEX {{=index.name}} ON {{=it.newEntity.title}}({{=it.func.join(index.fields,',')}});{{=it.separator}}\\n{{~}}","createFieldTemplate":"ALTER TABLE \`{{=it.entity.title}}\` ADD(\`{{=it.field.name}}\` {{=it.field.type}}{{? it.field.defaultValue}} DEFAULT {{=it.field.defaultValue}}{{?}}{{? it.field.notNull}} NOT NULL{{?}});{{=it.separator}}\\r\\n{{? it.field.chnname || it.field.remark}}COMMENT ON COLUMN \`{{=it.entity.title}}\`.\`{{=it.field.name}}\` IS {{? it.field.remark}}'{{=it.field.remark}}'{{??}}'{{=it.field.chnname}}'{{?}};{{=it.separator}}{{?}}\\r\\n$blankline","updateFieldTemplate":"ALTER TABLE \`{{=it.entity.title}}\` MODIFY(\`{{=it.field.name}}\` {{=it.field.type}}{{? it.field.defaultValue}} DEFAULT {{=it.field.defaultValue}}{{?}}{{? it.field.notNull}} NOT NULL{{?}});{{=it.separator}}\\r\\n{{? it.field.chnname || it.field.remark}}COMMENT ON COLUMN \`{{=it.entity.title}}\`.\`{{=it.field.name}}\` IS {{? it.field.remark}}'{{=it.field.remark}}'{{??}}'{{=it.field.chnname}}'{{?}};{{=it.separator}}{{=it.separator}}{{?}}\\r\\n$blankline","deleteFieldTemplate":"ALTER TABLE \`{{=it.entity.title}}\` DROP(\`{{=it.field.name}}\`);{{=it.separator}}\\r\\n$blankline","deleteIndexTemplate":"DROP INDEX \`{{=it.entity.title}}\`.\`{{=it.index.name}}\`;{{=it.separator}}\\r\\n$blankline","createIndexTemplate":"CREATE{{? it.index.isUnique}} UNIQUE{{?}} INDEX \`{{=it.index.name}}\` ON \`{{=it.entity.title}}\`({{=it.func.join(it.index.fields,',')}});{{=it.separator}}\\r\\n$blankline","updateTableComment":"{{? it.entity.chnname || it.entity.remark}}COMMENT ON TABLE \`{{=it.entity.title}}\` IS {{? it.entity.remark}}'{{=it.entity.remark}}'{{??}}'{{=it.entity.chnname}}'{{?}};{{=it.separator}}{{?}}\\r\\n$blankline"},{"code":"SQLServer","createTableTemplate":"CREATE TABLE \`{{=it.entity.title}}\`(\\n{{ pkList = [] ; }}\\n{{~it.entity.fields:field:index}}\\n    {{? field.pk }}{{ pkList.push(field.name) }}{{?}}\\n    \`{{=field.name}}\` {{=field.type}} {{= field.notNull ? 'NOT NULL' : '' }} {{= field.autoIncrement ? 'IDENTITY(1,1)' : '' }} {{= field.defaultValue ? it.func.join('DEFAULT',field.defaultValue,' ') : '' }}  {{= index < it.entity.fields.length-1 ? ',' : ( pkList.length>0 ? ',' :'' ) }}\\n{{~}}\\n{{? pkList.length >0 }}\\n    CONSTRAINT PK_\`{{=it.entity.title}}\` PRIMARY KEY CLUSTERED ({{~pkList:pkName:i}}{{= pkName }} ASC {{= i<pkList.length-1 ? ',' : '' }}{{~}}) ON [PRIMARY] \\n{{?}}\\n) ;{{=it.separator}}\\n\\n$blankline\\nEXECUTE sp_addextendedproperty N'MS_Description', '{{= it.entity.chnname || it.entity.remark}}', N'user', N'dbo', N'table', N'\`{{=it.entity.title}}\`', NULL, NULL;{{=it.separator}}\\n{{~it.entity.fields:field:index}}\\n{{? field.chnname || field.remark}}EXECUTE sp_addextendedproperty N'MS_Description', {{? field.remark}}'{{=field.remark}}'{{??}}'{{=field.chnname}}'{{?}}, N'user', N'dbo', N'table', N'\`{{=it.entity.title}}\`', N'column', N'\`{{=field.name}}\`';{{=it.separator}}{{?}}\\n{{~}}\\n"},{"code":"PostgreSQL","template":"DROP TABLE \`{{=it.entity.title}}\`;\\n$blankline\\nCREATE TABLE \`{{=it.entity.title}}\`(\\n{{ pkList = [] ; }}\\n{{~it.entity.fields:field:index}}\\n    {{? field.pk }}{{ pkList.push(field.name) }}{{?}}\\n    \`{{=field.name}}\` {{=field.type}} {{= field.pk ? 'NOT NULL' : '' }} COMMENT '{{=it.func.join(field.chnname,field.remark,';')}}' {{= index < it.entity.fields.length-1 ? ',' : ( pkList.length>0 ? ',' :'' ) }}\\n{{~}}\\n{{? pkList.length >0 }}\\n    PRIMARY KEY ({{~pkList:pkName:i}}{{= pkName }}{{= i<pkList.length-1 ? ',' : '' }}{{~}})\\n{{?}}\\n) COMMENT = '{{=it.func.join(it.entity.chnname,it.entity.remark,';') }}'","createTableTemplate":"CREATE TABLE \`{{=it.entity.title}}\`(\\n{{ pkList = [] ; }}\\n{{~it.entity.fields:field:index}}\\n    {{? field.pk }}{{ pkList.push(field.name) }}{{?}}\\n    \`{{=field.name}}\` {{=field.type}}{{? field.defaultValue}} DEFAULT {{=field.defaultValue}}{{?}}{{= field.notNull ? ' NOT NULL' : '' }}{{= index < it.entity.fields.length-1 ? ',' : ( pkList.length>0 ? ',' :'' ) }}\\n{{~}}\\n{{? pkList.length >0 }}\\n    PRIMARY KEY ({{~pkList:pkName:i}}{{= pkName }}{{= i<pkList.length-1 ? ',' : '' }}{{~}})\\n{{?}}\\n);{{=it.separator}}\\n$blankline\\n{{? it.entity.chnname || it.entity.remark}}COMMENT ON TABLE \`{{=it.entity.title}}\` IS {{? it.entity.remark}}'{{=it.entity.remark}}'{{??}}'{{=it.entity.chnname}}'{{?}};{{=it.separator}}{{?}}\\n{{~it.entity.fields:field:index}}\\n{{? field.chnname || field.remark}}COMMENT ON COLUMN \`{{=it.entity.title}}\`.\`{{=field.name}}\` IS {{? field.remark}}'{{=field.remark}}'{{??}}'{{=field.chnname}}'{{?}};{{=it.separator}}{{?}}\\n{{~}}","deleteTableTemplate":"DROP TABLE \`{{=it.entity.title}}\`;{{=it.separator}}","rebuildTableTemplate":"create table ERD_UP_{{=it.oldEntity.title}}\\nas select * from {{=it.oldEntity.title}};{{=it.separator}}\\n$blankline\\n\\ndrop table {{=it.oldEntity.title}};{{=it.separator}}\\n$blankline\\n\\nCREATE TABLE {{=it.newEntity.title}}(\\n{{ pkList = [] ; }}\\n{{~it.newEntity.fields:field:index}}\\n    {{? field.pk }}{{ pkList.push(field.name) }}{{?}}\\n    \`{{=field.name}}\` {{=field.type}} {{= field.notNull ? 'NOT NULL' : '' }} COMMENT '{{=it.func.join(field.chnname,field.remark,';')}}' {{= index < it.newEntity.fields.length-1 ? ',' : ( pkList.length>0 ? ',' :'' ) }}\\n{{~}}\\n{{? pkList.length >0 }}\\n    PRIMARY KEY ({{~pkList:pkName:i}}{{= pkName }}{{= i<pkList.length-1 ? ',' : '' }}{{~}})\\n{{?}}\\n) COMMENT = '{{=it.func.join(it.newEntity.chnname,it.newEntity.remark,';') }}';{{=it.separator}}\\n$blankline\\n\\n{{ sameCols = it.func.intersect(it.newEntity.fields,it.oldEntity.fields) ;}}\\ninsert into {{=it.newEntity.title}}(\\n{{~sameCols:field:index}}\\n    \`{{=field.name}}\`{{? index<sameCols.length-1}},{{?}}\\n{{~}}\\n) \\nselect \\n{{~sameCols:field:index}}\\n    \`{{=field.name}}\`{{? index<sameCols.length-1}},{{?}}\\n{{~}}\\nfrom ERD_UP_{{=it.oldEntity.title}};{{=it.separator}}\\n$blankline\\n\\ndrop table ERD_UP_{{=it.oldEntity.title}};{{=it.separator}}","createFieldTemplate":"ALTER TABLE \`{{=it.entity.title}}\` ADD COLUMN \`{{=it.field.name}}\` {{=it.field.type}} {{? it.field.notNull}}NOT NULL{{?}} {{? it.field.defaultValue}}DEFAULT {{? null==it.field.defaultValue}}NULL{{??}}{{=it.field.defaultValue}}{{?}}{{?}} {{? it.field.autoIncrement}}AUTO_INCREMENT{{?}} {{? it.field.pk}}PRIMARY KEY{{?}} {{? it.field.chnname}}COMMENT '{{=it.field.chnname}}'{{?}} {{? it.field.addAfter}}AFTER {{=it.field.addAfter}}{{?}};{{=it.separator}}","updateFieldTemplate":"ALTER TABLE \`{{=it.entity.title}}\` MODIFY COLUMN \`{{=it.field.name}}\` {{=it.field.type}} {{? it.field.notNull}}NOT NULL{{?}} {{? it.field.defaultValue}}DEFAULT {{? null==it.field.defaultValue}}NULL{{??}}{{=it.field.defaultValue}}{{?}}{{?}} {{? it.field.autoIncrement}}AUTO_INCREMENT{{?}} {{? it.field.chnname}}COMMENT '{{=it.field.chnname}}'{{?}};{{=it.separator}}","deleteFieldTemplate":"ALTER TABLE \`{{=it.entity.title}}\` DROP \`{{=it.field.name}}\`;{{=it.separator}}","deleteIndexTemplate":"ALTER TABLE \`{{=it.entity.title}}\` DROP INDEX \`{{=it.index.name}}\`;{{=it.separator}}","createIndexTemplate":"ALTER TABLE \`{{=it.entity.title}}\` ADD {{? it.index.isUnique}}UNIQUE{{??}}INDEX{{?}} \`{{=it.index.name}}\`({{=it.func.join(...it.index.fields,',')}});{{=it.separator}}","updateTableComment":"ALTER TABLE \`{{=it.entity.title}}\` COMMENT '{{=it.entity.chnname}}';{{=it.separator}}"},{"code":"JAVA","template":"package group.rober.erd.{{=it.module.name}}.entity;\\n$blankline\\nimport javax.persistence.*;\\nimport java.io.Serializable;\\nimport java.util.Date;\\n$blankline\\n$blankline\\n\\n/** {{=it.entity.chnname}} */\\n@Table(name=\\"\`{{=it.entity.title}}\`\\")\\npublic class {{=it.func.camel(it.entity.title,true) }} implements Serializable,Cloneable{\\n{{~it.entity.fields:field:index}}\\n    /** {{=it.func.join(field.chnname,field.remark,';')}} */\\n    {{? field.pk }}\\n    @Id\\n    @GeneratedValue\\n    {{?}}\\n    private {{=field.type}} {{=it.func.camel(field.name,false)}} ;\\n{{~}}\\n$blankline\\n{{~it.entity.fields:field:index}}\\n    /** {{=it.func.join(field.chnname,field.remark,';')}} */\\n    public {{=field.type}} get{{=it.func.camel(field.name,true)}}(){\\n        return this.{{=it.func.camel(field.name,false)}};\\n    }\\n    /** {{=it.func.join(field.chnname,field.remark,';')}} */\\n    public void set{{=it.func.camel(field.name,true)}}({{=field.type}} {{= it.func.camel(field.name,false) }}){\\n        this.{{=it.func.camel(field.name,false)}} = {{= it.func.camel(field.name,false) }};\\n    }\\n{{~}}\\n}","createTableTemplate":"package group.rober.erd.{{=it.module.name}}.entity;\\n$blankline\\nimport javax.persistence.*;\\nimport java.io.Serializable;\\nimport java.util.Date;\\n$blankline\\n$blankline\\n@Table(name=\\"\`{{=it.entity.title}}\`\\")\\npublic class {{=it.func.camel(it.entity.title,true) }} implements Serializable,Cloneable{\\n{{~it.entity.fields:field:index}}\\n    /** {{=it.func.join(field.chnname,field.remark,';')}} */\\n    {{? field.pk }}\\n    @Id\\n    @GeneratedValue\\n    {{?}}\\n    private {{=field.type}} {{=it.func.camel(field.name,false)}} ;\\n{{~}}\\n$blankline\\n{{~it.entity.fields:field:index}}\\n    /** {{=it.func.join(field.chnname,field.remark,';')}} */\\n    public {{=field.type}} get{{=it.func.camel(field.name,true)}}(){\\n        return this.{{=it.func.camel(field.name,false)}};\\n    }\\n    /** {{=it.func.join(field.chnname,field.remark,';')}} */\\n    public void set{{=it.func.camel(field.name,true)}}({{=field.type}} {{= it.func.camel(field.name,false) }}){\\n        this.{{=it.func.camel(field.name,false)}} = {{= it.func.camel(field.name,false) }};\\n    }\\n{{~}}\\n}","deleteTableTemplate":"","rebuildTableTemplate":"","createFieldTemplate":"","updateFieldTemplate":"","deleteFieldTemplate":"","deleteIndexTemplate":"","createIndexTemplate":"","updateTableComment":""}]}}`),t=e(26774),o=e(44766),i=e.n(o),N=e(78),P=e(94654),l=e(36422),v=function(f){var p={projectName:"",description:"",tags:"",projectJSON:d()({},a),configJSON:{synchronous:{upgradeType:"increment"}}},L=function(D){};return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(u.Y,{title:"\u65B0\u589E\u9879\u76EE",trigger:(0,l.jsx)(t.ZP,{type:"primary",children:"\u65B0\u5EFA"}),onFinish:function(){var I=n()(c()().mark(function D(h){return c()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return f.type===1?(0,N.B)(d()(d()({},p),{},{projectName:h.projectName,description:h.description,tags:i().join(h.tags,",")})).then(function(){f.fetchProjects()}):(0,P.ox)(d()(d()({},p),{},{projectName:h.projectName,description:h.description,tags:i().join(h.tags,",")})).then(function(){f.fetchProjects()}),R.abrupt("return",!0);case 2:case"end":return R.stop()}},D)}));return function(D){return I.apply(this,arguments)}}(),children:[(0,l.jsx)(T.Z,{width:"md",name:"projectName",label:"\u9879\u76EE\u540D",placeholder:"\u8BF7\u8F93\u5165\u9879\u76EE\u540D",formItemProps:{rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"},{max:100,message:"\u4E0D\u80FD\u5927\u4E8E 100 \u4E2A\u5B57\u7B26"}]}}),(0,l.jsx)(A.Z,{width:"md",name:"tags",label:"\u6807\u7B7E",placeholder:"\u8BF7\u8F93\u5165\u9879\u76EE\u6807\u7B7E,\u6309\u56DE\u8F66\u5206\u5272",formItemProps:{rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"}]},fieldProps:{mode:"tags",onChange:L,tokenSeparators:[","]}}),(0,l.jsx)(E.Z,{width:"md",name:"description",label:"\u9879\u76EE\u63CF\u8FF0",placeholder:"\u8BF7\u8F93\u5165\u9879\u76EE\u63CF\u8FF0",formItemProps:{rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"},{max:100,message:"\u4E0D\u80FD\u5927\u4E8E 100 \u4E2A\u5B57\u7B26"}]}})]})})},O=y.memo(v)},71016:function(S,s,e){var r=e(98404),c=e(26774),_=e(71793),n=e(2981),m=e(36422),d=function(u){return(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(c.ZP,{type:"primary",ghost:!0,onClick:function(){_.LS("erd:projectId",u.project.id),n.m.push({pathname:"/design/table/model"})},children:"\u6253\u5F00\u6A21\u578B"})})};s.Z=r.memo(d)},27447:function(S,s,e){e.r(s),e.d(s,{searchProjects:function(){return i}});var r=e(9116),c=e.n(r),_=e(91484),n=e.n(_),m=e(56037),d=e(5049),y=e(38297),u=e(81152),T=e(98404),A=e(38066),E=e(11614),a=e(71016),t=e(78),o=e(36422);function i(N,P,l){N(n()(n()({},P),{},{projectName:l}))}s.default=function(){var N=(0,T.useState)({page:1,limit:6,total:0,projects:[],order:"updateTime"}),P=c()(N,2),l=P[0],v=P[1],O=function(f){(0,t.LD)(f||l).then(function(p){if(p)if(p.data){var L;v(n()(n()({},l),{},{total:p.data.total,projects:(L=p.data.records)===null||L===void 0?void 0:L.map(function(I){return n()(n()({},I),{},{avatar:"/invocationlab-erd-online-view/logo.svg"})})}))}else d.ZP.error("\u83B7\u53D6\u9879\u76EE\u4FE1\u606F\u5931\u8D25")})};return(0,T.useEffect)(function(){O(l)},[l.page,l.order]),(0,o.jsx)(m.Rs,{size:"large",toolbar:{menu:{items:[{key:"tab1",label:(0,o.jsx)("span",{children:"\u6700\u8FD1\u9879\u76EE \u300C\u4E2A\u4EBA + \u56E2\u961F\u300D"})}]},search:{size:"middle",placeholder:"\u9879\u76EE\u540D",onSearch:function(f){i(O,l,f)}}},rowKey:"projectName",dataSource:l.projects,pagination:{pageSize:l.limit,total:l.total,onChange:function(f,p){v(n()(n()({},l),{},{page:f,limit:p}))}},metas:{title:{dataIndex:"projectName",title:"\u9879\u76EE\u540D\u79F0"},avatar:{dataIndex:"avatar",search:!1},description:{dataIndex:"description",search:!1},content:{dataIndex:"updateTime",render:function(f){return(0,o.jsx)("div",{style:{color:"#00000073"},children:f},"updateTime")}},subTitle:{render:function(f,p){var L;return(0,o.jsxs)(y.Z,{size:0,children:[(0,o.jsx)(u.Z,{color:"blue",children:p.type==="1"?(0,o.jsx)(A.Z,{}):(0,o.jsx)(E.Z,{})},p.projectName),(L=p.tags)===null||L===void 0?void 0:L.split(",").map(function(I,D){return(0,o.jsx)(u.Z,{color:D%2==0?"#5BD8A6":"blue",children:I},I+D)})]})},dataIndex:"type",search:!1},actions:{render:function(f,p){return[(0,o.jsx)(a.Z,{project:p},"OpenProject"+p.id)]},search:!1}}})}},94654:function(S,s,e){e.d(s,{ox:function(){return d},pV:function(){return u},rn:function(){return T},wg:function(){return y}});var r=e(91484),c=e.n(r),_=e(71793),n=e(88263),m=e(51927),d=function(a){return n.ZP.post("/ncnb/project/add",{data:a})},y=function(a){return n.ZP.post("/ncnb/project/update",{data:a})},u=function(a){return n.ZP.post("/ncnb/project/delete",{data:a})},T=function(a){return n.ZP.get("/ncnb/project/page",{params:{page:a.page,limit:a.limit,projectName:a.projectName,order:a.order}})},A=function(a){var t=cache.getItem(CONSTANT.PROJECT_ID);return request.post("/ncnb/project/save",{data:_objectSpread(_objectSpread({},a),{},{id:t})})}},78:function(S,s,e){e.d(s,{B:function(){return d},LD:function(){return A},th:function(){return u},ty:function(){return y}});var r=e(91484),c=e.n(r),_=e(71793),n=e(88263),m=e(51927),d=function(t){return Object.assign(t,{type:1}),n.ZP.post("/ncnb/project/add",{data:t})},y=function(t){return Object.assign(t,{type:1}),n.ZP.post("/ncnb/project/update",{data:t})},u=function(t){return Object.assign(t,{type:1}),n.ZP.post("/ncnb/project/delete",{data:t})},T=function(t){return request.get("/ncnb/project/page",{params:{page:t.page,limit:t.limit,projectName:t.projectName,order:t.order,type:1}})},A=function(t){return n.ZP.get("/ncnb/project/recent",{params:{page:t.page,limit:t.limit,projectName:t.projectName,order:t.order,type:t.type}})},E=function(t){var o=cache.getItem(CONSTANT.PROJECT_ID);return request.post("/ncnb/project/save",{data:_objectSpread(_objectSpread({},t),{},{id:o})})}}}]);
