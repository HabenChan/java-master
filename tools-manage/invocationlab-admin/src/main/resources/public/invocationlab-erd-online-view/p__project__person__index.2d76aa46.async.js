"use strict";(self.webpackChunkInvocationlab_ERD_Online=self.webpackChunkInvocationlab_ERD_Online||[]).push([[8132],{12155:function(X,v,e){e.r(v),e.d(v,{default:function(){return W}});var E=e(91484),l=e.n(E),F=e(9116),Z=e.n(F),y=e(56037),m=e(5049),R=e(38297),h=e(81152),d=e(98404),T=e(82411),S=e(38066),I=e(11614),C=e(79257),A=e(97833),g=e.n(A),B=e(42196),D=e.n(B),N=e(34137),O=e(47174),z=e(80455),G=e(76436),x=e(26774),P=e(78),K=e(44766),M=e.n(K),t=e(36422),U=function(o){return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(N.Y,{title:"\u4FEE\u6539\u9879\u76EE",trigger:(0,t.jsx)(x.ZP,{type:"link",children:"\u4FEE\u6539"}),onFinish:function(){var a=D()(g()().mark(function i(s){return g()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return(0,P.ty)({id:o.project.id,projectName:s.projectName,description:s.description,tags:M().join(s.tags,",")}).then(function(n){n.code===200?(o.fetchProjects(),m.ZP.success("\u4FEE\u6539\u6210\u529F")):m.ZP.error(n.message||"\u4FEE\u6539\u5931\u8D25")}),r.abrupt("return",!0);case 2:case"end":return r.stop()}},i)}));return function(i){return a.apply(this,arguments)}}(),initialValues:o.project,children:[(0,t.jsx)(O.Z,{width:"md",name:"projectName",label:"\u9879\u76EE\u540D",placeholder:"\u8BF7\u8F93\u5165\u9879\u76EE\u540D",formItemProps:{rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"},{max:100,message:"\u4E0D\u80FD\u5927\u4E8E 100 \u4E2A\u5B57\u7B26"}]}}),(0,t.jsx)(z.Z,{width:"md",name:"tags",label:"\u6807\u7B7E",placeholder:"\u8BF7\u8F93\u5165\u9879\u76EE\u6807\u7B7E,\u6309\u56DE\u8F66\u5206\u5272",formItemProps:{rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"}]},fieldProps:{mode:"tags",tokenSeparators:[","]}}),(0,t.jsx)(G.Z,{width:"md",name:"description",label:"\u9879\u76EE\u63CF\u8FF0",placeholder:"\u8BF7\u8F93\u5165\u9879\u76EE\u63CF\u8FF0",formItemProps:{rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"},{max:100,message:"\u4E0D\u80FD\u5927\u4E8E 100 \u4E2A\u5B57\u7B26"}]}})]})})},V=d.memo(U),Y=e(23749),H=function(o){return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(Y.Z,{placement:"right",title:"\u5220\u9664\u9879\u76EE",onConfirm:function(){return(0,P.th)({id:o.project.id}).then(function(){o.fetchProjects()})},okText:"\u662F",cancelText:"\u5426",children:(0,t.jsx)(x.ZP,{type:"link",danger:!0,children:"\u5220\u9664"})})})},J=d.memo(H),L=e(71016),Q=e(27447),W=function(){var f=(0,d.useState)({page:1,limit:6,total:0,type:1,projects:[],order:"createTime"}),o=Z()(f,2),a=o[0],i=o[1],s=function(r){(0,T.pageProject)(r||a).then(function(n){if(n)if(n.data){var u;i(l()(l()({},a),{},{total:n.data.total,projects:(u=n.data.records)===null||u===void 0?void 0:u.map(function(j){return l()(l()({},j),{},{avatar:"/invocationlab-erd-online-view/logo.svg"})})}))}else m.ZP.error("\u83B7\u53D6\u9879\u76EE\u4FE1\u606F\u5931\u8D25")})};return(0,d.useEffect)(function(){s(a)},[a.page,a.order]),(0,t.jsx)(y.Rs,{size:"large",toolbar:{menu:{items:[{key:"tab1",label:(0,t.jsx)("span",{children:"\u4E2A\u4EBA\u9879\u76EE"})}]},search:{placeholder:"\u9879\u76EE\u540D",onSearch:function(r){(0,Q.searchProjects)(s,a,r)}},actions:[(0,t.jsx)(C.Z,{fetchProjects:function(){return s(null)},trigger:"ant",type:1})]},rowKey:"projectName",dataSource:a.projects,pagination:{pageSize:a.limit,total:a.total,onChange:function(r,n){i(l()(l()({},a),{},{page:r,limit:n}))}},metas:{title:{dataIndex:"projectName",title:"\u9879\u76EE\u540D\u79F0"},avatar:{dataIndex:"avatar",search:!1},description:{dataIndex:"description",search:!1},subTitle:{render:function(r,n){var u;return(0,t.jsxs)(R.Z,{size:0,children:[(0,t.jsx)(h.Z,{color:"blue",children:n.type==="1"?(0,t.jsx)(S.Z,{}):(0,t.jsx)(I.Z,{})},n.projectName),(u=n.tags)===null||u===void 0?void 0:u.split(",").map(function(j,p){return(0,t.jsx)(h.Z,{color:p%2==0?"#5BD8A6":"blue",children:j},j+p)})]})},dataIndex:"type",search:!1},content:{dataIndex:"updateTime",render:function(r){return(0,t.jsx)("div",{style:{color:"#00000073"},children:r},"updateTime")}},actions:{render:function(r,n){return[(0,t.jsx)(V,{fetchProjects:function(){return s(null)},trigger:"ant",project:n},"RenameProject"+n.id),(0,t.jsx)(J,{fetchProjects:function(){return s(null)},project:n},"RemoveProject"+n.id),(0,t.jsx)(L.Z,{project:n},"OpenProject"+n.id)]},search:!1}}})}}}]);
