"use strict";(self.webpackChunkInvocationlab_ERD_Online=self.webpackChunkInvocationlab_ERD_Online||[]).push([[5514],{64442:function(rt,xe,t){var Ce=t(98404),I=t(47729),Ze=t(4302),y=t(36422),i=function($e){return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(I.ZP,{theme:{token:{colorPrimary:"#DE2910"}},children:(0,y.jsx)(Ze.Outlet,{})})})};xe.Z=Ce.memo(i)},15514:function(rt,xe,t){t.r(xe),t.d(xe,{default:function(){return fn},fixRouteAccess:function(){return _e},getNowTimeParse:function(){return hn},headRightContent:function(){return mn},siderWidth:function(){return ke}});var Ce=t(9083),I=t.n(Ce),Ze=t(39346),y=t.n(Ze),i=t(98404),w=t(1993),$e=t(54936),Ne=t(84791),ut=t(39650),it=t(63499),lt=t(87236),st=t(36564),ot=t(29683),ct=t(15726),dt=t(13020),mt=t(55694),ht=t(63103),pt=t(7270),ft=t(34042),e=t(36422),je={route:{routes:[{path:"/design/table/model",name:"\u6A21\u578B",icon:(0,e.jsx)($e.Z,{theme:"filled",size:"18",fill:"#DE2910",strokeWidth:2}),routes:[{path:"https://www.zerocode.net.cn/",name:"ERD Online \u8BBA\u575B",icon:(0,e.jsx)(Ne.Z,{theme:"filled",size:"18",fill:"#DE2910",strokeWidth:2})}]},{path:"/design/table/query",name:"\u67E5\u8BE2",icon:(0,e.jsx)(ut.Z,{theme:"filled",size:"18",fill:"#DE2910",strokeWidth:2}),routes:[{path:"https://www.zerocode.net.cn/",name:"ERD Online \u8BBA\u575B",icon:(0,e.jsx)(Ne.Z,{theme:"filled",size:"18",fill:"#DE2910",strokeWidth:2})}]},{name:"\u5BFC\u5165",icon:(0,e.jsx)(it.Z,{theme:"filled",size:"18",fill:"#DE2910",strokeWidth:2}),path:"/design/table/import",access:"canErdTableImport",routes:[{path:"/design/table/import/pdman",name:"\u89E3\u6790PdMan\u6587\u4EF6",icon:(0,e.jsx)(lt.Z,{theme:"filled",size:"18",fill:"#DE2910",strokeWidth:2}),access:"canErdTableImportPdman"},{path:"/design/table/import/erd",name:"\u89E3\u6790ERD\u6587\u4EF6",icon:(0,e.jsx)(st.Z,{theme:"filled",size:"18",fill:"#DE2910",strokeWidth:2}),access:"canErdTableImportErd"}]},{name:"\u5BFC\u51FA",icon:(0,e.jsx)(ot.Z,{theme:"filled",size:"18",fill:"#DE2910",strokeWidth:2}),path:"/design/table/export",access:"canErdTableExport",routes:[{path:"/design/table/export/common",name:"\u666E\u901A\u5BFC\u51FA",icon:(0,e.jsx)(ct.Z,{theme:"filled",size:"18",fill:"#DE2910",strokeWidth:2}),access:"canErdTableExportCommon"},{path:"/design/table/export/more",name:"\u9AD8\u7EA7\u5BFC\u51FA",icon:(0,e.jsx)(dt.Z,{theme:"filled",size:"18",fill:"#DE2910",strokeWidth:2}),access:"canErdTableExportMore"}]},{name:"\u8BBE\u7F6E",icon:(0,e.jsx)(mt.Z,{theme:"filled",size:"15",fill:"#DE2910",strokeWidth:2}),path:"/design/table/setting",access:"canErdTableSetting",routes:[{path:"/design/table/setting/db",name:"\u6570\u636E\u6E90\u8BBE\u7F6E",icon:(0,e.jsx)(ht.Z,{theme:"filled",size:"18",fill:"#DE2910",strokeWidth:2}),access:"canErdTableSettingDb"},{path:"/design/table/setting/defaultField",name:"\u9ED8\u8BA4\u5B57\u6BB5\u8BBE\u7F6E",icon:(0,e.jsx)(pt.Z,{theme:"filled",size:"18",fill:"#DE2910",strokeWidth:2}),access:"canErdTableSettingDefaultfield"},{path:"/design/table/setting/default",name:"\u7CFB\u7EDF\u9ED8\u8BA4\u9879\u8BBE\u7F6E",icon:(0,e.jsx)(ft.Z,{theme:"filled",size:"18",fill:"#DE2910",strokeWidth:2}),access:"canErdTableSettingDefault"}]}]},location:{pathname:"/"},appList:[{icon:"/invocationlab-erd-online-view/logo.svg",title:"ERD Online",desc:"\u56FD\u5185\u7B2C\u4E00\u4E2A\u5F00\u6E90\u514D\u8D39\u5728\u7EBF\u5EFA\u6A21\u8F6F\u4EF6",url:"https://portal.zerocode.net.cn/",target:"_blank"},{icon:"/zerocode.svg",title:"\u96F6\u4EE3",desc:"\u56FD\u5185\u7B2C\u4E00\u4E2A\u96F6\u4EE3\u7801\u793E\u533A",url:"https://doc.erdonline.com",target:"_blank"},{icon:"/invocationlab-erd-online-view/loco.svg",title:"LOCO",desc:"\u7C7B\u9489\u9489\u5B9C\u642D\u7684\u4F4E\u4EE3\u7801\u642D\u5EFA\u5E73\u53F0",url:"https://loco.zerocode.net.cn/",target:"_blank"},{icon:"/zerocode.svg",title:"Fast Test",desc:"\u63A5\u53E3\u5FEB\u901F\u6D4B\u8BD5\u5E73\u53F0",url:"https://doc.erdonline.com",target:"_blank"},{icon:"/zerocode.svg",title:"Super BI",desc:"\u8D85\u7EA7\u62A5\u8868\u3001BI\u5F15\u64CE",url:"https://doc.erdonline.com",target:"_blank"}]},vt=t(75734),R=t(77662),Fe=t(56918),xt=t(43953),M=t.n(xt),jt=t(91184),K=t.n(jt),Y=t(63356),J=t(2360),N=t(4341),z=t(62656),ie=t(97111),gt=function(a){var r=(0,w.ZP)(function(m){return{projectDispatch:m.dispatch,currentModuleIndex:m.currentModuleIndex||-1}},R.Z),u=r.projectDispatch,n=r.currentModuleIndex,o={title:"",fields:u.getDefaultFields()||[],indexs:[],headers:[],chnname:""};return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(Y.Y,{title:"\u65B0\u5EFA\u8868",trigger:(0,e.jsx)(z.ZP,{icon:(0,e.jsx)(ie.Z,{}),type:"text",size:"small",disabled:a.moduleDisable,children:"\u65B0\u5EFA\u8868"}),onFinish:function(){var m=K()(M()().mark(function h(d){return M()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,u.addEntity(y()(y()({},o),{},{title:d.title,chnname:d.chnname}));case 2:return Z.abrupt("return",!0);case 3:case"end":return Z.stop()}},h)}));return function(h){return m.apply(this,arguments)}}(),children:(0,e.jsxs)(J.A.Group,{children:[(0,e.jsx)(N.Z,{width:"md",name:"title",label:"\u8868\u540D\u300C\u82F1\u6587\u540D\u300D",placeholder:"\u8BF7\u8F93\u5165\u8868\u540D",formItemProps:{rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"},{max:100,message:"\u4E0D\u80FD\u5927\u4E8E 100 \u4E2A\u5B57\u7B26"}]}}),(0,e.jsx)(N.Z,{width:"md",name:"chnname",label:"\u4E2D\u6587\u540D\u79F0",placeholder:"\u8BF7\u8F93\u5165\u4E2D\u6587\u540D\u79F0",formItemProps:{rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"},{max:100,message:"\u4E0D\u80FD\u5927\u4E8E 100 \u4E2A\u5B57\u7B26"}]}})]})})})},We=i.memo(gt),he=t(88254),Dt=function(a){var r=(0,w.ZP)(function(n){return{projectDispatch:n.dispatch}},R.Z),u=r.projectDispatch;return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(Y.Y,{title:"\u91CD\u547D\u540D\u8868",trigger:(0,e.jsx)(z.ZP,{icon:(0,e.jsx)(he.Z,{}),type:"text",size:"small",disabled:a.moduleDisable,children:"\u91CD\u547D\u540D\u8868"}),onFinish:function(){var n=K()(M()().mark(function o(m){return M()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,u.renameEntity({title:m.title,chnname:m.chnname});case 2:return d.abrupt("return",!0);case 3:case"end":return d.stop()}},o)}));return function(o){return n.apply(this,arguments)}}(),initialValues:a.renameInfo,children:(0,e.jsxs)(J.A.Group,{children:[(0,e.jsx)(N.Z,{width:"md",name:"title",label:"\u8868\u540D\u300C\u82F1\u6587\u540D\u300D",placeholder:"\u8BF7\u8F93\u5165\u8868\u540D",formItemProps:{rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"},{max:100,message:"\u4E0D\u80FD\u5927\u4E8E 100 \u4E2A\u5B57\u7B26"}]}}),(0,e.jsx)(N.Z,{width:"md",name:"chnname",label:"\u4E2D\u6587\u540D\u79F0",placeholder:"\u8BF7\u8F93\u5165\u4E2D\u6587\u540D\u79F0",formItemProps:{rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"},{max:100,message:"\u4E0D\u80FD\u5927\u4E8E 100 \u4E2A\u5B57\u7B26"}]}})]})})})},yt=i.memo(Dt),le=t(31117),pe=t(70198),bt=function(a){var r=(0,w.ZP)(function(n){return{projectDispatch:n.dispatch}},R.Z),u=r.projectDispatch;return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(le.Z,{placement:"right",title:"\u5220\u9664\u8868",onConfirm:function(){return u.removeEntity()},okText:"\u662F",cancelText:"\u5426",children:(0,e.jsx)(z.ZP,{icon:(0,e.jsx)(pe.Z,{}),type:"text",size:"small",disabled:a.disable,children:"\u5220\u9664\u8868"})})})},Et=i.memo(bt),Ct=function(a){var r=(0,w.ZP)(function(n){return n.dispatch}),u={name:"",chnname:"",entities:[],graphCanvas:{nodes:[],edges:[]},associations:[]};return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(Y.Y,{title:"\u65B0\u589E\u6A21\u5757",trigger:a.trigger==="bp"?(0,e.jsx)(z.ZP,{icon:(0,e.jsx)(ie.Z,{}),type:"text",size:"small",disabled:a.moduleDisable,children:"\u65B0\u589E\u6A21\u5757"}):(0,e.jsx)(z.ZP,{type:"primary",children:"\u65B0\u589E\u6A21\u5757"}),onFinish:function(){var n=K()(M()().mark(function o(m){return M()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,r.addModule(y()(y()({},u),{},{name:m.name,chnname:m.chnname}));case 2:return d.abrupt("return",!0);case 3:case"end":return d.stop()}},o)}));return function(o){return n.apply(this,arguments)}}(),children:(0,e.jsxs)(J.A.Group,{children:[(0,e.jsx)(N.Z,{width:"md",name:"name",label:"\u6A21\u5757\u540D\u300C\u82F1\u6587\u540D\u300D",placeholder:"\u8BF7\u8F93\u5165\u6A21\u5757\u540D",formItemProps:{rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"},{max:100,message:"\u4E0D\u80FD\u5927\u4E8E 100 \u4E2A\u5B57\u7B26"}]}}),(0,e.jsx)(N.Z,{width:"md",name:"chnname",label:"\u4E2D\u6587\u540D\u79F0",placeholder:"\u8BF7\u8F93\u5165\u4E2D\u6587\u540D\u79F0",formItemProps:{rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"},{max:100,message:"\u4E0D\u80FD\u5927\u4E8E 100 \u4E2A\u5B57\u7B26"}]}})]})})})},Ve=i.memo(Ct),Zt=function(a){var r=(0,w.ZP)(function(u){return u.dispatch});return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(Y.Y,{title:"\u91CD\u547D\u540D\u6A21\u5757",trigger:(0,e.jsx)(z.ZP,{icon:(0,e.jsx)(he.Z,{}),type:"text",size:"small",disabled:a.moduleDisable,children:"\u91CD\u547D\u540D\u6A21\u5757"}),onFinish:function(){var u=K()(M()().mark(function n(o){return M()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,r.renameModule({name:o.name,chnname:o.chnname});case 2:return h.abrupt("return",!0);case 3:case"end":return h.stop()}},n)}));return function(n){return u.apply(this,arguments)}}(),initialValues:a.renameInfo,children:(0,e.jsxs)(J.A.Group,{children:[(0,e.jsx)(N.Z,{width:"md",name:"name",label:"\u6A21\u5757\u540D\u300C\u82F1\u6587\u540D\u300D",placeholder:"\u8BF7\u8F93\u5165\u8868\u540D",formItemProps:{rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"},{max:100,message:"\u4E0D\u80FD\u5927\u4E8E 100 \u4E2A\u5B57\u7B26"}]}}),(0,e.jsx)(N.Z,{width:"md",name:"chnname",label:"\u4E2D\u6587\u540D\u79F0",placeholder:"\u8BF7\u8F93\u5165\u4E2D\u6587\u540D\u79F0",formItemProps:{rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"},{max:100,message:"\u4E0D\u80FD\u5927\u4E8E 100 \u4E2A\u5B57\u7B26"}]}})]})})})},Ft=i.memo(Zt),St=function(a){var r=(0,w.ZP)(function(n){return{projectDispatch:n.dispatch}},R.Z),u=r.projectDispatch;return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(le.Z,{placement:"right",title:"\u5220\u9664\u6A21\u5757",onConfirm:function(){return u.removeModule()},okText:"\u662F",cancelText:"\u5426",children:(0,e.jsx)(z.ZP,{icon:(0,e.jsx)(pe.Z,{}),type:"text",size:"small",disabled:a.disable,children:"\u5220\u9664\u6A21\u5757"})})})},Tt=i.memo(St),Pt=function(a){var r=(0,w.ZP)(function(n){return{projectDispatch:n.dispatch}},R.Z),u=r.projectDispatch;return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(le.Z,{placement:"right",title:"\u6B64\u64CD\u4F5C\u5C06\u4F1A\u91CD\u65B0\u4ECEdb\u8BFB\u53D6\u8868\u5143\u6570\u636E\u6784\u5EFA\u5F53\u524D\u6A21\u5757\u6A21\u578B",onConfirm:function(){return u.refreshModule(a.moduleInfo).then(function(o){u.updateModule(o.data)})},okText:"\u6211\u5DF2\u77E5\u6089,\u786E\u5B9A",cancelText:"\u53D6\u6D88",children:(0,e.jsx)(z.ZP,{icon:(0,e.jsx)(he.Z,{}),type:"text",size:"small",disabled:a.disable,children:"\u5237\u65B0\u6A21\u5757\u6A21\u578B"})})})},It=i.memo(Pt),Qe=t(47222),Rt=t(81413),B=t(29149),Se=t(91913),ge=t(12088),Ge=t(95597),Bt=t(76422),Ke=t(96232),At=t(46332),Mt=t(86842),zt=t(14085),Te=t(60484),wt=function(a){var r=(0,w.ZP)(function(n){return{projectDispatch:n.dispatch}},R.Z),u=r.projectDispatch;return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(z.ZP,{icon:(0,e.jsx)(Te.Z,{}),type:"text",size:"small",onClick:function(){return u.copyModule(a.moduleInfo)},disabled:a.disable,children:"\u590D\u5236\u6A21\u5757"})})},Ot=i.memo(wt),Pe=t(3668),kt=function(a){var r=(0,w.ZP)(function(n){return{projectDispatch:n.dispatch}},R.Z),u=r.projectDispatch;return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(z.ZP,{icon:(0,e.jsx)(Pe.Z,{}),type:"text",size:"small",onClick:function(){return u.cutModule(a.moduleInfo)},disabled:a.disable,children:"\u526A\u5207\u6A21\u5757"})})},Lt=i.memo(kt),Ie=t(88442),$t=function(a){var r=(0,w.ZP)(function(n){return{projectDispatch:n.dispatch}},R.Z),u=r.projectDispatch;return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(z.ZP,{icon:(0,e.jsx)(Ie.Z,{}),type:"text",size:"small",onClick:function(){return u.pastModule()},disabled:a.disable,children:"\u7C98\u8D34\u6A21\u5757"})})},Nt=i.memo($t),Wt=t(23759),De=t(11132),Vt=t(8925),ye=t(52002),Qt=t(77727),Re=t(7274),ae=t(29612),se=t(55074),He=t(68413),Gt=function(a){var r=(0,w.ZP)(function(c){return c.dispatch}),u=[{title:"\u6A21\u5757\u82F1\u6587\u540D",dataIndex:"name"},{title:"\u6A21\u5757\u4E2D\u6587\u540D",dataIndex:"chnname"}],n=function(b){var j=(0,ye.nB)({id:b["data-row-key"]}),D=j.attributes,x=j.listeners,f=j.setNodeRef,A=j.transform,L=j.transition,Q=j.isDragging,T=y()(y()({},b.style),{},{transform:Qt.ux.Transform.toString(A&&y()(y()({},A),{},{scaleY:1})),transition:L,cursor:"move"},Q?{position:"relative",zIndex:9999}:{});return(0,e.jsx)("tr",y()(y()(y()({},b),{},{ref:f,style:T},D),x))},o=r.getModuleEntityTree(""),m=(0,i.useState)(o.map(function(c){return{name:c.name,chnname:c.chnname}})),h=I()(m,2),d=h[0],C=h[1],Z=(0,i.useState)(!1),E=I()(Z,2),l=E[0],F=E[1],S=(0,De.Dy)((0,De.VT)(De.we,{activationConstraint:{distance:1}})),p=function(b){var j=b.active,D=b.over;j.id!==(D==null?void 0:D.id)&&C(function(x){var f=x.findIndex(function(L){return L.name===j.id}),A=x.findIndex(function(L){return L.name===(D==null?void 0:D.id)});return(0,ye.Rp)(x,f,A)})};return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(Y.Y,{title:"\u62D6\u52A8\u8C03\u6574\u987A\u5E8F",loading:l,trigger:(0,e.jsx)(z.ZP,{icon:(0,e.jsx)(he.Z,{}),type:"text",size:"small",disabled:a.disable,children:"\u6A21\u5757\u6392\u5E8F"}),onFinish:function(){var c=K()(M()().mark(function b(j){return M()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:F(!0),He.ZP.post("/ncnb/project/sortModule",{data:{projectId:ae.rV(se.s.PROJECT_ID),sortModuleVos:d}}).then(function(f){F(!1),!(!f||!f.data)&&(Wt.ZP.success(f.data),setTimeout(function(){return location.reload()},2e3))});case 2:case"end":return x.stop()}},b)}));return function(b){return c.apply(this,arguments)}}(),children:(0,e.jsx)(De.LB,{sensors:S,modifiers:[Vt.DL],onDragEnd:p,children:(0,e.jsx)(ye.Fo,{items:d.map(function(c){return c.name}),strategy:ye.qw,children:(0,e.jsx)(Re.Z,{components:{body:{row:n}},rowKey:"name",scroll:{y:"calc(100vh - 300px)"},columns:u,dataSource:d,pagination:!1})})})})})},Kt=i.memo(Gt),Ht=function(a){var r=(0,w.ZP)(function(n){return{projectDispatch:n.dispatch}},R.Z),u=r.projectDispatch;return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(z.ZP,{icon:(0,e.jsx)(Te.Z,{}),type:"text",size:"small",onClick:function(){return u.copyEntity(a.entityInfo)},disabled:a.disable,children:"\u590D\u5236\u8868"})})},Yt=i.memo(Ht),Jt=function(a){var r=(0,w.ZP)(function(n){return{projectDispatch:n.dispatch}},R.Z),u=r.projectDispatch;return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(z.ZP,{icon:(0,e.jsx)(Pe.Z,{}),type:"text",size:"small",onClick:function(){return u.cutEntity(a.entityInfo)},disabled:a.disable,children:"\u526A\u5207\u8868"})})},Ut=i.memo(Jt),Xt=function(a){var r=(0,w.ZP)(function(n){return{projectDispatch:n.dispatch}},R.Z),u=r.projectDispatch;return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(z.ZP,{icon:(0,e.jsx)(Ie.Z,{}),type:"text",size:"small",onClick:function(){return u.pastEntity()},disabled:a.disable,children:"\u7C98\u8D34\u8868"})})},qt=i.memo(Xt),_t=(0,Rt.Z)(function(v){var a;return{root:{"&:hover > $content":{backgroundColor:(a=v.palette)===null||a===void 0||(a=a.action)===null||a===void 0?void 0:a.hover},"&:focus > $content, &$selected > $content":{color:"var(--tree-view-color)"},"&:focus > $content $label, &:hover > $content $label, &$selected > $content $label":{backgroundColor:"transparent"}},content:{"$expanded > &":{}},group:{marginLeft:"5px","& $content":{paddingLeft:"10px"}},expanded:{},selected:{},label:{fontWeight:"inherit",color:"inherit"},labelRoot:{display:"flex",flex:"auto",width:"100%",alignItems:"center",padding:"2px"},labelIcon:{marginRight:"5px",marginLeft:"5px"},labelText:{width:"180px",fontWeight:"inherit",flexGrow:1,display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",textAlign:"left"}}}),ea=function(a){return(0,e.jsxs)(B.Z,{mode:"inline",children:[(0,e.jsx)(B.Z.Item,{children:(0,e.jsx)(We,{moduleDisable:!1})}),(0,e.jsx)(B.Z.Item,{children:(0,e.jsx)(yt,{moduleDisable:!1,renameInfo:a})}),(0,e.jsx)(B.Z.Item,{children:(0,e.jsx)(Et,{disable:!1})}),(0,e.jsx)(B.Z.Item,{children:(0,e.jsx)(Yt,{disable:!1,entityInfo:a})}),(0,e.jsx)(B.Z.Item,{children:(0,e.jsx)(Ut,{disable:!1,entityInfo:a})}),(0,e.jsx)(B.Z.Item,{children:(0,e.jsx)(qt,{disable:!1})})]})},ta=function(a){return(0,e.jsxs)(B.Z,{mode:"inline",children:[(0,e.jsx)(B.Z.Item,{children:(0,e.jsx)(Ve,{moduleDisable:!1,trigger:"bp"})}),(0,e.jsx)(B.Z.Item,{children:(0,e.jsx)(Ft,{moduleDisable:!1,renameInfo:a})}),(0,e.jsx)(B.Z.Item,{children:(0,e.jsx)(Tt,{disable:!1})}),(0,e.jsx)(B.Z.Item,{children:(0,e.jsx)(Ot,{disable:!1,moduleInfo:a})}),(0,e.jsx)(B.Z.Item,{children:(0,e.jsx)(Lt,{disable:!1,moduleInfo:a})}),(0,e.jsx)(B.Z.Item,{children:(0,e.jsx)(Nt,{disable:!1})}),(0,e.jsx)(B.Z.Item,{children:(0,e.jsx)(Kt,{disable:!1})}),(0,e.jsx)(B.Z.Item,{children:(0,e.jsx)(It,{disable:!1,moduleInfo:a})}),(0,e.jsx)(B.Z.Item,{children:(0,e.jsx)(We,{moduleDisable:!1})})]})},aa=function(a){var r=(0,w.ZP)(function(T){var s;return{modules:(s=T.project)===null||s===void 0||(s=s.projectJSON)===null||s===void 0?void 0:s.modules,projectDispatch:T.dispatch}},R.Z),u=r.modules,n=r.projectDispatch,o=(0,Fe.ZP)(function(T){return{tableTabs:T.tableTabs,tabDispatch:T.dispatch}}),m=o.tabDispatch,h=(0,Ke.Z)(function(T){return{searchKey:T.searchKey,globalDispatch:T.dispatch}},R.Z),d=h.searchKey,C=(0,Bt.Z)(function(T){return{shortcutDispatch:T.dispatch}}),Z=C.shortcutDispatch,E=(0,i.useState)(!0),l=I()(E,2),F=l[0],S=l[1],p=(0,i.useState)([]),c=I()(p,2),b=c[0],j=c[1],D=(0,w.ZP)(),x=D.loadingProjectDetail;(0,i.useEffect)(function(){j(n.getExpandedKeys(d||""))},[d]);var f=function(s){j(s),S(!1)},A=_t(),L=function(s,g){n.setCurrentModule(s),n.setCurrentEntity(g)},Q=function(){var s=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,g=200;return s-g};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(vt.Z,{tip:"\u62FC\u547D\u52A0\u8F7D\u4E2D",size:"large",style:{top:"18%",position:"fixed",transform:"scale(1.6)"},spinning:x,children:(0,e.jsx)("div",{})}),u&&u.length>0?(0,e.jsx)(Se.Z,{showIcon:!1,height:Q(),onExpand:function(s){return f(s)},expandedKeys:b,autoExpandParent:F,treeData:n.getModuleEntityTree(d||""),blockNode:!0,className:A.label,rootStyle:{textAlign:"left"},onClick:function(s,g){g.type==="module"?n.setCurrentModule(g.module):g.type==="entity"?(m.addTab({group:Fe.v0.MODEL,module:g.module,entity:g.title}),L(g.module,g.title)):g.type==="relation"&&(Z.setShow(!1),m.addTab({group:Fe.v0.MODEL,module:g.module,entity:"\u5173\u7CFB\u56FE-".concat(g.module)}),L(g.module,g.title))},titleRender:function(s){var g=s.type,$=s.module,q=s.title;return(0,e.jsx)(ge.Z,{trigger:["contextMenu"],overlay:s.type==="module"?ta({name:s.name,chnname:s.chnname}):s.type==="entity"?ea({title:s.title,chnname:s.chnname}):(0,e.jsx)(e.Fragment,{}),onOpenChange:function(ee){s.type==="module"?n.setCurrentModule(s.module):(s.type==="entity"||s.type==="relation")&&(n.setCurrentModule(s.module),L(s.module,s.title))},children:(0,e.jsxs)("div",{className:A.labelRoot,onDragStart:function(ee){ee.stopPropagation();var ue="";g==="module"?ue="module&".concat($):g==="entity"?ue="entity&".concat($,"&").concat(q):g==="relation"&&(ue="map&".concat($,"/\u5173\u7CFB\u56FE")),ee.dataTransfer.setData("Text",ue)},draggable:"true",children:[(0,e.jsx)("div",{style:{marginRight:"6px"},title:s.formatName,children:s.type==="module"?(0,e.jsx)(At.Z,{theme:"filled",size:"12",fill:"#DE2910",strokeWidth:2}):s.type==="relation"?(0,e.jsx)(Mt.Z,{theme:"filled",size:"12",fill:"#DE2910",strokeWidth:2,strokeLinejoin:"miter"}):(0,e.jsx)(zt.Z,{theme:"filled",size:"12",fill:"#DE2910",strokeWidth:2})}),(0,e.jsx)(Qe.Z,{variant:"body2",className:A.labelText,title:s.formatName,children:s.formatName}),(0,e.jsx)(Qe.Z,{variant:"caption",color:"inherit",children:s.type!=="relation"?s.length:null})]})})}}):(0,e.jsx)(Ge.Z,{image:"/invocationlab-erd-online-view/empty.svg",imageStyle:{height:60},description:(0,e.jsx)("span",{children:"\u6682\u65E0\u6570\u636E"}),children:(0,e.jsx)(Ve,{moduleDisable:!1,trigger:"ant"})})]})},na=i.memo(aa),ra=t(60183),oe=t.n(ra),ce=t(31398),ua=t(44766),U=t.n(ua),ia=function(a){var r=(0,w.ZP)(function(l){var F;return{projectDispatch:l.dispatch,database:((F=l.project.projectJSON.dataTypeDomains)===null||F===void 0?void 0:F.database)||[]}},R.Z),u=r.projectDispatch,n=r.database,o={};n.forEach(function(l){U().assign(o,oe()({},l.code,{type:""}))});var m={name:"",code:"",apply:o||{}},h=(0,i.useState)(o),d=I()(h,2),C=d[0],Z=d[1],E=function(F,S,p){Z(y()(y()({},C),{},oe()({},p,{type:F.target.value})))};return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(Y.Y,{title:"\u65B0\u589E\u5B57\u6BB5\u7C7B\u578B",trigger:(0,e.jsx)(z.ZP,{icon:(0,e.jsx)(ie.Z,{}),type:"text",size:"small",disabled:a.moduleDisable,children:"\u65B0\u589E\u5B57\u6BB5\u7C7B\u578B"}),onFinish:function(){var l=K()(M()().mark(function F(S){return M()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,u.addDatatype(y()(y()({},m),{},{name:S.name,code:S.code,apply:C}));case 2:return c.abrupt("return",!0);case 3:case"end":return c.stop()}},F)}));return function(F){return l.apply(this,arguments)}}(),children:[(0,e.jsxs)(J.A.Group,{children:[(0,e.jsx)(N.Z,{width:"md",name:"name",label:"\u540D\u79F0",placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0",formItemProps:{rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"},{max:100,message:"\u4E0D\u80FD\u5927\u4E8E 100 \u4E2A\u5B57\u7B26"}]}}),(0,e.jsx)(N.Z,{width:"md",name:"code",label:"\u4EE3\u7801",placeholder:"\u8BF7\u8F93\u5165\u4EE3\u7801",formItemProps:{rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"},{max:100,message:"\u4E0D\u80FD\u5927\u4E8E 100 \u4E2A\u5B57\u7B26"}]}})]}),(0,e.jsx)(ce.Z,{children:"\u6570\u636E\u6E90\u7C7B\u578B"}),(0,e.jsx)(J.A.Group,{children:n.map(function(l){return(0,e.jsx)(N.Z,{fieldProps:{onChange:function(S){E(S,null,l.code)}},width:"md",name:"apply.".concat(l.code,".type"),label:l.code,placeholder:"\u8BF7\u8F93\u5165\u7C7B\u578B",formItemProps:{rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"},{max:100,message:"\u4E0D\u80FD\u5927\u4E8E 100 \u4E2A\u5B57\u7B26"}]}},l.code)})})]})})},Ye=i.memo(ia),la=function(a){var r=(0,w.ZP)(function(n){return{projectDispatch:n.dispatch}},R.Z),u=r.projectDispatch;return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(le.Z,{placement:"right",title:"\u5220\u9664\u5B57\u6BB5\u7C7B\u578B",onConfirm:function(){return u.removeDatatype()},okText:"\u662F",cancelText:"\u5426",children:(0,e.jsx)(z.ZP,{icon:(0,e.jsx)(pe.Z,{}),type:"text",size:"small",disabled:a.disable,children:"\u5220\u9664\u5B57\u6BB5\u7C7B\u578B"})})})},sa=i.memo(la),be=t(66198),Be=t(65581),fe=t(46298),oa=function(a){var r=(0,w.ZP)(function(p){var c;return{projectDispatch:p.dispatch,database:((c=p.project.projectJSON.dataTypeDomains)===null||c===void 0?void 0:c.database)||[],currentDatabaseIndex:p.currentDatabaseIndex}},R.Z),u=r.projectDispatch,n=r.database,o=r.currentDatabaseIndex,m=(0,i.useState)("createTableTemplate"),h=I()(m,2),d=h[0],C=h[1],Z=(0,i.useState)({}),E=I()(Z,2),l=E[0],F=E[1];(0,i.useEffect)(function(){F(n[o])});var S=function(c,b,j){F(y()(y()({},l),{},oe()({},j,b)))};return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(Y.Y,{title:"\u65B0\u589E\u6570\u636E\u6E90",layout:"horizontal",trigger:(0,e.jsx)(z.ZP,{icon:(0,e.jsx)(ie.Z,{}),type:"text",size:"small",disabled:a.moduleDisable,children:"\u65B0\u589E\u6570\u636E\u6E90"}),onFinish:function(){var p=K()(M()().mark(function c(b){return M()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,u.addDatabase(y()(y()({},l),{},{code:b.code,defaultDatabase:b.defaultDatabase,fileShow:b.fileShow}));case 2:return D.abrupt("return",!0);case 3:case"end":return D.stop()}},c)}));return function(c){return p.apply(this,arguments)}}(),children:[(0,e.jsx)(N.Z,{width:"md",name:"code",label:"\u6570\u636E\u6E90\u540D\u79F0",placeholder:"\u8BF7\u8F93\u5165\u6570\u636E\u6E90\u540D\u79F0",formItemProps:{rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"},{max:100,message:"\u4E0D\u80FD\u5927\u4E8E 100 \u4E2A\u5B57\u7B26"}]}}),(0,e.jsx)(ce.Z,{children:"\u914D\u7F6E\u9009\u9879"}),(0,e.jsxs)(J.A.Group,{children:[(0,e.jsx)(be.Z,{name:"defaultDatabase",label:"\u8BBE\u4E3A\u9ED8\u8BA4\u6570\u636E\u6E90",tooltip:"\u52FE\u9009\u6B64\u9879\uFF0C\u5C06\u4F1A\u5728\u6570\u636E\u8868\u548C\u5173\u7CFB\u56FE\u4E2D\u663E\u793A\u9ED8\u8BA4\u6570\u636E\u6E90\u7684\u6570\u636E\u7C7B\u578B"}),(0,e.jsx)(be.Z,{name:"fileShow",label:"\u751F\u6210\u81F3\u6587\u6863",tooltip:"\u52FE\u9009\u6B64\u9879\uFF0C\u5C06\u4F1A\u5728\u751F\u6210\u7684\u6587\u6863\u4E2D\u663E\u793A\u8BE5\u6570\u636E\u6E90\u6240\u5BF9\u5E94\u7684\u5B57\u6BB5\u7C7B\u578B"})]}),(0,e.jsx)(ce.Z,{children:"\u6A21\u677F\u914D\u7F6E"}),(0,e.jsx)(J.A.Group,{children:(0,e.jsx)(Be.Z.Group,{name:"radio",radioType:"button",initialValue:d,fieldProps:{onChange:function(c){return C(c.target.value)}},options:[{label:"\u521B\u5EFA\u8868",value:"createTableTemplate"},{label:"\u5220\u9664\u8868",value:"deleteTableTemplate"},{label:"\u91CD\u5EFA\u8868",value:"rebuildTableTemplate"},{label:"\u6DFB\u52A0\u5B57\u6BB5",value:"createFieldTemplate"},{label:"\u4FEE\u6539\u5B57\u6BB5",value:"updateFieldTemplate"},{label:"\u5220\u9664\u5B57\u6BB5",value:"deleteFieldTemplate"},{label:"\u521B\u5EFA\u7D22\u5F15",value:"createIndexTemplate"},{label:"\u5220\u9664\u7D22\u5F15",value:"deleteIndexTemplate"},{label:"\u521B\u5EFA\u4E3B\u952E",value:"createPkTemplate"},{label:"\u5220\u9664\u4E3B\u952E",value:"deletePkTemplate"},{label:"\u8868\u6CE8\u91CA",value:"updateTableComment"}]})}),(0,e.jsx)(N.Z,{label:"\u6A21\u677F\u914D\u7F6E",children:(0,e.jsx)(fe.Z,{mode:"mysql",value:U().get(l,d,""),onChange:function(c,b){return S(b,c,d)}})})]})})},Je=i.memo(oa),ca=function(a){var r=(0,w.ZP)(function(n){return{projectDispatch:n.dispatch}},R.Z),u=r.projectDispatch;return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(le.Z,{placement:"right",title:"\u5220\u9664\u6570\u636E\u6E90",onConfirm:function(){return u.removeDatabase()},okText:"\u662F",cancelText:"\u5426",children:(0,e.jsx)(z.ZP,{icon:(0,e.jsx)(pe.Z,{}),type:"text",size:"small",disabled:a.disable,children:"\u5220\u9664\u6570\u636E\u6E90"})})})},da=i.memo(ca),ma=function(a){var r=(0,w.ZP)(function(j){var D,x;return{projectDispatch:j.dispatch,database:((D=j.project.projectJSON.dataTypeDomains)===null||D===void 0?void 0:D.database)||[],datatype:((x=j.project.projectJSON.dataTypeDomains)===null||x===void 0?void 0:x.datatype)||[],currentDataTypeIndex:j.currentDataTypeIndex}},R.Z),u=r.projectDispatch,n=r.database,o=r.datatype,m=r.currentDataTypeIndex,h=(0,i.useState)(0),d=I()(h,2),C=d[0],Z=d[1],E=(0,i.useState)(!1),l=I()(E,2),F=l[0],S=l[1],p={},c=function(D){var x={};return x=U().assign(x,o[D.currentDataTypeIndex]),n.forEach(function(f){var A=U().get(o[D.currentDataTypeIndex],"apply.".concat(f.code,".type"),"");U().assign(p,oe()({},f.code,{type:A})),x=U().assign(x,oe()({},"apply.".concat(f.code,".type"),A))}),Z(C+1),x};(0,i.useImperativeHandle)(a.onRef,function(){return{setModalVisit:function(D){S(D)}}});var b=(0,i.useRef)();return(0,i.useEffect)(function(){var j,D;b&&((j=b.current)===null||j===void 0||(D=j.resetFields)===null||D===void 0||D.call(j))},[m,C]),(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(Y.Y,{formRef:b,title:"\u6570\u636E\u5B57\u5178",visible:F,onFinish:function(){var j=K()(M()().mark(function D(x){var f,A;return M()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return f=U().omit(x,["code","code"]),A={name:x.name,code:x.code},U().forIn(f,function(T,s){U().set(A,s,T)}),Q.next=5,u.updateDatatype(A);case 5:return Q.abrupt("return",!0);case 6:case"end":return Q.stop()}},D)}));return function(D){return j.apply(this,arguments)}}(),params:{currentDataTypeIndex:m},request:function(){var j=K()(M()().mark(function D(x){return M()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.abrupt("return",c(x));case 1:case"end":return A.stop()}},D)}));return function(D){return j.apply(this,arguments)}}(),modalProps:{onCancel:function(){S(!1)}},onVisibleChange:S,children:[(0,e.jsxs)(J.A.Group,{children:[(0,e.jsx)(N.Z,{width:"md",name:"name",label:"\u540D\u79F0",placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0",formItemProps:{rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"},{max:100,message:"\u4E0D\u80FD\u5927\u4E8E 100 \u4E2A\u5B57\u7B26"}]}}),(0,e.jsx)(N.Z,{width:"md",name:"code",label:"\u4EE3\u7801",placeholder:"\u8BF7\u8F93\u5165\u4EE3\u7801",formItemProps:{rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"},{max:100,message:"\u4E0D\u80FD\u5927\u4E8E 100 \u4E2A\u5B57\u7B26"}]}})]}),(0,e.jsx)(ce.Z,{children:"\u6570\u636E\u6E90\u7C7B\u578B"}),(0,e.jsx)(J.A.Group,{children:n.map(function(j){return(0,e.jsx)(N.Z,{fieldProps:{onChange:function(x){}},width:"md",name:"apply.".concat(j.code,".type"),label:j.code,placeholder:"\u8BF7\u8F93\u5165\u7C7B\u578B",formItemProps:{rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"},{max:100,message:"\u4E0D\u80FD\u5927\u4E8E 100 \u4E2A\u5B57\u7B26"}]}},j.code)})})]})})},ha=ma,Ae=t(63613),ne=t(66205),Me=t(20497),pa=t(44054),fa=function(a){var r=a.selectTab,u=a.template,n=a.setSelectTab,o=a.onTemplateEditorChange,m=(0,i.useState)(""),h=I()(m,2),d=h[0],C=h[1],Z=U().get(u,[r],""),E=document.body.clientHeight,l=E-25,F=(0,i.useRef)(),S=(0,Me.Id)(r);(0,i.useEffect)(function(){C((0,Me.ky)(JSON.parse(S),Z))},[r]);var p=function(){C((0,Me.ky)(JSON.parse(S),Z))};return(0,i.useImperativeHandle)(a.onRef,function(){return{reSetResult:function(){p()}}}),(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(pa.a,{title:"\u9884\u89C8\u7F16\u8F91",formRef:F,trigger:(0,e.jsx)(Ae.Z,{variant:"outlined",color:"info",children:"\u9884\u89C8\u7F16\u8F91"},"preview"),drawerProps:{destroyOnClose:!0,placement:"top",height:l*.8},submitter:{searchConfig:{resetText:"\u53D6\u6D88",submitText:"\u9884\u89C8"},submitButtonProps:{onClick:function(){p()}}},children:[(0,e.jsx)(J.A.Group,{children:(0,e.jsx)(Be.Z.Group,{name:"radio",radioType:"button",initialValue:a.selectTab,fieldProps:{onChange:function(b){n(b.target.value),p()}},options:[{label:"\u521B\u5EFA\u8868",value:"createTableTemplate"},{label:"\u5220\u9664\u8868",value:"deleteTableTemplate"},{label:"\u91CD\u5EFA\u8868",value:"rebuildTableTemplate"},{label:"\u6DFB\u52A0\u5B57\u6BB5",value:"createFieldTemplate"},{label:"\u4FEE\u6539\u5B57\u6BB5",value:"updateFieldTemplate"},{label:"\u5220\u9664\u5B57\u6BB5",value:"deleteFieldTemplate"},{label:"\u521B\u5EFA\u7D22\u5F15",value:"createIndexTemplate"},{label:"\u5220\u9664\u7D22\u5F15",value:"deleteIndexTemplate"},{label:"\u521B\u5EFA\u4E3B\u952E",value:"createPkTemplate"},{label:"\u5220\u9664\u4E3B\u952E",value:"deletePkTemplate"},{label:"\u8868\u6CE8\u91CA",value:"updateTableComment"}]})}),(0,e.jsxs)(ne.ZP,{container:!0,spacing:2,children:[(0,e.jsx)(ne.ZP,{item:!0,xs:3,children:"\u53C2\u8003\u6570\u636E"}),(0,e.jsx)(ne.ZP,{item:!0,xs:6,children:"\u6A21\u677F\u4EE3\u7801\u7F16\u8F91"}),(0,e.jsx)(ne.ZP,{item:!0,xs:3,children:"\u9884\u89C8"}),(0,e.jsx)(ne.ZP,{item:!0,xs:3,children:(0,e.jsx)(fe.Z,{mode:"json",height:"".concat(l*.5,"px"),value:S})}),(0,e.jsx)(ne.ZP,{item:!0,xs:6,children:(0,e.jsx)(fe.Z,{mode:"mysql",height:"".concat(l*.5,"px"),value:Z,onChange:function(b,j){o(j,b,r)}})}),(0,e.jsx)(ne.ZP,{item:!0,xs:3,children:(0,e.jsx)(fe.Z,{mode:"mysql",height:"".concat(l*.5,"px"),value:d})})]})]})})},va=fa,xa=function(a){var r=(0,w.ZP)(function(s){var g;return{projectDispatch:s.dispatch,database:((g=s.project.projectJSON.dataTypeDomains)===null||g===void 0?void 0:g.database)||[],currentDatabaseIndex:s.currentDatabaseIndex}},R.Z),u=r.projectDispatch,n=r.database,o=r.currentDatabaseIndex,m=(0,i.useState)("createTableTemplate"),h=I()(m,2),d=h[0],C=h[1],Z=(0,i.useState)({}),E=I()(Z,2),l=E[0],F=E[1],S=(0,i.useState)(!1),p=I()(S,2),c=p[0],b=p[1],j=(0,i.useState)(!1),D=I()(j,2),x=D[0],f=D[1],A=function(g){var $={};return $=U().assign($,n[g.currentDatabaseIndex]),F($),$};(0,i.useImperativeHandle)(a.onRef,function(){return{setModalVisit:function(g){b(g)}}});var L=(0,i.useRef)(),Q=function(g,$,q){F(y()(y()({},l),{},oe()({},q,$))),L.current.reSetResult()},T=(0,i.useRef)();return(0,i.useEffect)(function(){var s,g;T&&((s=T.current)===null||s===void 0||(g=s.resetFields)===null||g===void 0||g.call(s))},[o,l==null?void 0:l.defaultDatabase,l==null?void 0:l.fileShow]),(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(Y.Y,{formRef:T,title:"\u6570\u636E\u6E90",layout:"horizontal",visible:c,onFinish:function(){var s=K()(M()().mark(function g($){return M()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,u.updateDatabase(y()(y()({},l),{},{code:$.code,defaultDatabase:$.defaultDatabase,fileShow:$.fileShow}));case 2:return f(!x),setTimeout(function(){},1e3),k.abrupt("return",!0);case 5:case"end":return k.stop()}},g)}));return function(g){return s.apply(this,arguments)}}(),params:{currentDatabaseIndex:o,refreshCheckBox:x},request:function(){var s=K()(M()().mark(function g($){return M()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.abrupt("return",A($));case 1:case"end":return k.stop()}},g)}));return function(g){return s.apply(this,arguments)}}(),modalProps:{onCancel:function(){b(!1)}},onVisibleChange:b,submitter:{render:function(g,$){return[(0,e.jsx)(va,{onRef:L,selectTab:d,template:l,setSelectTab:C,onTemplateEditorChange:Q}),(0,e.jsx)(Ae.Z,{variant:"outlined",color:"warning",onClick:function(){var k;return(k=g.form)===null||k===void 0?void 0:k.resetFields()},children:"\u91CD\u7F6E"},"rest"),(0,e.jsx)(Ae.Z,{variant:"contained",onClick:function(){var k,ee;return(k=g.form)===null||k===void 0||(ee=k.submit)===null||ee===void 0?void 0:ee.call(k)},children:" \u786E\u5B9A "},"submit")]}},children:[(0,e.jsx)(N.Z,{width:"md",name:"code",label:"\u6570\u636E\u6E90\u540D\u79F0",placeholder:"\u8BF7\u8F93\u5165\u6570\u636E\u6E90\u540D\u79F0",formItemProps:{rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"},{max:100,message:"\u4E0D\u80FD\u5927\u4E8E 100 \u4E2A\u5B57\u7B26"}]}}),(0,e.jsx)(ce.Z,{children:"\u914D\u7F6E\u9009\u9879"}),(0,e.jsxs)(J.A.Group,{children:[(0,e.jsx)(be.Z,{name:"defaultDatabase",label:"\u8BBE\u4E3A\u9ED8\u8BA4\u6570\u636E\u6E90",tooltip:"\u52FE\u9009\u6B64\u9879\uFF0C\u5C06\u4F1A\u5728\u6570\u636E\u8868\u548C\u5173\u7CFB\u56FE\u4E2D\u663E\u793A\u9ED8\u8BA4\u6570\u636E\u6E90\u7684\u6570\u636E\u7C7B\u578B"}),(0,e.jsx)(be.Z,{name:"fileShow",label:"\u751F\u6210\u81F3\u6587\u6863",tooltip:"\u52FE\u9009\u6B64\u9879\uFF0C\u5C06\u4F1A\u5728\u751F\u6210\u7684\u6587\u6863\u4E2D\u663E\u793A\u8BE5\u6570\u636E\u6E90\u6240\u5BF9\u5E94\u7684\u5B57\u6BB5\u7C7B\u578B"})]}),(0,e.jsx)(ce.Z,{children:"\u6A21\u677F\u914D\u7F6E"}),(0,e.jsx)(J.A.Group,{children:(0,e.jsx)(Be.Z.Group,{name:"radio",radioType:"button",initialValue:d,fieldProps:{onChange:function(g){return C(g.target.value)}},options:[{label:"\u521B\u5EFA\u8868",value:"createTableTemplate"},{label:"\u5220\u9664\u8868",value:"deleteTableTemplate"},{label:"\u91CD\u5EFA\u8868",value:"rebuildTableTemplate"},{label:"\u6DFB\u52A0\u5B57\u6BB5",value:"createFieldTemplate"},{label:"\u4FEE\u6539\u5B57\u6BB5",value:"updateFieldTemplate"},{label:"\u5220\u9664\u5B57\u6BB5",value:"deleteFieldTemplate"},{label:"\u521B\u5EFA\u7D22\u5F15",value:"createIndexTemplate"},{label:"\u5220\u9664\u7D22\u5F15",value:"deleteIndexTemplate"},{label:"\u521B\u5EFA\u4E3B\u952E",value:"createPkTemplate"},{label:"\u5220\u9664\u4E3B\u952E",value:"deletePkTemplate"},{label:"\u8868\u6CE8\u91CA",value:"updateTableComment"}]})}),(0,e.jsx)(N.Z,{label:"\u6A21\u677F\u914D\u7F6E",children:(0,e.jsx)(fe.Z,{mode:"mysql",value:U().get(l,d,""),onChange:function(g,$){return Q($,g,d)}})})]})})},ja=xa,ga=function(a){var r=(0,w.ZP)(function(n){return{projectDispatch:n.dispatch}},R.Z),u=r.projectDispatch;return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(z.ZP,{icon:(0,e.jsx)(Te.Z,{}),type:"text",size:"small",onClick:function(){return u.copyDatatype()},disabled:a.disable,children:"\u590D\u5236\u5143\u6570\u636E"})})},Da=i.memo(ga),ya=function(a){var r=(0,w.ZP)(function(n){return{projectDispatch:n.dispatch}},R.Z),u=r.projectDispatch;return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(z.ZP,{icon:(0,e.jsx)(Pe.Z,{}),type:"text",size:"small",onClick:function(){return u.cutDatatype()},disabled:a.disable,children:"\u526A\u5207\u5143\u6570\u636E"})})},ba=i.memo(ya),Ea=function(a){var r=(0,w.ZP)(function(n){return{projectDispatch:n.dispatch}},R.Z),u=r.projectDispatch;return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(z.ZP,{icon:(0,e.jsx)(Ie.Z,{}),type:"text",size:"small",onClick:function(){return u.pastDatatype()},disabled:a.disable,children:"\u7C98\u8D34\u5143\u6570\u636E"})})},Ca=i.memo(Ea),Za=function(a){var r=(0,w.ZP)(function(S){var p,c;return{database:(p=S.project)===null||p===void 0||(p=p.projectJSON)===null||p===void 0||(p=p.dataTypeDomains)===null||p===void 0?void 0:p.database,datatype:(c=S.project)===null||c===void 0||(c=c.projectJSON)===null||c===void 0||(c=c.dataTypeDomains)===null||c===void 0?void 0:c.datatype,projectDispatch:S.dispatch}},R.Z),u=r.datatype,n=r.database,o=r.projectDispatch,m=function(p,c){p==="dataType"?o.setCurrentDatatype(c):p==="database"&&o.setCurrentDatabase(c)},h=(0,i.useRef)(),d=function(){h.current.setModalVisit(!0)},C=(0,i.useRef)(),Z=function(){C.current.setModalVisit(!0)},E=function(){return(0,e.jsxs)(B.Z,{mode:"inline",children:[(0,e.jsx)(B.Z.Item,{children:(0,e.jsx)(Ye,{moduleDisable:!1})}),(0,e.jsx)(B.Z.Item,{children:(0,e.jsx)(sa,{disable:!1})}),(0,e.jsx)(B.Z.Item,{children:(0,e.jsx)(Da,{disable:!1})}),(0,e.jsx)(B.Z.Item,{children:(0,e.jsx)(ba,{disable:!1})}),(0,e.jsx)(B.Z.Item,{children:(0,e.jsx)(Ca,{disable:!1})})]})},l=function(){return(0,e.jsxs)(B.Z,{mode:"inline",children:[(0,e.jsx)(B.Z.Item,{children:(0,e.jsx)(Je,{moduleDisable:!1})}),(0,e.jsx)(B.Z.Item,{children:(0,e.jsx)(da,{disable:!1})})]})},F=function(p,c){return p==="###menu###"?c==="database"?(0,e.jsx)(Je,{moduleDisable:!1}):(0,e.jsx)(Ye,{moduleDisable:!1}):c==="database"?l():E()};return(0,e.jsxs)("div",{children:[(0,e.jsx)(Se.Z,{showIcon:!1,height:550,defaultExpandedKeys:["database###database"],rootStyle:{textAlign:"left"},treeData:o.getDataTypeTree(""),titleRender:function(p){return(0,e.jsx)(ge.Z,{trigger:["contextMenu"],overlay:F(p.code,p.type),onOpenChange:function(b){p.type==="dataType"&&p.code!="###menu###"?m("dataType",p.code):p.type==="database"&&p.code!="###menu###"&&m("database",p.code)},children:(0,e.jsxs)(z.ZP,{type:"text",size:"small",onClick:function(b){p.type==="dataType"&&p.code!="###menu###"?(m("dataType",p.code),d()):p.type==="database"&&p.code!="###menu###"&&(m("database",p.code),Z())},children:[(0,e.jsx)("span",{style:{marginRight:"6px"},children:p.icon}),(0,e.jsx)("span",{children:p.title})]})})}}),(0,e.jsx)(ha,{onRef:h}),(0,e.jsx)(ja,{onRef:C})]})},Fa=i.memo(Za),Sa=t(2927),Ue=t.n(Sa),Ta=t(29167),de=t(64454),Pa=t(30879),ze=t(15122),Ia=t(49573),Ra=t(44761),Sn=t(44925),Tn=t(50205),Pn=t(58168),Ba=function(a){var r=(0,w.ZP)(function(W){return W.dispatch}),u=(0,i.useState)(!1),n=I()(u,2),o=n[0],m=n[1],h=(0,i.useState)(""),d=I()(h,2),C=d[0],Z=d[1],E=(0,i.useState)(""),l=I()(E,2),F=l[0],S=l[1],p=(0,i.useState)(""),c=I()(p,2),b=c[0],j=c[1],D=(0,i.useState)(""),x=I()(D,2),f=x[0],A=x[1],L=(0,i.useState)("and"),Q=I()(L,2),T=Q[0],s=Q[1],g=(0,i.useState)([]),$=I()(g,2),q=$[0],k=$[1],ee=(0,i.useState)({}),ue=I()(ee,2),ve=ue[0],vn=ue[1],xn=(0,i.useState)({}),et=I()(xn,2),tt=et[0],jn=et[1],gn=(0,i.useState)(),at=I()(gn,2),Dn=at[0],yn=at[1];(0,i.useImperativeHandle)(a.onRef,function(){return{showSearchForm:function(P){m(!0);var O=r.getOriginalModules(),V=bn(O);k(V.tables),vn(V.tableColumns),jn(V.tableIndexs)}}});var bn=function(P){var O={},V={},H=P.map(function(_,te){return _.entities.map(function(X,Ee){return O[X.title]=X.fields,V[X.title]=X.indexs,{key:te+"-"+Ee,title:X.title,chnname:X.chnname,ddl:X.originalCreateTableSql,ownerModule:_.name+" "+_.chnname}})}).flat().sort(function(_,te){return _.title.localeCompare(te.title)});return{tables:H,tableColumns:O,tableIndexs:V}};(0,i.useEffect)(function(){En()},[q,ve,C,F,b,f,T]);var En=function(){var P=q.map(function(O){var V=[];C&&V.push(O.title.includes(C)),F&&V.push(O.chnname.includes(F));var H=ve[O.title];b&&f?(H=ve[O.title].filter(function(G){if(T==="and")return G.name.includes(b)&&G.chnname.includes(f);if(T==="or")return G.name.includes(b)||G.chnname.includes(f);throw new Error(T)}),V.push(H.length>0)):b?(H=ve[O.title].filter(function(G){return G.name.includes(b)}),V.push(H.length>0)):f&&(H=ve[O.title].filter(function(G){return G.chnname.includes(f)}),V.push(H.length>0));var _;if(V.length===0)_=!0;else if(T==="and")_=V.every(function(G){return G});else if(T==="or")_=V.some(function(G){return G});else throw new Error(T);if(!_)return null;var te=Ue()(H);if(te=te.map(function(G,Le){var nt=y()({},G);return nt.index=Le+1,nt}),tt[O.title]){var X=Ue()(tt[O.title]);X=X.map(function(G,Le){return{index:Le+1,name:G.name,chnname:G.fields.join(", "),dataType:"",remark:G.isUnique?"\u552F\u4E00":""}}),te=te.concat(X)}var Ee=y()({},O);return Ee.expandedTableData=te,Ee}).filter(function(O){return O!=null}).map(function(O,V){return O.index=V+1,O});yn(P)},Cn=[{title:"\u5217\u5E8F\u53F7",dataIndex:"index",key:"index",width:60,render:function(P,O){return O.dataType===""?"\u7D22\u5F15"+P:"\u5217"+P}},{title:"\u5217\u540D",dataIndex:"name",key:"name",width:200},{title:"\u5217\u6CE8\u91CA",dataIndex:"chnname",key:"chnname",width:200},{title:"\u6570\u636E\u7C7B\u578B",dataIndex:"dataType",key:"dataType",width:150},{title:"\u8BF4\u660E",dataIndex:"remark",key:"remark",width:100},{title:"\u4E3B\u952E",dataIndex:"pk",key:"pk",width:80,render:function(P){return P?"\u662F":""}},{title:"\u81EA\u589E",dataIndex:"autoIncrement",key:"autoIncrement",width:80,render:function(P){return P?"\u662F":""}},{title:"\u4E0D\u4E3A\u7A7A",dataIndex:"notNull",key:"notNull",width:80,render:function(P){return P?"\u662F":""}},{title:"\u9ED8\u8BA4\u503C",dataIndex:"defaultValue",key:"defaultValue",width:150}],Zn=function(P){return(0,e.jsx)(Re.Z,{rowKey:"name",columns:Cn,dataSource:P.expandedTableData,pagination:!1,scroll:{y:"calc(100vh - 460px)"},size:"small"})},Fn=[{title:"\u8868\u5E8F\u53F7",dataIndex:"index",key:"index",width:100,render:function(P){return"\u8868"+P}},{title:"\u8868\u540D",dataIndex:"title",key:"title"},{title:"\u8868\u6CE8\u91CA",dataIndex:"chnname",key:"chnname"},{title:"\u6240\u5C5E\u6A21\u5757",dataIndex:"ownerModule",width:260,key:"ownerModule"},{title:"\u8868DDL",dataIndex:"ddl",key:"ddl",width:100,render:function(P,O){return(0,e.jsx)(z.ZP,{size:"small",type:"link",onClick:function(){Ta.Z.info({title:O.title,content:(0,e.jsx)(Ra.ZP,{value:P,width:"900px",height:"470px",mode:"mysql",theme:"xcode",showGutter:!0,showPrintMargin:!1,editorProps:{$blockScrolling:!0},setOptions:{readOnly:!0,wrap:!1}}),width:1e3,closable:!0,mask:!1,maskClosable:!0,okText:"\u590D\u5236DDL",onOk:function(){Ia.gs(P)}})},children:"DDL"})}}];return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(Y.Y,{width:1250,open:o,title:"\u641C\u7D22\u5143\u6570\u636E",modalProps:{onCancel:function(){return m(!1)},cancelText:"\u5173\u95ED"},onFinish:function(){var W=K()(M()().mark(function P(O){return M()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return m(!1),H.abrupt("return",!0);case 2:case"end":return H.stop()}},P)}));return function(P){return W.apply(this,arguments)}}(),children:[(0,e.jsx)(de.Z,{addonBefore:"\u8868\u540D",style:{width:240},placeholder:"\u6A21\u7CCA\u641C\u7D22",value:C,size:"small",onChange:function(P){return Z(P.target.value)}}),(0,e.jsx)(de.Z,{addonBefore:"\u8868\u6CE8\u91CA",style:{width:240,marginLeft:10},placeholder:"\u6A21\u7CCA\u641C\u7D22",value:F,size:"small",onChange:function(P){return S(P.target.value)}}),(0,e.jsx)(de.Z,{addonBefore:"\u5217\u540D",style:{width:240,marginLeft:10},placeholder:"\u6A21\u7CCA\u641C\u7D22",value:b,size:"small",onChange:function(P){return j(P.target.value)}}),(0,e.jsx)(de.Z,{addonBefore:"\u5217\u6CE8\u91CA",style:{width:240,marginLeft:10,marginRight:10},placeholder:"\u6A21\u7CCA\u641C\u7D22",value:f,size:"small",onChange:function(P){return A(P.target.value)}}),(0,e.jsx)(Pa.Z,{title:"\u641C\u7D22\u6761\u4EF6\u5173\u7CFB",children:(0,e.jsxs)(ze.Z,{size:"small",style:{marginRight:10},value:T,onChange:function(P){s(P)},children:[(0,e.jsx)(ze.Z.Option,{value:"and",children:"\u4E14"},"1"),(0,e.jsx)(ze.Z.Option,{value:"or",children:"\u6216"},"2")]})}),(0,e.jsx)(z.ZP,{size:"small",onClick:function(){Z(""),S(""),j(""),A(""),s("and")},children:"\u91CD\u7F6E\u67E5\u8BE2"}),(0,e.jsx)(Re.Z,{columns:Fn,expandable:{expandedRowRender:Zn,columnWidth:30,expandRowByClick:!0},dataSource:Dn,size:"small",scroll:{y:"calc(100vh - 310px)",x:"120px"},pagination:!1,style:{height:"calc(100vh - 280px)"}})]})})},Aa=i.memo(Ba),Ma=t(2491),Xe=t(62141),za=function(a){var r=(0,Ke.Z)(function(o){return{globalDispatch:o.dispatch}},R.Z),u=r.globalDispatch,n=(0,i.useRef)(null);return a.collapsed?(0,e.jsx)(e.Fragment,{}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Aa,{onRef:n}),(0,e.jsx)(de.Z,{style:{borderRadius:4,marginInlineEnd:12},allowClear:!0,size:"small",prefix:(0,e.jsx)(Xe.Z,{}),placeholder:"\u641C\u7D22\u5143\u6570\u636E(\u53F3\u952E\u4F7F\u7528\u5B8C\u6574\u529F\u80FD)",onContextMenu:function(m){var h;n==null||(h=n.current)===null||h===void 0||h.showSearchForm(),m.preventDefault()},onPressEnter:function(m){var h;u.setSearchKey((h=m.target)===null||h===void 0?void 0:h.value)}}),(0,e.jsx)(Ma.Z,{defaultActiveKey:"1",centered:!0,items:[{label:"\u5143\u6570\u636E",key:"1",children:(0,e.jsx)(na,{})},{label:"\u6570\u636E\u57DF",key:"2",children:(0,e.jsx)(Fa,{})}]})]})},wa=i.memo(za),re=t(4302),Oa=t(81777),ka=t(18588),La=t(20774),$a=t(27618),Na=t(94274),Wa=t(67353),Va=t(89536),Qa=t(61351),we=t(69589),Oe=t(55049),Ga=t(89951),Ka=t(53631),Ha=t(34973),Ya=t(77073),Ja=t(90837),me=t(85448),Ua=t(90338),Xa=function(a){var r=(0,me.Z)(function(n){return{queryDispatch:n.dispatch}},R.Z),u=r.queryDispatch;return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(Y.Y,{title:a.model.isLeaf?"\u91CD\u547D\u540D\u67E5\u8BE2":"\u91CD\u547D\u540D\u76EE\u5F55",trigger:(0,e.jsx)(z.ZP,{icon:(0,e.jsx)(he.Z,{}),type:"text",size:"small",children:a.model.isLeaf?"\u91CD\u547D\u540D\u67E5\u8BE2":"\u91CD\u547D\u540D\u76EE\u5F55"}),onFinish:function(){var n=K()(M()().mark(function o(m){return M()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,u.renameQuery({id:a.model.id,title:m.title,projectId:ae.rV(se.s.PROJECT_ID)});case 2:return d.abrupt("return",!0);case 3:case"end":return d.stop()}},o)}));return function(o){return n.apply(this,arguments)}}(),initialValues:a.model,children:(0,e.jsx)(N.Z,{width:"md",name:"title",label:"\u67E5\u8BE2\u540D\u79F0",placeholder:"\u8BF7\u8F93\u5165\u67E5\u8BE2\u540D\u79F0",formItemProps:{rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"},{max:100,message:"\u4E0D\u80FD\u5927\u4E8E 100 \u4E2A\u5B57\u7B26"}]}})})})},qa=i.memo(Xa),_a=function(a){var r=(0,me.Z)(function(n){return{queryDispatch:n.dispatch}},R.Z),u=r.queryDispatch;return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(le.Z,{placement:"right",title:a.model.isLeaf?"\u5220\u9664\u67E5\u8BE2":"\u5220\u9664\u76EE\u5F55",onConfirm:function(){return u.removeQuery(a==null?void 0:a.model)},okText:"\u662F",cancelText:"\u5426",children:(0,e.jsx)(z.ZP,{icon:(0,e.jsx)(pe.Z,{}),type:"text",size:"small",children:a.model.isLeaf?"\u5220\u9664\u67E5\u8BE2":"\u5220\u9664\u76EE\u5F55"})})})},en=i.memo(_a),tn=function(a){var r=(0,me.Z)(function(d){return{queryDispatch:d.dispatch}},R.Z),u=r.queryDispatch,n=(0,re.useSearchParams)(),o=I()(n,1),m=o[0],h=m.get("projectId")||"";return(!h||h==="")&&(h=ae.rV(se.s.PROJECT_ID)||""),(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(Y.Y,{title:"\u65B0\u5EFA\u67E5\u8BE2",trigger:(0,e.jsx)(z.ZP,{icon:(0,e.jsx)(ie.Z,{}),type:"text",size:"small",children:"\u65B0\u5EFA\u67E5\u8BE2"}),onFinish:function(){var d=K()(M()().mark(function C(Z){return M()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,u.addQuery({title:Z.title,isLeaf:!0,projectId:h,parentId:a.model.isLeaf?a.model.parentId:a.model.id});case 2:return l.abrupt("return",!0);case 3:case"end":return l.stop()}},C)}));return function(C){return d.apply(this,arguments)}}(),children:(0,e.jsx)(N.Z,{width:"md",name:"title",label:"\u67E5\u8BE2\u540D\u79F0",placeholder:"\u8BF7\u8F93\u5165\u67E5\u8BE2\u540D\u79F0",formItemProps:{rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"},{max:100,message:"\u4E0D\u80FD\u5927\u4E8E 100 \u4E2A\u5B57\u7B26"}]}})})})},an=i.memo(tn),nn=function(a){var r=(0,me.Z)(function(d){return{queryDispatch:d.dispatch}},R.Z),u=r.queryDispatch,n=(0,re.useSearchParams)(),o=I()(n,1),m=o[0],h=m.get("projectId")||"";return(!h||h==="")&&(h=ae.rV(se.s.PROJECT_ID)||""),(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(Y.Y,{title:"\u65B0\u5EFA\u76EE\u5F55",trigger:(0,e.jsx)(z.ZP,{icon:(0,e.jsx)(ie.Z,{}),type:a.isRightContext?"text":"primary",size:a.isRightContext?"small":"middle",children:"\u65B0\u5EFA\u76EE\u5F55"}),onFinish:function(){var d=K()(M()().mark(function C(Z){return M()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,u.addQuery({title:Z.title,projectId:h,isLeaf:!1});case 2:return l.abrupt("return",!0);case 3:case"end":return l.stop()}},C)}));return function(C){return d.apply(this,arguments)}}(),children:(0,e.jsx)(N.Z,{width:"md",name:"title",label:"\u76EE\u5F55\u540D\u79F0",placeholder:"\u8BF7\u8F93\u5165\u76EE\u5F55\u540D\u79F0",formItemProps:{rules:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A"},{max:100,message:"\u4E0D\u80FD\u5927\u4E8E 100 \u4E2A\u5B57\u7B26"}]}})})})},qe=i.memo(nn),rn=Se.Z.DirectoryTree,un=function(a){var r=(0,me.Z)(function(E){return{querySearchKey:E.querySearchKey,treeData:E.treeData,queryDispatch:E.dispatch}},R.Z),u=r.querySearchKey,n=r.treeData,o=r.queryDispatch,m=(0,re.useSearchParams)(),h=I()(m,1),d=h[0],C=d.get("projectId")||"";(!C||C==="")&&(C=ae.rV(se.s.PROJECT_ID)||""),(0,i.useEffect)(function(){o.fetchTreeData({projectId:C}).then(function(E){E&&E[0]&&E[0].children&&E[0].children[0]&&o.onSelectNode(E[0].children[0].key,{node:E[0].children[0],event:"select",selected:!0,selectedNodes:[],nativeEvent:new MouseEvent("click",{bubbles:!0,cancelable:!0})})})},[u]);var Z=function(l){return(0,e.jsxs)(B.Z,{mode:"inline",children:[l.isLeaf?(0,e.jsx)(e.Fragment,{}):(0,e.jsx)(B.Z.Item,{children:(0,e.jsx)(qe,{isRightContext:!0})}),(0,e.jsx)(B.Z.Item,{children:(0,e.jsx)(an,{model:l})}),(0,e.jsx)(B.Z.Item,{children:(0,e.jsx)(qa,{model:l})}),(0,e.jsx)(B.Z.Item,{children:(0,e.jsx)(en,{model:l})})]})};return(0,e.jsx)(e.Fragment,{children:n.length>0?(0,e.jsx)("div",{style:{display:"flex",marginRight:"20px",marginTop:"10px"},children:(0,e.jsx)(rn,{showIcon:!1,blockNode:!0,defaultExpandAll:!0,onSelect:function(l,F){return o.onSelectNode(l,F)},treeData:n,style:{width:"".concat(ke-50,"px")},titleRender:function(l){return(0,e.jsx)(ge.Z,{trigger:["contextMenu"],overlay:Z(l),children:(0,e.jsxs)("div",{children:[l.isLeaf?(0,e.jsx)(Ya.Z,{theme:"filled",size:"12",fill:"#DE2910",strokeWidth:2,strokeLinejoin:"miter"}):(0,e.jsx)(Ja.Z,{theme:"filled",size:"12",fill:"#DE2910",strokeWidth:2,strokeLinejoin:"miter"}),(0,e.jsx)(Ua.I,{title:l.title,style:{marginLeft:"5px"},children:l.title})]})})}})}):(0,e.jsx)(Ge.Z,{image:"/invocationlab-erd-online-view/empty.svg",imageStyle:{height:60},description:(0,e.jsx)("span",{children:"\u6682\u65E0\u6570\u636E"}),children:(0,e.jsx)(qe,{isRightContext:!1})})})},ln=i.memo(un),sn=function(a){var r=(0,me.Z)(function(n){return{queryDispatch:n.dispatch}},R.Z),u=r.queryDispatch;return a.collapsed?(0,e.jsx)(e.Fragment,{}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(de.Z,{style:{borderRadius:4,marginInlineEnd:12},allowClear:!0,size:"small",prefix:(0,e.jsx)(Xe.Z,{}),placeholder:"\u641C\u7D22\u5386\u53F2SQL",onPressEnter:function(o){var m;u.setQuerySearchKey((m=o.target)===null||m===void 0?void 0:m.value)}}),(0,e.jsx)(ln,{})]})},on=i.memo(sn),cn=t(480),dn=t(64442),ke=333,mn=[(0,e.jsx)(we.Z,{placement:"bottom",title:"\u516C\u4F17\u53F7",content:(0,e.jsx)(Oe.Z,{src:"/gongzhonghao.jpg"}),trigger:"hover",children:(0,e.jsx)(Na.Z,{theme:"filled",size:"18",fill:"#DE2910",strokeWidth:2})}),(0,e.jsx)(we.Z,{placement:"bottom",title:"\u5FAE\u4FE1\u7FA4",content:(0,e.jsx)(Oe.Z,{src:"/zerocode.png"}),trigger:"hover",children:(0,e.jsx)(Wa.Z,{theme:"filled",size:"18",fill:"#DE2910",strokeWidth:2})}),(0,e.jsx)(we.Z,{placement:"bottom",title:"\u5C0F\u7A0B\u5E8F",content:(0,e.jsx)(Oe.Z,{src:"/xiaochengxu.jpg"}),trigger:"hover",children:(0,e.jsx)(Va.Z,{theme:"filled",size:"18",fill:"#DE2910",strokeWidth:2})}),(0,e.jsx)("a",{style:{marginTop:"-10px"},target:"_blank",href:"https://gitee.com/MARTIN-88/erd-online",children:(0,e.jsx)("img",{src:"https://gitee.com/MARTIN-88/erd-online/badge/star.svg?theme=white",alt:"star"})})];function _e(v,a){var r=v.route.routes.map(function(u){var n=a[u==null?void 0:u.access];if(n!==!1){var o;return y()(y()({},u),{},{routes:u==null||(o=u.routes)===null||o===void 0?void 0:o.map(function(m){var h=a[m==null?void 0:m.access];if(h!==!1)return m})})}});return r}function hn(){var v=new Date,a=v.getFullYear(),r=v.getMonth()<9?"0"+(v.getMonth()+1):v.getMonth()+1,u=v.getDate()<10?"0"+v.getDate():v.getDate(),n=v.getHours()<10?"0"+v.getHours():v.getHours(),o=v.getMinutes()<10?"0"+v.getMinutes():v.getMinutes(),m=v.getSeconds()<10?"0"+v.getSeconds():v.getSeconds(),h=v.getMilliseconds();return"".concat(a,"-").concat(r,"-").concat(u,"T").concat(n,":").concat(o,":").concat(m,".").concat(h)}var pn=function(a){var r=(0,Ka.md)(),u=(0,i.useState)("/design/table/model"),n=I()(u,2),o=n[0],m=n[1],h=(0,re.useSearchParams)(),d=I()(h,1),C=d[0],Z=C.get("projectId")||"";(!Z||Z==="")&&(Z=ae.rV(se.s.PROJECT_ID)||"");var E=(0,w.ZP)(function(x){return{fetch:x.fetch,project:x.project,initSocket:x.initSocket,closeSocket:x.closeSocket}},R.Z),l=E.fetch,F=E.project,S=E.initSocket,p=E.closeSocket;(0,i.useEffect)(function(){l()},[Z]);var c={fixSiderbar:!0,layout:"mix",splitMenus:!0},b=(0,re.useModel)("@@initialState"),j=b.setInitialState;(0,i.useEffect)(function(){F&&F.type==="2"?((0,Ha.HT)("/ncnb/project/group/currentRolePermission",{projectId:Z}).then(function(x){if((x==null?void 0:x.code)===200){var f;x==null||(f=x.data)===null||f===void 0||(f=f.permission)===null||f===void 0||f.push("initialized"),j(function(A){return y()(y()({},A),{},{access:y()(y()({},x.data),{},{person:!1})})})}}),r.initialized&&(je.route.routes=_e(je,r))):j(function(x){return y()(y()({},x),{},{access:{person:!0}})})},[r.initialized,je.route.routes]),(0,cn.kw)(function(){p(Z)});var D=[{key:"1",label:(0,e.jsx)(z.ZP,{onClick:function(){j(function(f){return y()(y()({},f),{},{access:{}})}),(0,He.kS)()},children:"\u9000\u51FA\u767B\u5F55"})}];return(0,e.jsxs)(Oa.D,{content:["ERD Online","V4.0.7"],children:[(0,e.jsx)(ka.f,y()(y()(y()({logo:"/invocationlab-erd-online-view/logo.svg",title:"ERD Online",bgLayoutImgList:[{src:"/invocationlab-erd-online-view/ant-1.png",left:85,bottom:100,height:"303px"},{src:"/invocationlab-erd-online-view/ant-1.png",bottom:-68,right:-45,height:"303px"},{src:"/invocationlab-erd-online-view/ant-3.png",bottom:0,left:0,width:"331px"}]},je),{},{location:{pathname:o,search:"a=1"},menu:{type:"group"},avatarProps:{src:(0,e.jsx)(Qa.Z,{theme:"filled",size:"28",fill:"#DE2910",strokeWidth:2}),size:"small",title:(0,e.jsx)(ge.Z,{menu:{items:D},placement:"bottom",arrow:{pointAtCenter:!0},children:(0,e.jsx)("div",{children:ae.rV("username")})})},menuExtraRender:function(f){return o==="/design/table/model"?(0,e.jsx)(wa,{collapsed:f.collapsed}):o==="/design/table/query"?(0,e.jsx)(on,{collapsed:f.collapsed}):null},siderWidth:ke,actionsRender:function(f){return f.isMobile?[]:[]},menuFooterRender:function(f){if(!(f!=null&&f.collapsed))return(0,e.jsxs)("div",{style:{textAlign:"center",paddingBlockStart:12},children:[(0,e.jsx)("div",{children:F.projectName}),(0,e.jsx)("div",{children:"\xA9 2023 Made with erd"}),(0,e.jsx)("div",{children:"ERD Online"})]})},onMenuHeaderClick:function(f){return location=location.origin+"/invocationlab-erd-online-view/project/recent"},itemRender:function(f,A,L,Q){var T=L.indexOf(f)===0;return T?(0,e.jsx)(re.Link,{to:Q.join("/"),children:f.breadcrumbName}):(0,e.jsx)("span",{children:f.breadcrumbName})},menuItemRender:function(f,A){var L;return(L=f.path)!==null&&L!==void 0&&L.startsWith("http")||f.exact?(0,e.jsx)("a",{href:f.path,target:"_blank",style:{display:"none"},children:A}):(0,e.jsx)("div",{onClick:function(){m((f==null?void 0:f.path)||o)},children:(0,e.jsx)(re.Link,{to:(f==null?void 0:f.path)||"/project/recent",children:A})})}},c),{},{children:(0,e.jsx)(La._z,{title:!1,fixedHeader:!0,breadcrumbRender:!1,children:(0,e.jsx)($a.Z,{style:{minHeight:"85vh"},children:(0,e.jsx)(dn.Z,{})})})})),ae.Yu()&&(0,e.jsx)(Ga.Z,{description:"WARNING:\u5F53\u524D\u5904\u4E8E\u751F\u4EA7\u73AF\u5883\uFF01\uFF01\uFF01",shape:"square",style:{fontSize:20,width:260,height:10,right:230,top:10,zIndex:99999,transform:"scale(1.5)"}})]})},fn=i.memo(pn)}}]);
