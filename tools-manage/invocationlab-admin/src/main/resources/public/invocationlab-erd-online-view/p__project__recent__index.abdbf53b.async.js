"use strict";(self.webpackChunkInvocationlab_ERD_Online=self.webpackChunkInvocationlab_ERD_Online||[]).push([[786],{71016:function(h,c,e){var u=e(98404),m=e(26774),P=e(71793),_=e(2981),i=e(36422),j=function(l){return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(m.ZP,{type:"primary",ghost:!0,onClick:function(){P.LS("erd:projectId",l.project.id),_.m.push({pathname:"/design/table/model"})},children:"\u6253\u5F00\u6A21\u578B"})})};c.Z=u.memo(j)},27447:function(h,c,e){e.r(c),e.d(c,{searchProjects:function(){return b}});var u=e(9116),m=e.n(u),P=e(91484),_=e.n(P),i=e(56037),j=e(5049),v=e(38297),l=e(81152),p=e(98404),M=e(38066),g=e(11614),s=e(71016),t=e(78),a=e(36422);function b(f,D,o){f(_()(_()({},D),{},{projectName:o}))}c.default=function(){var f=(0,p.useState)({page:1,limit:6,total:0,projects:[],order:"updateTime"}),D=m()(f,2),o=D[0],I=D[1],C=function(r){(0,t.LD)(r||o).then(function(n){if(n)if(n.data){var d;I(_()(_()({},o),{},{total:n.data.total,projects:(d=n.data.records)===null||d===void 0?void 0:d.map(function(O){return _()(_()({},O),{},{avatar:"/invocationlab-erd-online-view/logo.svg"})})}))}else j.ZP.error("\u83B7\u53D6\u9879\u76EE\u4FE1\u606F\u5931\u8D25")})};return(0,p.useEffect)(function(){C(o)},[o.page,o.order]),(0,a.jsx)(i.Rs,{size:"large",toolbar:{menu:{items:[{key:"tab1",label:(0,a.jsx)("span",{children:"\u6700\u8FD1\u9879\u76EE \u300C\u4E2A\u4EBA + \u56E2\u961F\u300D"})}]},search:{size:"middle",placeholder:"\u9879\u76EE\u540D",onSearch:function(r){b(C,o,r)}}},rowKey:"projectName",dataSource:o.projects,pagination:{pageSize:o.limit,total:o.total,onChange:function(r,n){I(_()(_()({},o),{},{page:r,limit:n}))}},metas:{title:{dataIndex:"projectName",title:"\u9879\u76EE\u540D\u79F0"},avatar:{dataIndex:"avatar",search:!1},description:{dataIndex:"description",search:!1},content:{dataIndex:"updateTime",render:function(r){return(0,a.jsx)("div",{style:{color:"#00000073"},children:r},"updateTime")}},subTitle:{render:function(r,n){var d;return(0,a.jsxs)(v.Z,{size:0,children:[(0,a.jsx)(l.Z,{color:"blue",children:n.type==="1"?(0,a.jsx)(M.Z,{}):(0,a.jsx)(g.Z,{})},n.projectName),(d=n.tags)===null||d===void 0?void 0:d.split(",").map(function(O,T){return(0,a.jsx)(l.Z,{color:T%2==0?"#5BD8A6":"blue",children:O},O+T)})]})},dataIndex:"type",search:!1},actions:{render:function(r,n){return[(0,a.jsx)(s.Z,{project:n},"OpenProject"+n.id)]},search:!1}}})}},78:function(h,c,e){e.d(c,{B:function(){return j},LD:function(){return M},th:function(){return l},ty:function(){return v}});var u=e(91484),m=e.n(u),P=e(71793),_=e(88263),i=e(51927),j=function(t){return Object.assign(t,{type:1}),_.ZP.post("/ncnb/project/add",{data:t})},v=function(t){return Object.assign(t,{type:1}),_.ZP.post("/ncnb/project/update",{data:t})},l=function(t){return Object.assign(t,{type:1}),_.ZP.post("/ncnb/project/delete",{data:t})},p=function(t){return request.get("/ncnb/project/page",{params:{page:t.page,limit:t.limit,projectName:t.projectName,order:t.order,type:1}})},M=function(t){return _.ZP.get("/ncnb/project/recent",{params:{page:t.page,limit:t.limit,projectName:t.projectName,order:t.order,type:t.type}})},g=function(t){var a=cache.getItem(CONSTANT.PROJECT_ID);return request.post("/ncnb/project/save",{data:_objectSpread(_objectSpread({},t),{},{id:a})})}}}]);
